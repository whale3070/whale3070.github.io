

  <!DOCTYPE html>
  <html lang="zh-CN" data-default-color-scheme=&#34;dark&#34; >
  <style>
    .text1
    {
    text-shadow: 0px 0px 2px #f2f3f2;
    }
    </style>

  

<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/null">
  <link rel="icon" type="image/png" href="/null">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  <title>university.alchemy6 - whale3070&#39;s blog</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"192.168.126.129","root":"/","version":"1.8.7","typing":{"enable":false,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 7.3.0"></head>


    <body>
      <header style="height: 70vh;">
        <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>InfoSec learning</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/search/">
                <i class="iconfont icon-search"></i>
                搜索
              </a>
            </li>
          
        
        
        
          
        
      </ul>
    </div>
  </div>
</nav>

          <div class="banner" id="banner" false
            style="background: url('/img/default.png') no-repeat center center;
              background-size: cover;">
              <div class="full-bg-img">
                <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
                  <div class="page-header text-center fade-in-up">
                    <span class="h2 text1" id="subtitle" title="university.alchemy6">
                      
                        university.alchemy6
                      
                    </span>
        
                    
                      <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2025-12-15 07:25" pubdate>
        2025年12月15日 早上
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      5.4k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      71
       分钟
    </span>
  

  
  
</div>

                    
                  </div>
                    
                  </div>
                  
                </div>
              </div>
          </div>
      </header>

      <main>
        
          

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto" data-pagefind-body>
            <!-- SEO header -->
            <h1 style="display: none">university.alchemy6</h1>
            
            <div class="markdown-body">
              <h1 id="Your-Goal-Remove-Members-你的目标：移除成员"><a href="#Your-Goal-Remove-Members-你的目标：移除成员" class="headerlink" title="Your Goal: Remove Members 你的目标：移除成员"></a>Your Goal: Remove Members 你的目标：移除成员</h1><p>Create a constructor which will add the deployer address as the first member of the stack club.<br>创建一个构造函数，该函数将把部署者地址添加为堆栈俱乐部的第一个成员。<br>Create a removeLastMember function which will remove the last member added to the club.<br>创建一个removeLastMember函数，该函数将移除最后加入俱乐部的成员。<br> Function Security 函数安全性<br>Ensure that the removeLastMember function can only be called by an existing member<br>确保removeLastMember函数只能由现有成员调用<br>Ensure that addMember can only be called by an existing member<br>确保addMember只能由现有成员调用</p>
<p>答案：</p>
<figure class="highlight scss"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs scss"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span><br>pragma solidity <span class="hljs-number">0.8</span><span class="hljs-selector-class">.20</span>;<br><br>contract StackClub &#123;<br>    <span class="hljs-selector-tag">address</span><span class="hljs-selector-attr">[]</span> public numbers;<br>    <span class="hljs-built_in">constructor</span>() &#123;<br>        members<span class="hljs-selector-class">.push</span>(msg.sender);<br>        <span class="hljs-comment">//创建一个构造函数，该函数将把部署者地址添加为堆栈俱乐部的第一个成员。</span><br>    &#125;<br>    <span class="hljs-selector-tag">address</span><span class="hljs-selector-attr">[]</span> public members;<br><br>    <span class="hljs-comment">//确保removeLastMember函数只能由现有成员调用</span><br>    modifier <span class="hljs-built_in">onlyMember</span>() &#123;<br>        <span class="hljs-built_in">require</span>(_isMember(msg.sender), &quot;Not member&quot;);<br>        _;<br>    &#125;<br><br>    function <span class="hljs-built_in">addMember</span>(address addr) external onlyMember <span class="hljs-built_in">returns</span>(address[] memory) &#123;<br>        members<span class="hljs-selector-class">.push</span>(addr);<br>        return members;<br>    &#125; <br>    function <span class="hljs-built_in">isMember</span>(address addr) external view <span class="hljs-built_in">returns</span>(bool) &#123;<br>        for (uint i = <span class="hljs-number">0</span>; i &lt; members.length; i++) &#123;<br>            if (addr == members[i]) &#123;<br>                return true;<br>                break;<br>            &#125;<br>        &#125;<br>    &#125;<br>    function <span class="hljs-built_in">removeLastMember</span>() external onlyMember &#123;<br>        <span class="hljs-comment">//创建一个removeLastMember函数，该函数将移除最后加入俱乐部的成员。</span><br>        <span class="hljs-built_in">require</span>(members.length &gt; <span class="hljs-number">0</span>, &quot;No members to remove&quot;);<br>        members<span class="hljs-selector-class">.pop</span>();<br>    &#125;<br>    function <span class="hljs-built_in">_isMember</span>(address addr) internal view returns (bool) &#123;<br>        for (uint256 i = <span class="hljs-number">0</span>; i &lt; members.length; i++) &#123;<br>            if (members[i] == addr) return true;<br>        &#125;<br>        return false;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h1 id="Your-Goal-Create-a-Vote"><a href="#Your-Goal-Create-a-Vote" class="headerlink" title="Your Goal: Create a Vote"></a>Your Goal: Create a Vote</h1><p>Create a new struct called Vote that contains two properties: a Choices choice and an address voter.<br>Then create a public storage variable called vote which is of the Vote type.<br>Finally, in the createVote function create a new instance of Vote and store it in the storage variable vote. Use the choice passed in as an argument and the msg.sender for the vote properties.</p>
<p>答案：</p>
<figure class="highlight d"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs d"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span><br><span class="hljs-keyword">pragma</span> solidity <span class="hljs-number">0.8</span><span class="hljs-number">.20</span>;<br><br>contract Contract &#123;<br>	<span class="hljs-keyword">enum</span> Choices &#123; Yes, No &#125;<br><br>	<span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> create a vote struct and a public state variable</span><br>	<span class="hljs-keyword">struct</span> Vote &#123;<br>		Choices choice;<br>		address voter;<br>	&#125;<br>	Vote <span class="hljs-keyword">public</span> vote;<br>	<span class="hljs-built_in">function</span> createVote(Choices choice) external &#123;<br>		<span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> create a new vote</span><br>		vote = Vote(choice,msg.sender);<br>	&#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h1 id="Your-Goal-Return-Memory-Vote-你的目标：返回内存投票"><a href="#Your-Goal-Return-Memory-Vote-你的目标：返回内存投票" class="headerlink" title="Your Goal: Return Memory Vote 你的目标：返回内存投票"></a>Your Goal: Return Memory Vote 你的目标：返回内存投票</h1><p>Create an external, view function called createVote which takes Choices value as a parameter and returns an instance of type Vote.<br>创建一个名为createVote的外部视图函数，该函数接受Choices值作为参数，并返回一个Vote类型的实例。<br>This function should use the Choices value and the msg.sender as the values to create the vote.<br>此函数应使用Choices值和msg.sender作为创建投票的值。</p>
<h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><p>当你返回结构体或其他引用类型（如数组）时，必须使用数据位置关键字来明确数据的来源：storage、memory或calldata。</p>
<p>然而，对于external和public方法，不能对返回参数使用storage关键字。storage关键字会提供对合约自身持久化存储中某个位置的直接引用，而这一位置无法在合约外部访问。应改用memory或calldata来返回数据的副本。</p>
<h2 id="正确答案"><a href="#正确答案" class="headerlink" title="正确答案"></a>正确答案</h2><figure class="highlight stata"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs stata"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span><br>pragma solidity 0.8.20;<br><br><span class="hljs-keyword">contract</span> <span class="hljs-keyword">Contract</span> &#123;<br>	enum Choices &#123; Yes, <span class="hljs-keyword">No</span> &#125;<br><br>	struct Vote &#123;<br>		Choices choice;<br>		address voter;<br>	&#125;<br>	<br>	<span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> make a new createVote function</span><br>	function createVote(Choices _choices) external <span class="hljs-keyword">view</span> returns (Vote <span class="hljs-keyword">memory</span>) &#123;<br>	<span class="hljs-comment">//创建一个名为createVote的外部视图函数，该函数接受Choices值作为参数，并返回一个Vote类型的实例。</span><br>		<span class="hljs-keyword">return</span> Vote(_choices,msg.sender);<br>		<span class="hljs-comment">//此函数应使用Choices值和msg.sender作为创建投票的值。</span><br>	&#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h1 id="Your-Goal-Vote-Array-你的目标：投票数组"><a href="#Your-Goal-Vote-Array-你的目标：投票数组" class="headerlink" title="Your Goal: Vote Array 你的目标：投票数组"></a>Your Goal: Vote Array 你的目标：投票数组</h1><p>Create a public storage array of the Vote struct called votes.<br>创建一个名为votes的Vote结构体的公共存储数组。<br>In the createVote function use the choice parameter and the msg.sender to create a new vote and push it onto the array of votes.<br>在createVote函数中，使用choice参数和msg.sender创建一个新投票，并将其添加到投票数组中。</p>
<figure class="highlight smali"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs smali">// SPDX-License-Identifier: MIT<br>pragma solidity 0.8.20;<br><br>contract Contract &#123;<br>	enum Choices &#123; Yes, No &#125;<br>	<br>	struct Vote &#123;<br>		Choices choice;<br>		address voter;<br>	&#125;<br>	<br>	// TODO: create a<span class="hljs-keyword"> public</span> state variable: an<span class="hljs-built_in"> array </span>of votes<br>	Vote[]<span class="hljs-keyword"> public</span> votes;<br>	//完整声明状态变量（类型为Vote数组，变量名votes，public可见）<br>	function createVote(Choices choice) external returns (Vote memory) &#123;<br>		// TODO:<span class="hljs-built_in"> add </span>a<span class="hljs-built_in"> new </span>vote to the<span class="hljs-built_in"> array </span>of votes state variable<br>		votes.push(Vote(choice,msg.sender));<br>	<span class="hljs-built_in">	return </span>votes[votes.length -1];<br>	&#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>-1 的原因是「数组索引从 0 开始，length 是元素总数，最后一个元素的索引 = 长度 - 1」，只是补充 Solidity 特有的细节说明：<br>一、Solidity 中数组的核心规则（关键）<br>Solidity 数组的索引同样从 0 开始，length 属性返回元素的个数（uint 类型），因此：<br>长度为 n 的数组，合法索引范围是 0 ~ n-1；<br>直接访问 votes[votes.length] 会触发数组越界（Solidity 中越界访问会直接 revert 交易，而非返回 undefined）；<br>votes[votes.length - 1] 是获取最后一个元素的唯一安全方式。</p>
<h1 id="Your-Goal-Find-Vote-你的目标：找到投票"><a href="#Your-Goal-Find-Vote-你的目标：找到投票" class="headerlink" title="Your Goal: Find Vote 你的目标：找到投票"></a>Your Goal: Find Vote 你的目标：找到投票</h1><p>Create an external, view function hasVoted which takes an address and returns a bool indicating if the address has cast a vote or not.<br>创建一个外部的视图函数hasVoted，它接收一个地址&lt;/b1并返回一个布尔值&lt;/b2，用于指示该地址是否已投票。<br>Create an external, view function findChoice which takes an address and returns a Choices value indicating the choice on the vote cast by the address. For this function there is no need to worry about the case where a vote was not cast.<br>创建一个外部的视图函数findChoice，它接收一个地址&lt;/b1并返回一个Choices值，该值表示该地址所投的选票选项。对于这个函数，无需考虑未投票的情况。</p>
<p>答案：</p>
<figure class="highlight zephir"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zephir"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span><br>pragma solidity <span class="hljs-number">0.8</span><span class="hljs-number">.20</span>;<br><br>contract Contract &#123;<br>	enum Choices &#123; Yes, No &#125;<br>	<br>	struct Vote &#123;<br>		Choices choice;<br>		address voter;<br>	&#125;<br>	mapping(address =&gt; <span class="hljs-keyword">bool</span>) <span class="hljs-keyword">private</span> _voterStatus;<br>	<span class="hljs-comment">//mapping(address =&gt; Vote) private votes;</span><br>	<span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> create a public state variable: an array of votes</span><br>	Vote[] <span class="hljs-keyword">public</span> votes;<br>	<span class="hljs-comment">//Vote none = Vote(Choices(0), address(0));</span><br>	<span class="hljs-comment">//完整声明状态变量（类型为Vote数组，变量名votes，public可见）</span><br>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createVote</span><span class="hljs-params">(Choices choice)</span> <span class="hljs-title">external</span> <span class="hljs-title">returns</span> <span class="hljs-params">(Vote memory)</span> </span>&#123;<br>		<span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> add a new vote to the array of votes state variable</span><br>		<span class="hljs-keyword">require</span>(!_voterStatus[msg.sender], <span class="hljs-string">&quot;You have already voted.&quot;</span>);<br><br>		votes.push(Vote(choice,msg.sender));<br>		<span class="hljs-comment">// 将投票添加到数组中</span><br><br>		_voterStatus[msg.sender] = <span class="hljs-keyword">true</span>;<br>		<span class="hljs-comment">// 更新投票状态</span><br>		<span class="hljs-keyword">return</span> votes[votes.length <span class="hljs-number">-1</span>];<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasVoted</span><span class="hljs-params">(address voter)</span> <span class="hljs-title">external</span> <span class="hljs-title">view</span> <span class="hljs-title">returns</span> <span class="hljs-params">(<span class="hljs-keyword">bool</span>)</span> </span>&#123;<br>		<span class="hljs-comment">//创建一个外部的视图函数hasVoted，它接收一个地址&lt;/b1并返回一个布尔值&lt;/b2，用于指示该地址是否已投票。</span><br>		<span class="hljs-keyword">return</span> _voterStatus[voter];<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findChoice</span><span class="hljs-params">(address voter)</span> <span class="hljs-title">external</span> <span class="hljs-title">returns</span> <span class="hljs-params">(Choices)</span> </span>&#123;<br>		<span class="hljs-comment">//该值表示该地址所投的选票选项。</span><br>		<span class="hljs-comment">//创建一个外部的视图函数findChoice，它接收一个地址&lt;/b1并返回一个Choices值，该值表示该地址所投的选票选项。对于这个函数，无需考虑未投票的情况。</span><br>	    <span class="hljs-comment">// 查找该地址对应的投票记录</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint</span> i = <span class="hljs-number">0</span>; i &lt; votes.length; i++) &#123;<br>            <span class="hljs-keyword">if</span> (votes[i].voter == voter) &#123;<br>                <span class="hljs-keyword">return</span> votes[i].choice;<br>            &#125;<br>        &#125;<br>	&#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h1 id="Your-Goal-Vote-Once-你的目标：投票一次"><a href="#Your-Goal-Vote-Once-你的目标：投票一次" class="headerlink" title="Your Goal: Vote Once 你的目标：投票一次"></a>Your Goal: Vote Once 你的目标：投票一次</h1><p>Each address should only be allowed to call createVote once.<br>每个地址应只允许调用一次createVote。<br>If they try again, the call should be reverted.<br>如果他们再次尝试，该调用应被回滚。</p>
<p>答案：</p>
<figure class="highlight zephir"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zephir"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span><br>pragma solidity <span class="hljs-number">0.8</span><span class="hljs-number">.20</span>;<br><br>contract Contract &#123;<br>	enum Choices &#123; Yes, No &#125;<br>	<br>	struct Vote &#123;<br>		Choices choice;<br>		address voter;<br>	&#125;<br>	mapping(address =&gt; <span class="hljs-keyword">bool</span>) <span class="hljs-keyword">private</span> _voterStatus;<br>	<span class="hljs-comment">//mapping(address =&gt; Vote) private votes;</span><br>	<span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> create a public state variable: an array of votes</span><br>	Vote[] <span class="hljs-keyword">public</span> votes;<br>	<span class="hljs-comment">//Vote none = Vote(Choices(0), address(0));</span><br>	<span class="hljs-comment">//完整声明状态变量（类型为Vote数组，变量名votes，public可见）</span><br>	modifier onlyVoteOnce() &#123;<br>        <span class="hljs-keyword">require</span>(!_voterStatus[msg.sender], <span class="hljs-string">&quot;You have already voted.&quot;</span>);<br>        _;<br>    &#125;<br><br>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createVote</span><span class="hljs-params">(Choices choice)</span> <span class="hljs-title">external</span> <span class="hljs-title">onlyVoteOnce</span> <span class="hljs-title">returns</span> <span class="hljs-params">(Vote memory)</span> </span>&#123;<br>		<span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> add a new vote to the array of votes state variable</span><br>		<span class="hljs-keyword">require</span>(!_voterStatus[msg.sender], <span class="hljs-string">&quot;You have already voted.&quot;</span>);<br><br>		votes.push(Vote(choice,msg.sender));<br>		<span class="hljs-comment">// 将投票添加到数组中</span><br><br>		_voterStatus[msg.sender] = <span class="hljs-keyword">true</span>;<br>		<span class="hljs-comment">// 更新投票状态</span><br>		<span class="hljs-keyword">return</span> votes[votes.length <span class="hljs-number">-1</span>];<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasVoted</span><span class="hljs-params">(address voter)</span> <span class="hljs-title">external</span> <span class="hljs-title">view</span> <span class="hljs-title">returns</span> <span class="hljs-params">(<span class="hljs-keyword">bool</span>)</span> </span>&#123;<br>		<span class="hljs-comment">//创建一个外部的视图函数hasVoted，它接收一个地址&lt;/b1并返回一个布尔值&lt;/b2，用于指示该地址是否已投票。</span><br>		<span class="hljs-keyword">return</span> _voterStatus[voter];<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findChoice</span><span class="hljs-params">(address voter)</span> <span class="hljs-title">external</span> <span class="hljs-title">returns</span> <span class="hljs-params">(Choices)</span> </span>&#123;<br>		<span class="hljs-comment">//该值表示该地址所投的选票选项。</span><br>		<span class="hljs-comment">//创建一个外部的视图函数findChoice，它接收一个地址&lt;/b1并返回一个Choices值，该值表示该地址所投的选票选项。对于这个函数，无需考虑未投票的情况。</span><br>	    <span class="hljs-comment">// 查找该地址对应的投票记录</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint</span> i = <span class="hljs-number">0</span>; i &lt; votes.length; i++) &#123;<br>            <span class="hljs-keyword">if</span> (votes[i].voter == voter) &#123;<br>                <span class="hljs-keyword">return</span> votes[i].choice;<br>            &#125;<br>        &#125;<br>	&#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h1 id="在solidity里，function可以没有returns吗？"><a href="#在solidity里，function可以没有returns吗？" class="headerlink" title="在solidity里，function可以没有returns吗？"></a>在solidity里，function可以没有returns吗？</h1><p>在 Solidity 中，<strong>function 完全可以没有 returns</strong>，这是合法且常用的写法。核心规则与其他语言一致，但要结合 Solidity 的特性（如状态修改、可见性、返回值声明要求）具体说明：</p>
<h3 id="一、核心规则：返回值由-returns-声明决定"><a href="#一、核心规则：返回值由-returns-声明决定" class="headerlink" title="一、核心规则：返回值由 returns 声明决定"></a>一、核心规则：返回值由 <code>returns</code> 声明决定</h3><p>Solidity 函数是否需要返回值，完全取决于是否显式声明了 <code>returns</code>（注意：Solidity 中 <code>returns</code> 是“返回值声明关键字”，而非语句——返回值通过 <code>return</code> 语句触发，而是否需要返回值由函数定义时的 <code>returns(类型)</code> 决定）：</p>
<ul>
<li>若函数未声明 <code>returns</code> → 无需返回任何值，也不能用 <code>return 表达式</code>（但可单独写 <code>return;</code> 用于提前退出函数）；</li>
<li>若函数声明了 <code>returns(类型)</code> → 必须通过 <code>return 表达式;</code> 返回对应类型的值（否则编译报错）。</li>
</ul>
<h3 id="二、无-returns-函数的常见场景（附示例）"><a href="#二、无-returns-函数的常见场景（附示例）" class="headerlink" title="二、无 returns 函数的常见场景（附示例）"></a>二、无 <code>returns</code> 函数的常见场景（附示例）</h3><p>Solidity 中无返回值的函数，通常用于“修改合约状态”或“执行动作”（而非“计算并返回结果”），例如转账、更新状态变量、触发事件等。</p>
<h4 id="1-基础示例：修改状态变量的函数"><a href="#1-基础示例：修改状态变量的函数" class="headerlink" title="1. 基础示例：修改状态变量的函数"></a>1. 基础示例：修改状态变量的函数</h4><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">pragma solidity ^0.8.20;<br><br>contract TestContract &#123;<br>    uint256 public count; // 状态变量<br><br>    // 无 returns：仅修改状态变量，无返回值<br>    function increment() public &#123;<br>        count += 1; // 直接修改合约状态<br>    &#125;<br><br>    // 无 returns：带参数，修改状态<br>    function setCount(uint256 _newCount) public &#123;<br>        require(_newCount &gt; 0, &quot;Count must be positive&quot;); // 校验<br>        count = _newCount;<br>        // 可加 return; 提前退出（无返回值）<br>        if (count &gt; 100) return; <br>        // 后续逻辑（count &lt;=100 时执行）<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h4 id="2-场景扩展：转账-触发事件的函数"><a href="#2-场景扩展：转账-触发事件的函数" class="headerlink" title="2. 场景扩展：转账/触发事件的函数"></a>2. 场景扩展：转账/触发事件的函数</h4><p>无返回值函数最典型的用途是 <code>transfer</code> 转账或触发事件（这类操作不需要返回结果，仅需执行动作）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">pragma solidity ^0.8.20;<br><br>contract PaymentContract &#123;<br>    event PaymentReceived(address indexed sender, uint256 amount);<br><br>    // 无 returns：接收 ETH 并触发事件<br>    receive() external payable &#123;<br>        emit PaymentReceived(msg.sender, msg.value); // 触发事件，无返回值<br>    &#125;<br><br>    // 无 returns：转账 ETH 给指定地址<br>    function sendEther(address payable _to, uint256 _amount) public payable &#123;<br>        require(address(this).balance &gt;= _amount, &quot;Insufficient balance&quot;);<br>        _to.transfer(_amount); // 执行转账，无返回值<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h4 id="3-特殊情况：pure-view-函数也可无-returns"><a href="#3-特殊情况：pure-view-函数也可无-returns" class="headerlink" title="3. 特殊情况：pure/view 函数也可无 returns"></a>3. 特殊情况：<code>pure</code>/<code>view</code> 函数也可无 <code>returns</code></h4><p><code>pure</code>（不读不写状态）、<code>view</code>（只读状态）函数通常用于返回计算结果，但也可以无 <code>returns</code>（仅执行无副作用的逻辑，如校验、日志输出）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">pragma solidity ^0.8.20;<br><br>contract PureViewTest &#123;<br>    uint256 public constant MAX_VALUE = 1000;<br><br>    // view 函数（只读状态），无 returns：仅校验<br>    function checkValue(uint256 _value) public view &#123;<br>        require(_value &lt;= MAX_VALUE, &quot;Value exceeds max&quot;);<br>    &#125;<br><br>    // pure 函数（不读不写），无 returns：仅打印日志（测试用）<br>    function logMessage(string memory _msg) public pure &#123;<br>        // Solidity 0.8.20+ 支持 console.log（需导入 hardhat/console.sol）<br>        console.log(&quot;Message:&quot;, _msg);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h3 id="三、与“有-returns”函数的对比（避免踩坑）"><a href="#三、与“有-returns”函数的对比（避免踩坑）" class="headerlink" title="三、与“有 returns”函数的对比（避免踩坑）"></a>三、与“有 returns”函数的对比（避免踩坑）</h3><table>
<thead>
<tr>
<th>函数类型</th>
<th>示例代码</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>无 <code>returns</code>（无返回值）</td>
<td><code>function doSomething() public &#123; ... &#125;</code></td>
<td>无需 <code>return</code>，仅执行动作</td>
</tr>
<tr>
<td>有 <code>returns</code>（有返回值）</td>
<td><code>function getCount() public view returns(uint256) &#123; return count; &#125;</code></td>
<td>必须 <code>return</code> 对应类型的值，否则编译报错</td>
</tr>
<tr>
<td>有 <code>returns</code>（多返回值）</td>
<td><code>function getMinMax(uint256 a, uint256 b) public pure returns(uint256, uint256) &#123; return (a&lt;b?a:b, a&gt;b?a:b); &#125;</code></td>
<td>需返回所有声明的类型，顺序对应</td>
</tr>
</tbody></table>
<h3 id="四、关键注意点"><a href="#四、关键注意点" class="headerlink" title="四、关键注意点"></a>四、关键注意点</h3><ol>
<li><p><strong><code>return</code> 语句的两种用法</strong>：</p>
<ul>
<li>无 <code>returns</code> 函数：可写 <code>return;</code>（仅用于提前退出，不能带表达式，如 <code>return 1;</code> 会编译报错）；</li>
<li>有 <code>returns</code> 函数：必须写 <code>return 表达式;</code>（表达式类型/数量需与 <code>returns</code> 声明一致）。</li>
</ul>
</li>
<li><p><strong>可见性不影响返回值规则</strong>：</p>
<ul>
<li>无论函数是 <code>public</code>/<code>external</code>/<code>internal</code>/<code>private</code>，是否需要 <code>returns</code> 仅由“是否声明返回类型”决定。</li>
</ul>
</li>
<li><p><strong>Solidity 0.8.x 兼容性</strong>：</p>
<ul>
<li>从 0.4.x 到 0.8.x，无 <code>returns</code> 函数的规则完全一致，无版本兼容问题。</li>
</ul>
</li>
</ol>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>在 Solidity 中：</p>
<ul>
<li>**允许函数没有 <code>returns</code>**：这类函数专注于“执行动作”（修改状态、转账、触发事件、校验等），无需返回值，是合约开发的基础用法；</li>
<li>只有当函数需要“返回计算结果”时，才需要声明 <code>returns(类型)</code> 并通过 <code>return</code> 语句返回对应值。</li>
</ul>
<p>简单说：<strong>Solidity 函数的核心是“是否需要产出结果”——不产出结果就不用写 <code>returns</code>，仅执行动作即可</strong>，这是合约开发中最常见的函数类型之一（如转账函数、状态更新函数）。</p>
<h1 id="Your-Goal-Change-Vote-你的目标：更改投票"><a href="#Your-Goal-Change-Vote-你的目标：更改投票" class="headerlink" title="Your Goal: Change Vote 你的目标：更改投票"></a>Your Goal: Change Vote 你的目标：更改投票</h1><p>Create an external function called changeVote which takes a Choices argument and changes the choice on the existing vote for the msg.sender.<br>创建一个名为changeVote的外部函数，该函数接受一个Choices参数，并更改msg.sender现有投票的选项。<br>If they do not have an existing vote, revert the call.<br>如果他们没有现有的投票，则回滚调用。</p>
<p>答案：</p>
<figure class="highlight zephir"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zephir"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span><br>pragma solidity <span class="hljs-number">0.8</span><span class="hljs-number">.20</span>;<br><br>contract Contract &#123;<br>	enum Choices &#123; Yes, No &#125;<br>	<br>	struct Vote &#123;<br>		Choices choice;<br>		address voter;<br>	&#125;<br>	mapping(address =&gt; <span class="hljs-keyword">bool</span>) <span class="hljs-keyword">private</span> _voterStatus;<br>	<span class="hljs-comment">//mapping(address =&gt; Vote) private votes;</span><br>	<span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> create a public state variable: an array of votes</span><br>	Vote[] <span class="hljs-keyword">public</span> votes;<br>	<span class="hljs-comment">//Vote none = Vote(Choices(0), address(0));</span><br>	<span class="hljs-comment">//完整声明状态变量（类型为Vote数组，变量名votes，public可见）</span><br>	modifier onlyVoteOnce() &#123;<br>        <span class="hljs-keyword">require</span>(!_voterStatus[msg.sender], <span class="hljs-string">&quot;You have already voted.&quot;</span>);<br>        _;<br>    &#125;<br><br>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createVote</span><span class="hljs-params">(Choices choice)</span> <span class="hljs-title">external</span> <span class="hljs-title">onlyVoteOnce</span> <span class="hljs-title">returns</span> <span class="hljs-params">(Vote memory)</span> </span>&#123;<br>		<span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> add a new vote to the array of votes state variable</span><br>		<span class="hljs-keyword">require</span>(!_voterStatus[msg.sender], <span class="hljs-string">&quot;You have already voted.&quot;</span>);<br><br>		votes.push(Vote(choice,msg.sender));<br>		<span class="hljs-comment">// 将投票添加到数组中</span><br><br>		_voterStatus[msg.sender] = <span class="hljs-keyword">true</span>;<br>		<span class="hljs-comment">// 更新投票状态</span><br>		<span class="hljs-keyword">return</span> votes[votes.length <span class="hljs-number">-1</span>];<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasVoted</span><span class="hljs-params">(address voter)</span> <span class="hljs-title">external</span> <span class="hljs-title">view</span> <span class="hljs-title">returns</span> <span class="hljs-params">(<span class="hljs-keyword">bool</span>)</span> </span>&#123;<br>		<span class="hljs-comment">//创建一个外部的视图函数hasVoted，它接收一个地址&lt;/b1并返回一个布尔值&lt;/b2，用于指示该地址是否已投票。</span><br>		<span class="hljs-keyword">return</span> _voterStatus[voter];<br>	&#125;<br>	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">findChoice</span><span class="hljs-params">(address voter)</span> <span class="hljs-title">external</span> <span class="hljs-title">returns</span> <span class="hljs-params">(Choices)</span> </span>&#123;<br>		<span class="hljs-comment">//该值表示该地址所投的选票选项。</span><br>		<span class="hljs-comment">//创建一个外部的视图函数findChoice，它接收一个地址&lt;/b1并返回一个Choices值，该值表示该地址所投的选票选项。对于这个函数，无需考虑未投票的情况。</span><br>	    <span class="hljs-comment">// 查找该地址对应的投票记录</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint</span> i = <span class="hljs-number">0</span>; i &lt; votes.length; i++) &#123;<br>            <span class="hljs-keyword">if</span> (votes[i].voter == voter) &#123;<br>                <span class="hljs-keyword">return</span> votes[i].choice;<br>            &#125;<br>        &#125;<br>	&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">changeVote</span><span class="hljs-params">(Choices newChoice)</span> <span class="hljs-title">external</span> </span>&#123;<br>    	<span class="hljs-comment">// 确保投票者已经投过票</span><br>    	<span class="hljs-keyword">require</span>(_voterStatus[msg.sender], <span class="hljs-string">&quot;You have not voted yet.&quot;</span>);<br>    <br>    	<span class="hljs-comment">// 查找并更新现有的投票</span><br>    	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">uint</span> i = <span class="hljs-number">0</span>; i &lt; votes.length; i++) &#123;<br>        	<span class="hljs-comment">// 如果找到了当前地址的投票记录</span><br>        	<span class="hljs-keyword">if</span> (votes[i].voter == msg.sender) &#123;<br>            	<span class="hljs-comment">// 更新投票选项为新的选项</span><br>            	votes[i].choice = newChoice;<br>            	<span class="hljs-keyword">return</span>; <span class="hljs-comment">// 完成更新后返回</span><br>        	&#125;<br>    	&#125;<br><br>    <span class="hljs-comment">// 如果未找到投票记录，抛出异常（此处理论上不应该发生，因为上面已经检查过投票状态）</span><br>    revert(<span class="hljs-string">&quot;No existing vote found for this address.&quot;</span>);<br>	&#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h1 id="Your-Goal-Members-Mapping-你的目标：成员映射"><a href="#Your-Goal-Members-Mapping-你的目标：成员映射" class="headerlink" title="Your Goal: Members Mapping 你的目标：成员映射"></a>Your Goal: Members Mapping 你的目标：成员映射</h1><p>Create a public mapping called members which maps an address to a bool. The bool will indicate whether or not the address is currently a member!<br>创建一个名为members的公共映射，它将address映射到bool。bool将指示该地址当前是否为成员！<br>Create an external function called addMember which takes an address and adds it as a member. You can do this by storing true in the data location corresponding to the address in the members mapping.<br>创建一个名为addMember的外部函数，该函数接收一个地址&lt;/b1并将其添加为成员。你可以通过在members映射中该地址对应的数据源位置存储true来实现这一点。</p>
<p>mappings 是storage，不能传递变量，是key/value 键值对</p>
<figure class="highlight zephir"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zephir"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span><br>pragma solidity ^<span class="hljs-number">0.8</span><span class="hljs-number">.20</span>;<br><br>contract Contract &#123;<br>    mapping(address =&gt; <span class="hljs-keyword">bool</span>) <span class="hljs-keyword">public</span> members;<br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addMember</span><span class="hljs-params">(address addr)</span> <span class="hljs-title">external</span> </span>&#123;<br>        <span class="hljs-comment">//如何通过在members映射中该地址对应的数据源位置存储true来实现这一点。</span><br>        members[addr] = <span class="hljs-keyword">true</span>;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h1 id="我学solidity开发需要刷算法题吗"><a href="#我学solidity开发需要刷算法题吗" class="headerlink" title="我学solidity开发需要刷算法题吗"></a>我学solidity开发需要刷算法题吗</h1><p>学习 Solidity 开发<strong>是否需要刷算法题</strong>，核心取决于你的<strong>职业目标</strong>——算法题不是 Solidity 开发的「必修课」，但却是「加分项」，甚至是某些方向的「必备项」，以下分场景拆解：</p>
<h3 id="一、先明确：不同-Solidity-方向对算法的需求差异"><a href="#一、先明确：不同-Solidity-方向对算法的需求差异" class="headerlink" title="一、先明确：不同 Solidity 方向对算法的需求差异"></a>一、先明确：不同 Solidity 方向对算法的需求差异</h3><table>
<thead>
<tr>
<th>开发方向</th>
<th>算法需求程度</th>
<th>核心原因</th>
</tr>
</thead>
<tbody><tr>
<td>普通 DApp 开发（如NFT、简单DeFi、链上工具）</td>
<td>低</td>
<td>核心工作是调用合约、处理链下逻辑、对接前端，仅需基础逻辑（循环、条件判断）</td>
</tr>
<tr>
<td>核心 DeFi/金融合约（如AMM、借贷、衍生品）</td>
<td>中-高</td>
<td>涉及数学计算（如恒定乘积、利率模型）、状态优化、边界条件处理</td>
</tr>
<tr>
<td>链上游戏/元宇宙</td>
<td>中</td>
<td>需处理游戏规则、随机数、状态同步，部分场景需简单算法（如路径、排序）</td>
</tr>
<tr>
<td>合约优化/安全审计</td>
<td>中-高</td>
<td>审计需识别逻辑漏洞（如越界、下溢），优化需用算法降低 Gas 消耗</td>
</tr>
<tr>
<td>ZK/Layer2/核心协议开发</td>
<td>高</td>
<td>涉及密码学、零知识证明、数据结构（如Merkle树）、高效排序/查找</td>
</tr>
</tbody></table>
<h3 id="二、刷算法题的「核心价值」（针对-Solidity-开发）"><a href="#二、刷算法题的「核心价值」（针对-Solidity-开发）" class="headerlink" title="二、刷算法题的「核心价值」（针对 Solidity 开发）"></a>二、刷算法题的「核心价值」（针对 Solidity 开发）</h3><p>刷算法题的本质不是「背题」，而是训练<strong>逻辑思维、边界条件处理、代码严谨性</strong>——这些能力对 Solidity 至关重要（因为链上代码不可逆，一个小漏洞可能导致数百万资产损失），具体价值：</p>
<ol>
<li><p><strong>提升逻辑严谨性</strong>：<br>Solidity 对「越界、下溢、空值、循环终止条件」的要求极高（0.8+ 虽有自动检查，但逻辑漏洞仍需人工规避），而算法题的「边界用例分析」（如空数组、极值、异常输入）能直接训练这种能力。<br>比如：刷「数组越界处理」「整数溢出防护」类算法题，能让你写 <code>votes[votes.length - 1]</code> 时自然想到先判断数组非空。</p>
</li>
<li><p><strong>掌握链上高效数据处理</strong>：<br>以太坊 Gas 费与代码执行步数强相关，算法能力决定你能否用「更优逻辑」降低消耗：</p>
<ul>
<li>比如：遍历数组时用「提前终止循环」替代全量遍历；</li>
<li>比如：用「映射（Mapping）+ 数组」替代纯数组查找（O(1) 替代 O(n)）；</li>
<li>这些都是算法中「时间/空间复杂度」的基础思维。</li>
</ul>
</li>
<li><p><strong>应对核心领域的数学/算法需求</strong>：<br>做 DeFi 必须懂「恒定乘积公式（x*y=k）」「无常损失计算」「复利模型」，这些本质是数学+算法；<br>做 ZK 需理解「Merkle 树构建/验证」「哈希计算优化」，做 Layer2 需懂「批量交易排序/打包」——这些都需要算法思维支撑。</p>
</li>
<li><p><strong>应对大厂/核心团队面试</strong>：<br>如果你想进头部 Web3 团队（如 Uniswap、Aave、以太坊基金会），算法题是面试标配：</p>
<ul>
<li>基础题：数组/字符串处理、简单排序/查找、数学计算（如质数判断、进制转换）；</li>
<li>进阶题：链上场景题（如「如何高效计算 NFT 持有者的平均持仓」「如何优化 AMM 的价格计算 Gas」）。</li>
</ul>
</li>
</ol>
<h3 id="三、如果刷，该怎么刷？（针对性路线）"><a href="#三、如果刷，该怎么刷？（针对性路线）" class="headerlink" title="三、如果刷，该怎么刷？（针对性路线）"></a>三、如果刷，该怎么刷？（针对性路线）</h3><p>不用像前端/后端那样刷海量算法，聚焦「Solidity 高频场景」即可，分 3 个层级：</p>
<h4 id="1-基础层（必刷，所有方向都需要）"><a href="#1-基础层（必刷，所有方向都需要）" class="headerlink" title="1. 基础层（必刷，所有方向都需要）"></a>1. 基础层（必刷，所有方向都需要）</h4><ul>
<li>核心考点：<strong>边界条件处理、整数运算、简单循环/条件</strong></li>
<li>推荐题（LeetCode 简单题）：<ul>
<li>整数相关：7. 整数反转、9. 回文数（训练 Solidity 整数溢出/下溢防护）；</li>
<li>数组相关：26. 删除有序数组中的重复项、88. 合并两个有序数组（训练链上数组操作）；</li>
<li>逻辑判断：13. 罗马数字转整数、20. 有效的括号（训练条件判断严谨性）。</li>
</ul>
</li>
<li>核心目的：养成「先考虑异常情况」的习惯（比如数组为空、数值为 0/极值）。</li>
</ul>
<h4 id="2-进阶层（DeFi-游戏-优化方向推荐）"><a href="#2-进阶层（DeFi-游戏-优化方向推荐）" class="headerlink" title="2. 进阶层（DeFi/游戏/优化方向推荐）"></a>2. 进阶层（DeFi/游戏/优化方向推荐）</h4><ul>
<li>核心考点：<strong>数学计算、时间/空间复杂度优化、哈希/加密基础</strong></li>
<li>推荐题（LeetCode 中等题 + 链上场景题）：<ul>
<li>数学计算：69. x 的平方根、50. Pow(x, n)（对应 DeFi 利率/手续费计算）；</li>
<li>哈希/映射：1. 两数之和（训练 Solidity Mapping 替代数组查找）；</li>
<li>链上场景题：<ul>
<li>「如何高效统计一个合约的所有交互地址」（优化遍历逻辑）；</li>
<li>「如何实现链上随机数且避免被操纵」（结合算法+密码学）。</li>
</ul>
</li>
</ul>
</li>
<li>核心目的：理解「Gas 优化 = 算法优化」，用更高效的逻辑减少链上执行成本。</li>
</ul>
<h4 id="3-高阶层（ZK-Layer2-核心协议方向）"><a href="#3-高阶层（ZK-Layer2-核心协议方向）" class="headerlink" title="3. 高阶层（ZK/Layer2/核心协议方向）"></a>3. 高阶层（ZK/Layer2/核心协议方向）</h4><ul>
<li>核心考点：<strong>密码学算法、数据结构（树/图）、高效排序/查找</strong></li>
<li>推荐内容：<ul>
<li>算法：快速排序、二分查找、Merkle 树构建/验证、布隆过滤器；</li>
<li>数学：有限域运算、椭圆曲线加密（ECC）基础、零知识证明（ZK-SNARKs）核心逻辑；</li>
<li>参考题：LeetCode 树类题（104. 二叉树的最大深度）、图类题（200. 岛屿数量）。</li>
</ul>
</li>
</ul>
<h3 id="四、如果不刷算法题，该补什么？"><a href="#四、如果不刷算法题，该补什么？" class="headerlink" title="四、如果不刷算法题，该补什么？"></a>四、如果不刷算法题，该补什么？</h3><p>如果你的目标只是「普通 DApp 开发」，可以不刷算法题，但必须补以下核心能力：</p>
<ol>
<li>Solidity 语法细节（如 storage/memory 区别、函数可见性、事件/修饰器）；</li>
<li>链上安全规则（如重入攻击、权限控制、整数溢出/下溢）；</li>
<li>主流合约范式（如 ERC20/ERC721/ERC1155、代理合约、多签钱包）；</li>
<li>工具使用（Hardhat/Truffle、Remix、Etherscan 调试、Tenderly 分析）。</li>
</ol>
<h3 id="最终结论"><a href="#最终结论" class="headerlink" title="最终结论"></a>最终结论</h3><ol>
<li>「纯应用层 DApp 开发」：不用专门刷算法题，掌握基础逻辑即可；</li>
<li>「DeFi/审计/优化/核心协议开发」：必须刷算法题（至少基础+进阶），算法是核心竞争力；</li>
<li>「想进头部 Web3 团队」：算法题是面试门槛，越早刷越有利。</li>
</ol>
<p>简单说：算法题不是 Solidity 入门的「拦路虎」，但却是进阶的「垫脚石」——哪怕每天只刷 1 道简单题，也能显著提升你写合约的严谨性，减少链上漏洞。</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Web3/">Web3</a>
                    
                  </div>
                
              </div>
              
                
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/12/15/4907ad2c7bdf/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">university.alchemy7</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/12/14/9fb0f10d8507/">
                        <span class="hidden-mobile">求职信</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


            

                
                  <a id="scroll-top-button" href="#" role="button">
                    <i class="iconfont icon-arrowup" aria-hidden="true"></i>
                  </a>
                  

                    

                          
      </main>

      <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://whale3070.github.io/" target="_blank" rel="nofollow noopener"><span>Whale3070</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.staticfile.org/tocbot/4.12.0/tocbot.min.js" ></script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


<link href="/pagefind/pagefind-ui.css" rel="stylesheet">
  <script src="/pagefind/pagefind-ui.js"></script>
  <style>
    /* 搜索框配色适配 */
    #search { margin-top: 2rem; }
    [data-user-color-scheme='dark'] .pagefind-ui {
      --pagefind-ui-primary: #eeeeee;
      --pagefind-ui-text: #eeeeee;
      --pagefind-ui-background: #151515;
      --pagefind-ui-border: #333;
    }
  </style>
    </body>

  </html>