

  <!DOCTYPE html>
  <html lang="zh-CN" data-default-color-scheme=&#34;dark&#34; >
  <style>
    .text1
    {
    text-shadow: 0px 0px 2px #f2f3f2;
    }
    </style>

  <script>
    // å¼ºåˆ¶å†…ç½‘ IP è¯†åˆ«ä¸ºå®‰å…¨ä¸Šä¸‹æ–‡
    if (window.location.hostname !== 'localhost' && window.location.protocol === 'http:') {
        // å°è¯•æ‰‹åŠ¨æ˜ å°„ crypto å±æ€§
        if (!window.crypto.subtle && window.crypto.webkitSubtle) {
            window.crypto.subtle = window.crypto.webkitSubtle;
        }
    }
    
    // ç»ˆæè¡¥ä¸ï¼šå¦‚æœè¿˜æ˜¯æ²¡æœ‰ subtleï¼Œåˆ™åˆ›å»ºä¸€ä¸ªå ä½ç¬¦é¿å…æŠ¥é”™
    // æç¤ºï¼šè¿™é€šå¸¸èƒ½è§£å†³åŠ è½½æŠ¥é”™ï¼Œä½†å¦‚æœæ’ä»¶å¼ºä¾èµ–åŸç”ŸåŠ å¯†ï¼Œå»ºè®®æ‰§è¡Œä¸‹é¢çš„â€œé™çº§â€é¢„åˆ¤
    if (!window.isSecureContext) {
        console.warn('å½“å‰ç¯å¢ƒéå®‰å…¨ä¸Šä¸‹æ–‡ï¼Œæ­£åœ¨å°è¯•å…¼å®¹å†…ç½‘åŠ å¯†è§£å¯†...');
    }
</script>


<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/null">
  <link rel="icon" type="image/png" href="/null">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  <title>remixç¼–è¯‘è¿è¡Œsolidity - whale3070&#39;s blog</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />
  



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"192.168.126.129","root":"/","version":"1.8.7","typing":{"enable":false,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":false,"onlypost":false},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 7.3.0"></head>


    <body>
      <header style="height: 70vh;">
        <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>InfoSec learning</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/search/">
                <i class="iconfont icon-search"></i>
                æœç´¢
              </a>
            </li>
          
        
        
        
          
        
      </ul>
    </div>
  </div>
</nav>

          <div class="banner" id="banner" false
            style="background: url('/img/default.png') no-repeat center center;
              background-size: cover;">
              <div class="full-bg-img">
                <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
                  <div class="page-header text-center fade-in-up">
                    <span class="h2 text1" id="subtitle" title="remixç¼–è¯‘è¿è¡Œsolidity">
                      
                        remixç¼–è¯‘è¿è¡Œsolidity
                      
                    </span>
        
                    
                      <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2025-11-10 08:58" pubdate>
        2025å¹´11æœˆ10æ—¥ æ—©ä¸Š
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      5.4k å­—
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      67
       åˆ†é’Ÿ
    </span>
  

  
  
</div>

                    
                  </div>
                    
                  </div>
                  
                </div>
              </div>
          </div>
      </header>

      <main>
        
          

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto" data-pagefind-body>
            <!-- SEO header -->
            <h1 style="display: none">remixç¼–è¯‘è¿è¡Œsolidity</h1>
            
            <div class="markdown-body">
              <p>ä¸Šä¸€ç¯‡ï¼š <a target="_blank" rel="noopener" href="https://whale3070.com/2025/11/09/280635f1a641/">Remix éƒ¨ç½² Solidity åˆçº¦çš„å®Œæ•´æ ‡å‡†æ“ä½œæ­¥éª¤</a></p>
<p>ä¸Šä¸€ç¯‡æ–‡ç« å†™äº†ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå…ˆ+1ï¼Œç„¶å-1ï¼Œå¹¶ä¸”åœ¨remixæˆåŠŸåœ°ç¼–è¯‘ã€éƒ¨ç½²äº†ã€‚</p>
<h1 id="Counterï¼ˆè®¡æ•°å™¨ï¼‰"><a href="#Counterï¼ˆè®¡æ•°å™¨ï¼‰" class="headerlink" title="Counterï¼ˆè®¡æ•°å™¨ï¼‰"></a>Counterï¼ˆè®¡æ•°å™¨ï¼‰</h1><p>åŠŸèƒ½ï¼š </p>
<ul>
<li>increment() </li>
<li>decrement() </li>
<li>reset() </li>
<li>get()</li>
</ul>
<p>è¦æ±‚ï¼š <em>ä½¿ç”¨ event</em><br>ç¼–è¯‘ã€éƒ¨ç½²ã€åœ¨ Remix ä¸­äº¤äº’æµ‹è¯•</p>
<h2 id="counter-sol"><a href="#counter-sol" class="headerlink" title="counter.sol"></a>counter.sol</h2><figure class="highlight csharp"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs csharp"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span><br>pragma solidity ^<span class="hljs-number">0.8</span><span class="hljs-number">.0</span>;<br><br>contract Counter &#123;<br>    <span class="hljs-built_in">uint</span> <span class="hljs-keyword">private</span> count; <span class="hljs-comment">// è®¡æ•°å™¨</span><br><br>    <span class="hljs-comment">// äº‹ä»¶å£°æ˜</span><br>    <span class="hljs-function"><span class="hljs-keyword">event</span> <span class="hljs-title">CounterChanged</span>(<span class="hljs-params">address indexed user, <span class="hljs-built_in">string</span> action, <span class="hljs-built_in">uint</span> newValue</span>)</span>;<br><br>    <span class="hljs-comment">// å¢åŠ è®¡æ•°</span><br>    <span class="hljs-function">function <span class="hljs-title">increment</span>() <span class="hljs-keyword">public</span></span> &#123;<br>        count += <span class="hljs-number">1</span>;<br>        <span class="hljs-function">emit <span class="hljs-title">CounterChanged</span>(<span class="hljs-params">msg.sender, <span class="hljs-string">&quot;increment&quot;</span>, count</span>)</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// å‡å°‘è®¡æ•°</span><br>    <span class="hljs-function">function <span class="hljs-title">decrement</span>() <span class="hljs-keyword">public</span></span> &#123;<br>        require(count &gt; <span class="hljs-number">0</span>, <span class="hljs-string">&quot;Counter cannot be negative&quot;</span>);<br>        count -= <span class="hljs-number">1</span>;<br>        <span class="hljs-function">emit <span class="hljs-title">CounterChanged</span>(<span class="hljs-params">msg.sender, <span class="hljs-string">&quot;decrement&quot;</span>, count</span>)</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// é‡ç½®è®¡æ•°</span><br>    <span class="hljs-function">function <span class="hljs-title">reset</span>() <span class="hljs-keyword">public</span></span> &#123;<br>        count = <span class="hljs-number">0</span>;<br>        <span class="hljs-function">emit <span class="hljs-title">CounterChanged</span>(<span class="hljs-params">msg.sender, <span class="hljs-string">&quot;reset&quot;</span>, count</span>)</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// è·å–å½“å‰è®¡æ•°</span><br>    <span class="hljs-function">function <span class="hljs-title">get</span>() <span class="hljs-keyword">public</span> view <span class="hljs-title">returns</span> (<span class="hljs-params"><span class="hljs-built_in">uint</span></span>)</span> &#123;<br>        <span class="hljs-keyword">return</span> count;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h2 id="remixéƒ¨ç½²åçš„æ—¥å¿—"><a href="#remixéƒ¨ç½²åçš„æ—¥å¿—" class="headerlink" title="remixéƒ¨ç½²åçš„æ—¥å¿—"></a>remixéƒ¨ç½²åçš„æ—¥å¿—</h2><p>åœ¨remixé‡Œè¾“å‡ºäº†<br><img src="/2025/11/10/5540/1.png"></p>
<p>å¾ˆå¥½ï¼Œè¿™è¯´æ˜ä½ çš„ <strong>Counter åˆçº¦å·²ç»æˆåŠŸéƒ¨ç½²</strong> åœ¨ Remix çš„è™šæ‹Ÿæœºç¯å¢ƒï¼ˆVMï¼‰ä¸­äº†ã€‚æˆ‘ä»¬å¯ä»¥æ¥è§£è¯»ä¸€ä¸‹ä½ çœ‹åˆ°çš„è¾“å‡ºä¿¡æ¯ï¼š</p>
<h3 id="1ï¸âƒ£-vm-from-0x5B3-eddC4"><a href="#1ï¸âƒ£-vm-from-0x5B3-eddC4" class="headerlink" title="1ï¸âƒ£ [vm] from: 0x5B3...eddC4"></a>1ï¸âƒ£ <code>[vm] from: 0x5B3...eddC4</code></h3><ul>
<li>è¿™æ˜¯ <strong>éƒ¨ç½²è€…åœ°å€</strong>ï¼Œä¹Ÿå°±æ˜¯ä½ åœ¨ Remix å³ä¸Šè§’é€‰æ‹©çš„è´¦æˆ·åœ°å€ã€‚</li>
<li>è¯´æ˜è¿™ä¸ªåœ°å€å‘èµ·äº†åˆçº¦éƒ¨ç½²äº¤æ˜“ã€‚</li>
</ul>
<h3 id="2ï¸âƒ£-to-Counter-constructor"><a href="#2ï¸âƒ£-to-Counter-constructor" class="headerlink" title="2ï¸âƒ£ to: Counter.(constructor)"></a>2ï¸âƒ£ <code>to: Counter.(constructor)</code></h3><ul>
<li>è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª <strong>æ„é€ å‡½æ•°äº¤æ˜“</strong>ï¼Œå³éƒ¨ç½²åˆçº¦æ—¶è‡ªåŠ¨æ‰§è¡Œçš„ <code>constructor</code>ã€‚</li>
<li>å› ä¸º Counter åˆçº¦æ²¡æœ‰ç‰¹åˆ«å†™ constructorï¼Œæ‰€ä»¥æ˜¯é»˜è®¤çš„ç©ºæ„é€ å‡½æ•°ã€‚</li>
</ul>
<h3 id="3ï¸âƒ£-value-0-wei"><a href="#3ï¸âƒ£-value-0-wei" class="headerlink" title="3ï¸âƒ£ value: 0 wei"></a>3ï¸âƒ£ <code>value: 0 wei</code></h3><ul>
<li>è¡¨ç¤ºéƒ¨ç½²äº¤æ˜“ä¸­ <strong>æ²¡æœ‰å‘é€ ETH</strong>ï¼Œå³éƒ¨ç½²åˆçº¦ä¸å¸¦ä»¥å¤ªå¸ã€‚</li>
<li>è¿™æ˜¯æ­£å¸¸çš„ï¼ŒCounter åˆçº¦ä¸éœ€è¦æ¥æ”¶ ETHã€‚</li>
</ul>
<h3 id="4ï¸âƒ£-data-0x608-e0033"><a href="#4ï¸âƒ£-data-0x608-e0033" class="headerlink" title="4ï¸âƒ£ data: 0x608...e0033"></a>4ï¸âƒ£ <code>data: 0x608...e0033</code></h3><ul>
<li>è¿™æ˜¯éƒ¨ç½²äº¤æ˜“çš„ <strong>å­—èŠ‚ç ï¼ˆBytecodeï¼‰</strong>ï¼ŒSolidity ç¼–è¯‘å™¨ç”Ÿæˆçš„ EVM å¯æ‰§è¡Œä»£ç ã€‚</li>
<li>ç”¨äºåœ¨åŒºå—é“¾ä¸Šåˆ›å»ºåˆçº¦å®ä¾‹ã€‚</li>
</ul>
<h3 id="5ï¸âƒ£-logs-0"><a href="#5ï¸âƒ£-logs-0" class="headerlink" title="5ï¸âƒ£ logs: 0"></a>5ï¸âƒ£ <code>logs: 0</code></h3><ul>
<li>è¡¨ç¤ºéƒ¨ç½²åˆçº¦çš„äº¤æ˜“ <strong>æ²¡æœ‰è§¦å‘ä»»ä½•äº‹ä»¶</strong></li>
<li>æ­£å¸¸ï¼Œå› ä¸ºæ„é€ å‡½æ•°é‡Œæ²¡æœ‰ <code>emit</code> äº‹ä»¶ã€‚</li>
</ul>
<h3 id="6ï¸âƒ£-hash-0x39b-a9e86"><a href="#6ï¸âƒ£-hash-0x39b-a9e86" class="headerlink" title="6ï¸âƒ£ hash: 0x39b...a9e86"></a>6ï¸âƒ£ <code>hash: 0x39b...a9e86</code></h3><ul>
<li>è¿™æ˜¯äº¤æ˜“çš„ <strong>å“ˆå¸Œå€¼</strong>ï¼ˆTx Hashï¼‰</li>
<li>å¯ä»¥ç”¨å®ƒåœ¨åŒºå—æµè§ˆå™¨æˆ–è€… Remix çš„ <strong>Transactions</strong> é¢æ¿æŸ¥åˆ°éƒ¨ç½²è®°å½•ã€‚</li>
</ul>
<h3 id="7ï¸âƒ£-ç»¿è‰²å¯¹å·-âœ…"><a href="#7ï¸âƒ£-ç»¿è‰²å¯¹å·-âœ…" class="headerlink" title="7ï¸âƒ£ ç»¿è‰²å¯¹å· âœ…"></a>7ï¸âƒ£ ç»¿è‰²å¯¹å· âœ…</h3><ul>
<li>è¡¨ç¤º <strong>éƒ¨ç½²æˆåŠŸ</strong>ï¼Œåˆçº¦å·²ç»åœ¨è™šæ‹Ÿæœºï¼ˆVMï¼‰ä¸Šå¯ç”¨ã€‚</li>
<li>ä½ å¯ä»¥åœ¨ Remix å·¦ä¾§ <strong>Deployed Contracts</strong> é¢æ¿çœ‹åˆ° Counter åˆçº¦å®ä¾‹ï¼Œå¼€å§‹è°ƒç”¨å‡½æ•°æµ‹è¯• <code>increment</code>ã€<code>decrement</code> ç­‰ã€‚</li>
</ul>
<p>ğŸ’¡ <strong>ä¸‹ä¸€æ­¥å»ºè®®</strong>ï¼š</p>
<ol>
<li>ç‚¹å‡» <code>increment()</code> â†’ å†çœ‹ <code>get()</code> è¿”å›å€¼</li>
<li>ç‚¹å‡» <code>decrement()</code> â†’ <code>get()</code> è¿”å›å€¼å‡ 1</li>
<li>ç‚¹å‡» <code>reset()</code> â†’ <code>get()</code> è¿”å› 0</li>
<li>åœ¨ <strong>Logs&#x2F;Console</strong> é¢æ¿æŸ¥çœ‹äº‹ä»¶è¾“å‡ºï¼ˆæ¯”å¦‚ <code>CounterChanged</code>ï¼‰</li>
</ol>
<h2 id="åœ¨-Remix-ä¸­äº¤äº’æµ‹è¯•"><a href="#åœ¨-Remix-ä¸­äº¤äº’æµ‹è¯•" class="headerlink" title="åœ¨ Remix ä¸­äº¤äº’æµ‹è¯•"></a>åœ¨ Remix ä¸­äº¤äº’æµ‹è¯•</h2><p><img src="/2025/11/10/5540/2.png"></p>
<h2 id="è¿™äº›æ­¥éª¤æ˜¯å¦è¦äº¤gasè´¹"><a href="#è¿™äº›æ­¥éª¤æ˜¯å¦è¦äº¤gasè´¹" class="headerlink" title="è¿™äº›æ­¥éª¤æ˜¯å¦è¦äº¤gasè´¹"></a>è¿™äº›æ­¥éª¤æ˜¯å¦è¦äº¤gasè´¹</h2><p>æ˜¯çš„ï¼Œ<strong>åœ¨ Remix ä¸­è°ƒç”¨æŸäº›å‡½æ•°ç¡®å®ä¼šæ¶ˆè€— gas</strong>ï¼Œä½†å…·ä½“æƒ…å†µè¦çœ‹å‡½æ•°ç±»å‹ï¼š</p>
<h3 id="1ï¸âƒ£-éœ€è¦æ¶ˆè€—-gas-çš„æƒ…å†µ"><a href="#1ï¸âƒ£-éœ€è¦æ¶ˆè€—-gas-çš„æƒ…å†µ" class="headerlink" title="1ï¸âƒ£ éœ€è¦æ¶ˆè€— gas çš„æƒ…å†µ"></a><strong>1ï¸âƒ£ éœ€è¦æ¶ˆè€— gas çš„æƒ…å†µ</strong></h3><ul>
<li><p>æ‰€æœ‰ <strong>ä¿®æ”¹åŒºå—é“¾çŠ¶æ€çš„å‡½æ•°</strong> éƒ½éœ€è¦ gasï¼Œå› ä¸ºå®ƒä»¬ä¼šç”Ÿæˆäº¤æ˜“å¹¶å†™å…¥åŒºå—é“¾ã€‚</p>
</li>
<li><p>åœ¨ä½ çš„ Counter åˆçº¦ä¸­ï¼š</p>
<ul>
<li><code>increment()</code> âœ…</li>
<li><code>decrement()</code> âœ…</li>
<li><code>reset()</code> âœ…</li>
</ul>
</li>
<li><p>è¿™äº›å‡½æ•°éƒ½ä¼šä¿®æ”¹ <code>count</code> çš„å€¼ï¼Œå› æ­¤æ¯æ¬¡è°ƒç”¨éƒ½ä¼šæ¶ˆè€— gasï¼Œå¹¶åœ¨ Remix çš„ VM ä¸­ç”Ÿæˆä¸€ç¬”äº¤æ˜“ã€‚</p>
</li>
</ul>
<h3 id="2ï¸âƒ£-ä¸éœ€è¦æ¶ˆè€—-gas-çš„æƒ…å†µ"><a href="#2ï¸âƒ£-ä¸éœ€è¦æ¶ˆè€—-gas-çš„æƒ…å†µ" class="headerlink" title="2ï¸âƒ£ ä¸éœ€è¦æ¶ˆè€— gas çš„æƒ…å†µ"></a><strong>2ï¸âƒ£ ä¸éœ€è¦æ¶ˆè€— gas çš„æƒ…å†µ</strong></h3><ul>
<li><p><strong>åªè¯»å‡½æ•°</strong>ï¼ˆ<code>view</code> æˆ– <code>pure</code>ï¼‰ä¸ä¼šä¿®æ”¹åŒºå—é“¾çŠ¶æ€ï¼Œä¸ä¼šäº§ç”Ÿäº¤æ˜“ï¼Œä¹Ÿä¸æ¶ˆè€— gasã€‚</p>
</li>
<li><p>åœ¨ä½ çš„ Counter åˆçº¦ä¸­ï¼š</p>
<ul>
<li><code>get()</code> âœ…</li>
</ul>
</li>
<li><p>è°ƒç”¨ <code>get()</code> åªä¼šè¿”å›å½“å‰è®¡æ•°å€¼ï¼Œä¸ä¼šæ¶ˆè€— gasï¼Œä¹Ÿä¸ä¼šè§¦å‘äº¤æ˜“ã€‚</p>
</li>
</ul>
<h3 id="3ï¸âƒ£-è§£é‡Š-Remix-çš„è™šæ‹Ÿæœºï¼ˆVMï¼‰ç¯å¢ƒ"><a href="#3ï¸âƒ£-è§£é‡Š-Remix-çš„è™šæ‹Ÿæœºï¼ˆVMï¼‰ç¯å¢ƒ" class="headerlink" title="3ï¸âƒ£ è§£é‡Š Remix çš„è™šæ‹Ÿæœºï¼ˆVMï¼‰ç¯å¢ƒ"></a><strong>3ï¸âƒ£ è§£é‡Š Remix çš„è™šæ‹Ÿæœºï¼ˆVMï¼‰ç¯å¢ƒ</strong></h3><ul>
<li>åœ¨ <strong>JavaScript VM</strong> æˆ– <strong>Injected Web3</strong> æœ¬åœ°æµ‹è¯•ä¸­ï¼Œä½ è™½ç„¶ä»ç„¶â€œæ¶ˆè€— gasâ€ï¼Œä½†å®ƒåªæ˜¯æ¨¡æ‹Ÿæ¶ˆè€—ï¼Œä¸éœ€è¦çœŸå®æ”¯ä»˜ ETHã€‚</li>
<li>åœ¨ <strong>çœŸå®ä»¥å¤ªåŠä¸»ç½‘</strong> éƒ¨ç½²æ—¶ï¼Œä¿®æ”¹çŠ¶æ€çš„å‡½æ•°æ‰ä¼šæ¶ˆè€—çœŸå® ETH gasã€‚</li>
</ul>
<p>ğŸ’¡ <strong>æ€»ç»“è¡¨æ ¼</strong>ï¼š</p>
<p>| å‡½æ•°          | ä¿®æ”¹çŠ¶æ€ | æ˜¯å¦æ¶ˆè€— gas | å¤‡æ³¨          |<br>| increment() | æ˜¯    | æ˜¯        | count +1    |<br>| decrement() | æ˜¯    | æ˜¯        | count -1    |<br>| reset()     | æ˜¯    | æ˜¯        | count &#x3D; 0   |<br>| get()       | å¦    | å¦        | åªè¯»å– count å€¼ |</p>
<p>å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥å¸®ä½ ç”»ä¸€ä¸ª <strong>â€œå“ªäº›å‡½æ•°æ¶ˆè€— gasï¼Œå“ªäº›å‡½æ•°ä¸æ¶ˆè€— gas çš„ç¤ºæ„å›¾â€</strong>ï¼Œç›´è§‚æ˜¾ç¤º Counter åˆçº¦è°ƒç”¨æˆæœ¬ã€‚</p>
<p>ä½ å¸Œæœ›æˆ‘ç”»å—ï¼Ÿ</p>
<h1 id="Bankï¼ˆç®€å•å­˜å–æ¬¾ï¼‰"><a href="#Bankï¼ˆç®€å•å­˜å–æ¬¾ï¼‰" class="headerlink" title="Bankï¼ˆç®€å•å­˜å–æ¬¾ï¼‰"></a>Bankï¼ˆç®€å•å­˜å–æ¬¾ï¼‰</h1><p>åŠŸèƒ½ï¼š</p>
<ul>
<li>deposit() payable</li>
<li>withdraw(amount)</li>
<li>balanceOf(msg.sender)</li>
</ul>
<p>è¦æ±‚ï¼š</p>
<ul>
<li>mapping(address &#x3D;&gt; uint)</li>
<li>require æ ¡éªŒ</li>
<li>msg.value</li>
<li>é˜²æ­¢å–æ¬¾è¶…è¿‡ä½™é¢</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs csharp"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span><br>pragma solidity ^<span class="hljs-number">0.8</span><span class="hljs-number">.0</span>;<br><br>contract Bank &#123;<br>    <span class="hljs-comment">// å­˜å‚¨æ¯ä¸ªåœ°å€çš„ä½™é¢</span><br>    mapping(address =&gt; <span class="hljs-built_in">uint</span>) <span class="hljs-keyword">private</span> balances;<br><br>    <span class="hljs-comment">// å­˜æ¬¾äº‹ä»¶</span><br>    <span class="hljs-function"><span class="hljs-keyword">event</span> <span class="hljs-title">DepositMade</span>(<span class="hljs-params">address indexed account, <span class="hljs-built_in">uint</span> amount</span>)</span>;<br><br>    <span class="hljs-comment">// å–æ¬¾äº‹ä»¶</span><br>    <span class="hljs-function"><span class="hljs-keyword">event</span> <span class="hljs-title">WithdrawalMade</span>(<span class="hljs-params">address indexed account, <span class="hljs-built_in">uint</span> amount</span>)</span>;<br><br>    <span class="hljs-comment">// å­˜æ¬¾å‡½æ•°ï¼Œå¯æ¥æ”¶ ETH</span><br>    <span class="hljs-function">function <span class="hljs-title">deposit</span>() <span class="hljs-keyword">public</span> payable</span> &#123;<br>        require(msg.<span class="hljs-keyword">value</span> &gt; <span class="hljs-number">0</span>, <span class="hljs-string">&quot;Deposit must be greater than 0&quot;</span>);<br>        balances[msg.sender] += msg.<span class="hljs-keyword">value</span>;<br>        <span class="hljs-function">emit <span class="hljs-title">DepositMade</span>(<span class="hljs-params">msg.sender, msg.<span class="hljs-keyword">value</span></span>)</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// å–æ¬¾å‡½æ•°</span><br>    <span class="hljs-function">function <span class="hljs-title">withdraw</span>(<span class="hljs-params"><span class="hljs-built_in">uint</span> amount</span>) <span class="hljs-keyword">public</span></span> &#123;<br>        require(amount &gt; <span class="hljs-number">0</span>, <span class="hljs-string">&quot;Withdraw amount must be greater than 0&quot;</span>);<br>        require(balances[msg.sender] &gt;= amount, <span class="hljs-string">&quot;Insufficient balance&quot;</span>);<br><br>        balances[msg.sender] -= amount;<br><br>        <span class="hljs-comment">// å‘è°ƒç”¨è€…å‘é€ ETH</span><br>        payable(msg.sender).transfer(amount);<br><br>        <span class="hljs-function">emit <span class="hljs-title">WithdrawalMade</span>(<span class="hljs-params">msg.sender, amount</span>)</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// æŸ¥è¯¢ä½™é¢</span><br>    <span class="hljs-function">function <span class="hljs-title">balanceOf</span>(<span class="hljs-params">address account</span>) <span class="hljs-keyword">public</span> view <span class="hljs-title">returns</span> (<span class="hljs-params"><span class="hljs-built_in">uint</span></span>)</span> &#123;<br>        <span class="hljs-keyword">return</span> balances[account];<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<h2 id="å­˜æ¬¾"><a href="#å­˜æ¬¾" class="headerlink" title="å­˜æ¬¾"></a>å­˜æ¬¾</h2><p><img src="/2025/11/10/5540/3.png"></p>
<h2 id="å–æ¬¾"><a href="#å–æ¬¾" class="headerlink" title="å–æ¬¾"></a>å–æ¬¾</h2><p><img src="/2025/11/10/5540/4.png"></p>
<h3 id="æˆ‘è¾“å…¥1ï¼Œç„¶åç‚¹transactï¼Œç‚¹äº†å‡ ä¸‹ï¼Œç»“æœå­˜æ¬¾balanceå˜æˆäº†Balance-2-999999999999999997-ETHï¼Œä¸ºä»€ä¹ˆå­˜æ¬¾ä¸æ˜¯2æˆ–è€…1ï¼Ÿ"><a href="#æˆ‘è¾“å…¥1ï¼Œç„¶åç‚¹transactï¼Œç‚¹äº†å‡ ä¸‹ï¼Œç»“æœå­˜æ¬¾balanceå˜æˆäº†Balance-2-999999999999999997-ETHï¼Œä¸ºä»€ä¹ˆå­˜æ¬¾ä¸æ˜¯2æˆ–è€…1ï¼Ÿ" class="headerlink" title="æˆ‘è¾“å…¥1ï¼Œç„¶åç‚¹transactï¼Œç‚¹äº†å‡ ä¸‹ï¼Œç»“æœå­˜æ¬¾balanceå˜æˆäº†Balance: 2.999999999999999997 ETHï¼Œä¸ºä»€ä¹ˆå­˜æ¬¾ä¸æ˜¯2æˆ–è€…1ï¼Ÿ"></a>æˆ‘è¾“å…¥1ï¼Œç„¶åç‚¹transactï¼Œç‚¹äº†å‡ ä¸‹ï¼Œç»“æœå­˜æ¬¾balanceå˜æˆäº†Balance: 2.999999999999999997 ETHï¼Œä¸ºä»€ä¹ˆå­˜æ¬¾ä¸æ˜¯2æˆ–è€…1ï¼Ÿ</h3><p>ä½ è¾“å…¥çš„ 1ï¼Œåœ¨ Remix ä¸­é»˜è®¤è¢«è§£é‡Šæˆ 1 weiï¼Œè€Œä¸æ˜¯ 1 ETHã€‚</p>
<p>åœ¨ Solidity ä¸­ï¼Œæ‰€æœ‰çš„æ•´æ•°å­—é¢é‡ä¸é‡‘é¢å‚æ•° é»˜è®¤éƒ½æ˜¯ weiã€‚</p>
<p>å­˜æ¬¾ deposit() æ—¶ï¼Œä½ åœ¨ Value æ  è¾“å…¥çš„æ•°å­—æ˜¯ä»¥å¤ªï¼ˆä½ é€‰æ‹©äº† etherï¼‰</p>
<p>ä½† withdraw(amount) çš„è¾“å…¥æ¡† æ²¡æœ‰å•ä½é€‰æ‹©ï¼Œæ‰€ä»¥è¾“å…¥ 1 è¡¨ç¤º 1 weiï¼ˆéå¸¸å°ï¼‰</p>
<h3 id="weiå’Œethçš„å•ä½æ˜¯æ€æ ·çš„å…³ç³»"><a href="#weiå’Œethçš„å•ä½æ˜¯æ€æ ·çš„å…³ç³»" class="headerlink" title="weiå’Œethçš„å•ä½æ˜¯æ€æ ·çš„å…³ç³»"></a>weiå’Œethçš„å•ä½æ˜¯æ€æ ·çš„å…³ç³»</h3><p>1 ETH &#x3D; 1,000,000,000,000,000,000 weiï¼ˆ10^18 weiï¼‰</p>
<p>ä¹Ÿå°±æ˜¯ï¼š</p>
<p>1 ETH &#x3D; 10^18 wei</p>
<p>ETH çš„å®Œæ•´å•ä½è¡¨ï¼ˆæœ€å¸¸ç”¨ï¼‰<br>å•ä½åç§°	ä¸ wei çš„å…³ç³»	ä¸ ETH çš„å…³ç³»<br>wei	1 wei	10^-18 ETH<br>gwei	10^9 wei	10^-9 ETH<br>ether&#x2F;ETH	10^18 wei	1 ETH</p>
<p>âœ… ä¸ºä»€ä¹ˆ Solidity ä¸€å¾‹ä½¿ç”¨ weiï¼Ÿ</p>
<p>å› ä¸ºï¼š</p>
<p>æ•´æ•°ç²¾åº¦é«˜</p>
<p>å°æ•°å¯èƒ½å¯¼è‡´ä¸¥é‡çš„ç²¾åº¦é—®é¢˜</p>
<p>ä»¥å¤ªåŠçš„è®¾è®¡ç†å¿µå°±æ˜¯æ‰€æœ‰é‡‘é¢å¿…é¡»ç²¾ç¡®ï¼Œä¸å…è®¸æµ®ç‚¹æ•°</p>
<p>å› æ­¤ï¼š<br>æ‰€æœ‰é‡‘é¢éƒ½ç”¨ wei å­˜å‚¨ï¼Œåªæœ‰ç”¨æˆ·ç•Œé¢ä½¿ç”¨ ETH æ˜¾ç¤º</p>
<h3 id="1åé¢æœ‰18ä¸ª0ï¼Œæ€ä¹ˆè¯»ï¼Ÿä¸€äº¿ï¼Ÿ"><a href="#1åé¢æœ‰18ä¸ª0ï¼Œæ€ä¹ˆè¯»ï¼Ÿä¸€äº¿ï¼Ÿ" class="headerlink" title="1åé¢æœ‰18ä¸ª0ï¼Œæ€ä¹ˆè¯»ï¼Ÿä¸€äº¿ï¼Ÿ"></a>1åé¢æœ‰18ä¸ª0ï¼Œæ€ä¹ˆè¯»ï¼Ÿä¸€äº¿ï¼Ÿ</h3><p>â€œ1 åé¢æœ‰ 18 ä¸ª 0â€ çš„æ­£ç¡®è¯»æ³•ä¸æ˜¯â€œä¸€äº¿â€ã€‚<br>ä¸€äº¿æ˜¯ <strong>1 åé¢ 8 ä¸ª 0</strong>ã€‚</p>
<p>ä½ è¯´çš„è¿™ä¸ªæ•°å­—æ˜¯ï¼š</p>
<figure class="highlight apache"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-attribute">1</span>,<span class="hljs-number">000</span>,<span class="hljs-number">000</span>,<span class="hljs-number">000</span>,<span class="hljs-number">000</span>,<span class="hljs-number">000</span>,<span class="hljs-number">000</span><br></code></pre></div></td></tr></table></figure>

<p>å®ƒçš„ä¸­æ–‡æ­£ç¡®è¯»æ³•æ˜¯<br>âœ… <strong>ä¸€ç™¾äº¬ï¼ˆyÄ« bÇi jÄ«ngï¼‰</strong></p>
<p>å› ä¸ºï¼š</p>
<p>| æ•°å­—çº§åˆ« | 0 çš„æ•°é‡ | å•ä½ |<br>| ä¸‡    | 4     | ä¸‡  |<br>| äº¿    | 8     | äº¿  |<br>| å…†    | 12    | å…†  |<br>| äº¬    | 16    | äº¬  |<br>| å“    | 20    | å“  |</p>
<p>ä½ çš„æ˜¯ <strong>10^18</strong>ï¼Œå±äºï¼š</p>
<figure class="highlight apache"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-attribute">10</span>^<span class="hljs-number">16</span> = ä¸€äº¬<br><span class="hljs-attribute">10</span>^<span class="hljs-number">17</span> = åäº¬<br><span class="hljs-attribute">10</span>^<span class="hljs-number">18</span> = ä¸€ç™¾äº¬<br></code></pre></div></td></tr></table></figure>

<p>ä¹Ÿå°±æ˜¯ï¼š<br>âœ… <strong>10^18 &#x3D; ä¸€ç™¾äº¬ï¼ˆ1 ç™¾äº¬ï¼‰</strong></p>
<p>âœ… å…³äº ETH ä¸­çš„ 1e18</p>
<p>åœ¨ Solidity ä¸­ï¼š</p>
<figure class="highlight basic"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs basic"><span class="hljs-symbol">1 </span>ETH = <span class="hljs-number">10</span>^<span class="hljs-number">18</span> wei<br></code></pre></div></td></tr></table></figure>

<p>æ‰€ä»¥ï¼š<br><strong>1 ETH çš„ wei æ•°é‡ä¸º â€œä¸€ç™¾äº¬ weiâ€</strong>ã€‚</p>
<p>1 wei &#x3D; ä¸€ç™¾äº¬åˆ†ä¹‹ä¸€ eth</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æˆ‘å·²ç»çŸ¥é“äº†pragmaå¯ä»¥æŒ‡å®šsolidityç¼–è¯‘å™¨çš„ç‰ˆæœ¬ï¼Œ contractå¯ä»¥å®šä¹‰åˆçº¦çš„åè¯ï¼Œç„¶åéœ€è¦ç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥ï¼Œé‡Œé¢å¯ä»¥ç”¨functionå…³é”®å­—å®šä¹‰å‡½æ•°å<br>emitæ˜¯è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œå¯ä»¥æŠŠå†…å®¹æ›´æ–°åˆ°ä»¥å¤ªåŠç½‘ç»œä¸Šï¼Œå¹¶ä¸”éœ€è¦æ¶ˆè€—gasè´¹</p>
<h2 id="1-publicæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ"><a href="#1-publicæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ" class="headerlink" title="1.publicæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ"></a>1.publicæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</h2><p>function withdraw(uint amount) public {</p>
<p><code>public</code> æ˜¯ Solidity ä¸­ <strong>å‡½æ•°å’Œå˜é‡çš„å¯è§æ€§ï¼ˆvisibilityï¼‰ä¿®é¥°ç¬¦</strong>ä¹‹ä¸€ï¼Œç”¨æ¥æ§åˆ¶å¤–éƒ¨æ˜¯å¦å¯ä»¥è°ƒç”¨è¯¥å‡½æ•°ã€‚</p>
<p>åœ¨ä½ çš„ä¾‹å­é‡Œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">function withdraw(uint amount) public &#123;<br></code></pre></div></td></tr></table></figure>

<p>è¡¨ç¤º <strong>withdraw() è¿™ä¸ªå‡½æ•°å¯¹æ‰€æœ‰äººå¼€æ”¾ï¼Œä»»ä½•è´¦æˆ·éƒ½å¯ä»¥è°ƒç”¨</strong>ã€‚</p>
<h3 id="âœ…-Solidity-çš„å¯è§æ€§ä¿®é¥°ç¬¦ï¼ˆVisibility-Specifiersï¼‰"><a href="#âœ…-Solidity-çš„å¯è§æ€§ä¿®é¥°ç¬¦ï¼ˆVisibility-Specifiersï¼‰" class="headerlink" title="âœ… Solidity çš„å¯è§æ€§ä¿®é¥°ç¬¦ï¼ˆVisibility Specifiersï¼‰"></a>âœ… Solidity çš„å¯è§æ€§ä¿®é¥°ç¬¦ï¼ˆVisibility Specifiersï¼‰</h3><p>Solidity æœ‰ 4 ç§å¯è§æ€§ï¼š</p>
<p>| ä¿®é¥°ç¬¦          | å¤–éƒ¨èƒ½å¦è°ƒç”¨ | åˆçº¦å†…éƒ¨èƒ½å¦è°ƒç”¨ | å­åˆçº¦èƒ½å¦è°ƒç”¨      |<br>| <strong>public</strong>   | âœ… å¯ä»¥   | âœ… å¯ä»¥     | âœ… å¯ä»¥         |<br>| <strong>external</strong> | âœ… åªèƒ½å¤–éƒ¨ | âŒ ä¸èƒ½     | âœ… å¯ä»¥ï¼ˆå¤–éƒ¨è°ƒç”¨æ–¹å¼ï¼‰ |<br>| <strong>internal</strong> | âŒ ä¸èƒ½   | âœ… å¯ä»¥     | âœ… å¯ä»¥         |<br>| <strong>private</strong>  | âŒ ä¸èƒ½   | âœ… å¯ä»¥     | âŒ ä¸å¯ä»¥        |</p>
<h3 id="âœ…-public-çš„å«ä¹‰ï¼ˆå‡½æ•°ï¼‰"><a href="#âœ…-public-çš„å«ä¹‰ï¼ˆå‡½æ•°ï¼‰" class="headerlink" title="âœ… public çš„å«ä¹‰ï¼ˆå‡½æ•°ï¼‰"></a>âœ… public çš„å«ä¹‰ï¼ˆå‡½æ•°ï¼‰</h3><p>å½“ä¸€ä¸ªå‡½æ•°è¢«æ ‡è®°ä¸º <code>public</code> æ—¶ï¼š</p>
<ol>
<li><p><strong>ä»»ä½•äººéƒ½å¯ä»¥è°ƒç”¨</strong></p>
<ul>
<li>ç”¨æˆ·</li>
<li>åˆçº¦</li>
<li>ç”šè‡³æœºå™¨äººè„šæœ¬</li>
<li>åŒºå—é“¾å¤–éƒ¨çš„äº¤æ˜“</li>
</ul>
</li>
<li><p><strong>å†…éƒ¨ï¼ˆåˆçº¦å†…éƒ¨ï¼‰ä¹Ÿå¯ä»¥è°ƒç”¨</strong><br>ä¾‹å¦‚ï¼š</p>
<ul>
<li>Withdraw è°ƒç”¨å†…éƒ¨é€»è¾‘</li>
<li>å…¶ä»–å‡½æ•°å¯ä»¥å¤ç”¨è¿™ä¸ªå‡½æ•°</li>
</ul>
</li>
<li><p><strong>å¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®šå¯è§æ€§ï¼ŒSolidity ä¼šæŠ¥è­¦å‘Š</strong><br>ä» 0.5.0 å¼€å§‹ï¼Œå¿…é¡»æ˜ç¡®æŒ‡å®šå¯è§æ€§ã€‚</p>
</li>
</ol>
<h3 id="âœ…-public-çš„å«ä¹‰ï¼ˆå˜é‡ï¼‰"><a href="#âœ…-public-çš„å«ä¹‰ï¼ˆå˜é‡ï¼‰" class="headerlink" title="âœ… public çš„å«ä¹‰ï¼ˆå˜é‡ï¼‰"></a>âœ… public çš„å«ä¹‰ï¼ˆå˜é‡ï¼‰</h3><p>å¦‚æœä½ å£°æ˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">uint public balance;<br></code></pre></div></td></tr></table></figure>

<p>Solidity ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª <strong>getter å‡½æ•°</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">function balance() public view returns (uint)<br></code></pre></div></td></tr></table></figure>

<p>ç›¸å½“äºè‡ªåŠ¨å†™äº†ä¸€ä¸ª <code>get</code> å‡½æ•°ã€‚</p>
<h3 id="âœ…-withdraw-uint-amount-ä¸ºä»€ä¹ˆè¦-publicï¼Ÿ"><a href="#âœ…-withdraw-uint-amount-ä¸ºä»€ä¹ˆè¦-publicï¼Ÿ" class="headerlink" title="âœ… withdraw(uint amount) ä¸ºä»€ä¹ˆè¦ publicï¼Ÿ"></a>âœ… withdraw(uint amount) ä¸ºä»€ä¹ˆè¦ publicï¼Ÿ</h3><p>å› ä¸ºä½ çš„ Bank åˆçº¦ä¸­ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯ç»™ç”¨æˆ·è°ƒç”¨çš„ï¼š</p>
<ul>
<li>ç”¨æˆ·è‡ªå·±å­˜æ¬¾</li>
<li>ç”¨æˆ·è‡ªå·±å–æ¬¾</li>
<li>ä»»ä½•äººéƒ½å¯ä»¥è°ƒç”¨è‡ªå·±çš„ä½™é¢å–æ¬¾</li>
</ul>
<p>å› æ­¤å¿…é¡»ä½¿ç”¨ <code>public</code>ï¼Œå¦åˆ™ç”¨æˆ·æ— æ³•ä»å¤–éƒ¨è°ƒç”¨å‡½æ•°ã€‚</p>
<h3 id="âœ…-å°ç»“"><a href="#âœ…-å°ç»“" class="headerlink" title="âœ… å°ç»“"></a>âœ… å°ç»“</h3><p><code>public</code> è¡¨ç¤ºï¼š</p>
<ul>
<li><strong>å¯¹æ‰€æœ‰å¤–éƒ¨ç”¨æˆ·å¼€æ”¾</strong></li>
<li><strong>å¯¹æ‰€æœ‰å¤–éƒ¨åˆçº¦å¼€æ”¾</strong></li>
<li><strong>åˆçº¦å†…éƒ¨ä¹Ÿå¯ä»¥è°ƒç”¨</strong></li>
<li><strong>å±äºæœ€å¼€æ”¾çš„è®¿é—®çº§åˆ«</strong></li>
</ul>
<p>å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥å¸®ä½ æŠŠï¼š</p>
<ul>
<li>public</li>
<li>external</li>
<li>internal</li>
<li>private</li>
</ul>
<p>åšæˆä¸€ä¸ªå¯è§†åŒ–<strong>è¡¨æ ¼ + ç®€å›¾</strong>ï¼Œè®©ä½ å½»åº•æŒæ¡å¯è§æ€§æœºåˆ¶ã€‚</p>
<h2 id="2-Solidity-çš„-require"><a href="#2-Solidity-çš„-require" class="headerlink" title="2.Solidity çš„ require"></a>2.Solidity çš„ <code>require</code></h2><p>ä¸æ˜¯çš„ï¼Œ<strong>Solidity çš„ <code>require</code> å’Œ Python çš„ <code>input()</code> å®Œå…¨ä¸æ˜¯ä¸€å›äº‹</strong>ï¼Œä¸¤è€…åŠŸèƒ½å®Œå…¨ä¸åŒï¼Œç”šè‡³å±äºä¸åŒç±»åˆ«çš„è¯­å¥ã€‚</p>
<p>æˆ‘ç”¨ä¸“ä¸šæ–¹å¼å¸®ä½ åŒºåˆ†æ¸…æ¥šï¼š</p>
<p>âœ… <code>require</code> çš„çœŸå®ä½œç”¨ï¼ˆSolidityï¼‰</p>
<p><code>require</code> æ˜¯ <strong>è¿è¡Œæ—¶æ¡ä»¶æ£€æŸ¥ï¼ˆruntime assertionï¼‰</strong>ã€‚</p>
<p>åŠŸèƒ½ï¼š</p>
<ol>
<li><p><strong>åˆ¤æ–­ä¸€ä¸ªæ¡ä»¶æ˜¯å¦æˆç«‹</strong></p>
</li>
<li><p>å¦‚æœä¸æˆç«‹ï¼Œ<strong>ç«‹å³ revertï¼ˆå›é€€äº¤æ˜“ï¼‰</strong></p>
</li>
<li><p>å›é€€åçš„æ•ˆæœï¼š</p>
<ul>
<li>æœ¬æ¬¡äº¤æ˜“ä¸å†™å…¥åŒºå—é“¾</li>
<li>çŠ¶æ€ä¸æ”¹å˜ï¼ˆæ‰€æœ‰ä¿®æ”¹éƒ½è¢«æ’¤é”€ï¼‰</li>
<li>è¿”å›æç¤ºä¿¡æ¯</li>
</ul>
</li>
</ol>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">require(amount &gt; 0, &quot;Withdraw amount must be greater than 0&quot;);<br></code></pre></div></td></tr></table></figure>

<p>æ„æ€æ˜¯ï¼š</p>
<ul>
<li>å¦‚æœ <code>amount &lt;= 0</code>ï¼Œ<br><strong>æ•´ä¸ª withdraw() è°ƒç”¨å¤±è´¥</strong>ï¼Œ<br>æ‰€æœ‰æ“ä½œå›æ»šï¼ˆbalances ä¸ä¼šå‡å°‘ï¼ŒETH ä¸ä¼šå‘é€ï¼‰ã€‚</li>
</ul>
<p>å®ƒæ˜¯ä¸€ç§ <strong>é˜²å¾¡å¼ç¼–ç¨‹ï¼ˆdefensive programmingï¼‰</strong> æœºåˆ¶ï¼Œç”¨æ¥ä¿æŠ¤åˆçº¦ä¸è¢«é”™è¯¯è°ƒç”¨ã€‚</p>
<p>âœ… Python çš„ <code>input()</code> åšä»€ä¹ˆï¼Ÿ</p>
<p>Python çš„ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥é‡‘é¢ï¼š&quot;</span>)<br></code></pre></div></td></tr></table></figure>

<p>æ˜¯ <strong>ä»ç”¨æˆ·å¤„è¯»å–è¾“å…¥çš„æ–‡æœ¬</strong>ï¼Œç­‰å¾…ç”¨æˆ·ä»é”®ç›˜è¾“å…¥ã€‚</p>
<p>åŠŸèƒ½ï¼š</p>
<ul>
<li>ç”¨äºäº¤äº’å¼è¾“å…¥</li>
<li>æ¥æ”¶å­—ç¬¦ä¸²</li>
<li>ä¸ä¼šæ‰§è¡Œä»»ä½•éªŒè¯ï¼Œä¹Ÿä¸ä¼šç»ˆæ­¢ç¨‹åº</li>
</ul>
<p>âœ… ä¸¤è€…æ ¹æœ¬ä¸æ˜¯åŒä¸€ç§ç”¨é€”</p>
<p>| å¯¹æ¯”ç‚¹      | Solidity <code>require</code> | Python <code>input()</code> |<br>| ç±»åˆ«       | æ¡ä»¶éªŒè¯è¯­å¥ï¼ˆassertï¼‰     | è¾“å…¥å‡½æ•°             |<br>| ä½œç”¨       | æ£€æŸ¥æ¡ä»¶ï¼Œä¸æ»¡è¶³å°±å›é€€äº¤æ˜“      | æ¥æ”¶ç”¨æˆ·çš„é”®ç›˜è¾“å…¥        |<br>| ç”¨äºä»€ä¹ˆåœºæ™¯   | å®‰å…¨ä¿éšœã€è¾“å…¥éªŒè¯ã€é˜²æ­¢é”™è¯¯     | å’Œç”¨æˆ·äº¤äº’æ”¶é›†å­—ç¬¦ä¸²       |<br>| ä¼šä¸ä¼šæŠ›é”™    | âœ… æ¡ä»¶å¤±è´¥ç«‹åˆ» revert    | âŒ ä¸ä¼šï¼Œå®ƒåªæ˜¯ç­‰å¾…è¾“å…¥     |<br>| æ˜¯å¦å½±å“ç¨‹åºçŠ¶æ€ | âœ… å›é€€æ‰€æœ‰çŠ¶æ€ä¿®æ”¹         | âŒ ä¸å½±å“ï¼Œç¨‹åºç»§ç»­è¿è¡Œ     |</p>
<p>âœ… <code>require</code> çš„æ­£ç¡®ç±»æ¯”</p>
<p><code>require</code> æ›´åƒ Python ä¸­çš„ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">assert</span> amount &gt; <span class="hljs-number">0</span>, <span class="hljs-string">&quot;Withdraw amount must be greater than 0&quot;</span><br></code></pre></div></td></tr></table></figure>

<p>æˆ–è€…æ›´æ¥è¿‘ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">if</span> amount &lt;= <span class="hljs-number">0</span>:<br>    <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">&quot;Withdraw amount must be greater than 0&quot;</span>)<br></code></pre></div></td></tr></table></figure>


<p>âœ… å°ç»“ï¼ˆéå¸¸é‡è¦ï¼‰</p>
<p><strong>Solidity çš„ <code>require</code> æ˜¯ï¼š</strong><br>å®‰å…¨æ£€æŸ¥ + è¾“å…¥éªŒè¯ + äº¤æ˜“ä¿æŠ¤æœºåˆ¶<br>ç”¨äºé˜²æ­¢é”™è¯¯è°ƒç”¨å’Œæ¶æ„è¡Œä¸ºï¼Œç¡®ä¿åˆçº¦å®‰å…¨ã€‚</p>
<p><strong>Python çš„ <code>input()</code> æ˜¯ï¼š</strong><br>æ”¶é›†ç”¨æˆ·è¾“å…¥çš„å‡½æ•°ã€‚</p>
<p>ä¸¤è€…ç”¨é€”å®Œå…¨ä¸åŒã€‚</p>
<p>å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç»§ç»­å¸®ä½ è§£é‡Šï¼š</p>
<ul>
<li><code>require</code> å’Œ <code>revert</code>ã€<code>assert</code> çš„åŒºåˆ«</li>
<li>åœ¨æ™ºèƒ½åˆçº¦ä¸­ä»€ä¹ˆæ—¶å€™ç”¨ requireï¼Œä»€ä¹ˆæ—¶å€™ç”¨ assert</li>
<li>å¦‚ä½•å†™â€œå®‰å…¨çš„ withdraw å‡½æ•°â€æœ€ä½³å®è·µ</li>
</ul>
<p>ä½ è¦ç»§ç»­æ·±å…¥å“ªä¸€å—ï¼Ÿ</p>
<h2 id="3-Solidity-çš„-privateä¿®é¥°ç¬¦"><a href="#3-Solidity-çš„-privateä¿®é¥°ç¬¦" class="headerlink" title="3.Solidity çš„ privateä¿®é¥°ç¬¦"></a>3.Solidity çš„ <code>private</code>ä¿®é¥°ç¬¦</h2><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é—®é¢˜ï¼Œè¯´æ˜ä½ å·²ç»å¼€å§‹å…³æ³¨ <strong>è®¿é—®æƒé™ã€å®‰å…¨æ€§ã€æ¥å£è®¾è®¡</strong>ï¼Œè¿™æ˜¯æ™ºèƒ½åˆçº¦å¼€å‘ä¸­å¿…é¡»æŒæ¡çš„æ ¸å¿ƒèƒ½åŠ›ã€‚</p>
<p>ä¸‹é¢æˆ‘ç”¨ä¸“ä¸šæ–¹å¼è§£é‡Šä¸ºä»€ä¹ˆï¼š</p>
<p>âœ… <strong>ä¸ºä»€ä¹ˆ Bank åˆçº¦ä¸­çš„ä½™é¢ mapping è¦ç”¨ privateï¼Ÿ</strong></p>
<p>ä½ çš„ä»£ç é‡Œæ˜¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">mapping(address =&gt; uint) private balances;<br></code></pre></div></td></tr></table></figure>

<p>ä¹‹æ‰€ä»¥å¿…é¡»ä½¿ç”¨ <code>private</code>ï¼Œä¸»è¦æœ‰ <strong>ä¸‰ä¸ªä¸“ä¸šåŸå› ï¼šå®‰å…¨æ€§ã€å°è£…æ€§ã€æ¥å£æ§åˆ¶</strong>ã€‚</p>
<p>âœ… <strong>åŸå›  1ï¼špublic ä¼šè‡ªåŠ¨ç”Ÿæˆ getterï¼Œä¼šæš´éœ²æ‰€æœ‰äººçš„ä½™é¢ï¼ˆéšç§æ³„æ¼ï¼‰</strong></p>
<p>å¦‚æœä½ å†™æˆï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">mapping(address =&gt; uint) public balances;<br></code></pre></div></td></tr></table></figure>

<p>Solidity ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª <strong>public getter å‡½æ•°</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">function balances(address account) external view returns (uint)<br></code></pre></div></td></tr></table></figure>

<p>è¿™ä¼šå¯¼è‡´ï¼š</p>
<ul>
<li>ä»»ä½•äººå¯ä»¥æŸ¥è¯¢ä»»æ„åœ°å€çš„ä½™é¢</li>
<li>è¿™å±äº <strong>éšç§æ³„éœ²</strong>ï¼Œç‰¹åˆ«æ˜¯é“¶è¡Œç±»åˆçº¦ï¼ˆBankï¼‰ä¸åº”å…è®¸å…¬å¼€æ‰€æœ‰ç”¨æˆ·ä½™é¢</li>
</ul>
<p>ä¾‹å¦‚ï¼Œåœ¨ DeFi æˆ–é’±åŒ…æ¨¡å‹ä¸­ï¼Œç”¨æˆ·ä½™é¢å¿…é¡»ä¿æŠ¤ã€‚</p>
<p><strong>private å¯ä»¥é˜»æ­¢è‡ªåŠ¨ getter çš„ç”Ÿæˆï¼Œä»è€Œé¿å…éšç§å¤–æ³„ã€‚</strong></p>
<p>âœ… <strong>åŸå›  2ï¼šè®©ç”¨æˆ·é€šè¿‡ balanceOf(address) è®¿é—®ï¼Œå¯ä»¥åŠ å…¥å®‰å…¨è§„åˆ™</strong></p>
<p>ä½ çš„åˆçº¦æä¾›äº†ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">function balanceOf(address account) public view returns (uint)<br></code></pre></div></td></tr></table></figure>

<p>ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰ï¼Ÿ</p>
<p><strong>å› ä¸ºä½ å¯ä»¥åœ¨è‡ªå®šä¹‰ getter ä¸­åŠ å…¥æ£€æŸ¥ã€å®‰å…¨é€»è¾‘æˆ–æœªæ¥æ‰©å±•ã€‚</strong></p>
<p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥åæ¥åŠ å…¥ï¼š</p>
<ul>
<li>é»‘åå•æ£€æŸ¥</li>
<li>è®¿é—®æƒé™æ§åˆ¶</li>
<li>è½¬è´¦å†»ç»“æ£€æŸ¥</li>
<li>é˜²æ­¢ç¬¬ä¸‰æ–¹è¯»å–ä½™é¢</li>
<li>åŸºäºè§’è‰²çš„è®¿é—®</li>
</ul>
<p>å¦‚æœä½¿ç”¨ public mappingï¼Œä½ å°±å¤±å»äº†æ§åˆ¶èƒ½åŠ›ã€‚</p>
<p>âœ… <strong>åŸå›  3ï¼šé¿å…ç›´æ¥ä¿®æ”¹ mappingï¼Œä¿è¯å°è£…æ€§</strong></p>
<p>å¦‚æœ mapping æ˜¯ publicï¼š</p>
<ul>
<li>å¤–éƒ¨æ²¡æœ‰åŠæ³•ä¿®æ”¹ mappingï¼ˆSolidity ä¸å…è®¸ public mapping å†™å…¥ï¼‰ï¼Œ</li>
<li>ä½†å†…éƒ¨ä»£ç å®¹æ˜“ä¸è§„èŒƒï¼Œé€»è¾‘å˜æ•£ã€‚</li>
</ul>
<p>ä½¿ç”¨ privateï¼š</p>
<ul>
<li>æ‰€æœ‰ä½™é¢ä¿®æ”¹å¿…é¡»é€šè¿‡ deposit &#x2F; withdraw</li>
<li>æ‰€æœ‰å…¥å£ç»Ÿä¸€ç”±å®‰å…¨æ£€æŸ¥ä¿æŠ¤ï¼ˆrequireï¼‰</li>
</ul>
<p>è¿™æ ·åˆçº¦å®‰å…¨æ€§æ›´é«˜ã€‚</p>
<p>âœ… <strong>åŸå›  4ï¼šéµå¾ªæœ€å°å…¬å¼€åŸåˆ™ï¼ˆPrinciple of Least Exposureï¼‰</strong></p>
<p>è¿™æ˜¯è½¯ä»¶å·¥ç¨‹åŸåˆ™ï¼š</p>
<blockquote>
<p>åªæš´éœ²å¿…è¦çš„æ¥å£ï¼Œä¸æš´éœ²å†…éƒ¨çŠ¶æ€ã€‚</p>
</blockquote>
<p>mapping æ˜¯æ ¸å¿ƒçŠ¶æ€ï¼Œåº”å½“å°è£…ï¼Œè€Œä¸æ˜¯æš´éœ²ç»™å¤–éƒ¨ä¸–ç•Œã€‚</p>
<p>âœ… ä¾‹å­ï¼šå¦‚æœç”¨ publicï¼Œä¼šæ€æ ·ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">mapping(address =&gt; uint) public balances;<br></code></pre></div></td></tr></table></figure>

<p>ç”¨æˆ·å¯ä»¥æ‰§è¡Œï¼š</p>
<figure class="highlight gams"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs gams"><span class="hljs-function"><span class="hljs-title">balances</span>(<span class="hljs-params">0x123...</span>)</span><br></code></pre></div></td></tr></table></figure>

<p>ç›´æ¥æŸ¥è¯¢ä»»ä½•äººçš„ä½™é¢ã€‚</p>
<p>è¿™å¯¹é‡‘èç±»åˆçº¦é€šå¸¸æ˜¯ä¸å…è®¸çš„ã€‚</p>
<p>âœ… ç»“è®ºï¼ˆéå¸¸å…³é”®ï¼‰</p>
<p><strong>ä¸ºä»€ä¹ˆç”¨ privateï¼Ÿ</strong></p>
<p>| åŸå›      | å†…å®¹                            |<br>| âœ… å®‰å…¨   | ä¸æš´éœ²æ‰€æœ‰äººçš„ä½™é¢ï¼Œé¿å…éšç§æ³„æ¼              |<br>| âœ… å°è£…   | mapping çŠ¶æ€ä¸æš´éœ²ï¼Œé˜²æ­¢å¤–éƒ¨å¹²æ‰°å†…éƒ¨é€»è¾‘      |<br>| âœ… æ¥å£æ§åˆ¶ | ä½¿ç”¨ balanceOf() å®ç°è‡ªå®šä¹‰è®¿é—®è§„åˆ™      |<br>| âœ… å¯æ‰©å±•  | æœªæ¥å¯ä»¥åœ¨ balanceOf() ä¸­æ·»åŠ æƒé™ã€è¿‡æ»¤ã€é€»è¾‘ |<br>| âœ… ä¸“ä¸šå®è·µ | åˆçº¦å†…éƒ¨çŠ¶æ€åº”å°½é‡å°è£…ï¼ˆæœ€å°å…¬å¼€åŸåˆ™ï¼‰           |</p>
<p>å› æ­¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">mapping(address =&gt; uint) private balances;<br></code></pre></div></td></tr></table></figure>

<p>æ˜¯ <strong>æ­£ç¡®ã€ä¸“ä¸šã€å®‰å…¨çš„å†™æ³•</strong>ã€‚</p>
<p>å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥å¸®ä½ ï¼š</p>
<p>âœ… ç”»ä¸€å¼ â€œBank çŠ¶æ€å°è£…ç»“æ„å›¾â€<br>âœ… è®²è§£ public &#x2F; private &#x2F; internal è®¿é—®æƒé™æœ€ä½³å®è·µ<br>âœ… è®²è§£ä¸ºä»€ä¹ˆ public mapping å®¹æ˜“å¯¼è‡´æ¼æ´</p>
<h1 id="å†™ä¸€ä¸ª-Struct-Mapping-ç»„åˆçš„åˆçº¦"><a href="#å†™ä¸€ä¸ª-Struct-Mapping-ç»„åˆçš„åˆçº¦" class="headerlink" title="å†™ä¸€ä¸ª Struct + Mapping ç»„åˆçš„åˆçº¦"></a>å†™ä¸€ä¸ª Struct + Mapping ç»„åˆçš„åˆçº¦</h1><h2 id="struct-sol"><a href="#struct-sol" class="headerlink" title="struct.sol"></a>struct.sol</h2><figure class="highlight php"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs php"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span><br>pragma solidity ^<span class="hljs-number">0.8</span>.<span class="hljs-number">20</span>;<br><br>contract UserManager &#123;<br>    <span class="hljs-comment">// å®šä¹‰ç”¨æˆ·ä¿¡æ¯ç»“æ„ä½“</span><br>    struct UserInfo &#123;<br>        address addr;<br>        <span class="hljs-keyword">string</span> nickname;<br>        uint256 score;<br>    &#125;<br><br>    <span class="hljs-comment">// åœ°å€ =&gt; ç”¨æˆ·ä¿¡æ¯ çš„æ˜ å°„</span><br>    <span class="hljs-title function_ invoke__">mapping</span>(address =&gt; UserInfo) <span class="hljs-keyword">private</span> users;<br><br>    <span class="hljs-comment">// æ·»åŠ ç”¨æˆ·</span><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addUser</span>(<span class="hljs-params">address _addr, <span class="hljs-keyword">string</span> memory _nickname, uint256 _score</span>) <span class="hljs-title">external</span> </span>&#123;<br>        <span class="hljs-keyword">require</span>(users[_addr].addr == <span class="hljs-title function_ invoke__">address</span>(<span class="hljs-number">0</span>), <span class="hljs-string">&quot;User already exists&quot;</span>);<br>        users[_addr] = <span class="hljs-title function_ invoke__">UserInfo</span>(&#123;<br>            <span class="hljs-attr">addr</span>: _addr,<br>            <span class="hljs-attr">nickname</span>: _nickname,<br>            <span class="hljs-attr">score</span>: _score<br>        &#125;);<br>    &#125;<br><br>    <span class="hljs-comment">// ç¼–è¾‘ç”¨æˆ·åˆ†æ•°</span><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">editScore</span>(<span class="hljs-params">address _addr, uint256 _newScore</span>) <span class="hljs-title">external</span> </span>&#123;<br>        <span class="hljs-keyword">require</span>(users[_addr].addr != <span class="hljs-title function_ invoke__">address</span>(<span class="hljs-number">0</span>), <span class="hljs-string">&quot;User does not exist&quot;</span>);<br>        users[_addr].score = _newScore;<br>    &#125;<br><br>    <span class="hljs-comment">// è·å–ç”¨æˆ·ä¿¡æ¯</span><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUser</span>(<span class="hljs-params">address _addr</span>) <span class="hljs-title">external</span> <span class="hljs-title">view</span> <span class="hljs-title">returns</span> (<span class="hljs-params">address, <span class="hljs-keyword">string</span> memory, uint256</span>) </span>&#123;<br>        <span class="hljs-keyword">require</span>(users[_addr].addr != <span class="hljs-title function_ invoke__">address</span>(<span class="hljs-number">0</span>), <span class="hljs-string">&quot;User does not exist&quot;</span>);<br>        UserInfo memory user = users[_addr];<br>        <span class="hljs-keyword">return</span> (user.addr, user.nickname, user.score);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><img src="/2025/11/10/5540/5.png"><br>è¿™æ˜¯æ·»åŠ ç”¨æˆ·çš„åŠŸèƒ½ï¼Œä¸‹é¢çš„getUser()ï¼Œè¾“å…¥ä»¥å¤ªåŠçš„åœ°å€ï¼Œå°±å¯ä»¥è¿”å›ç”¨æˆ·åå’Œåˆ†æ•°ã€‚<br>è¿™ä¸ªä»£ç è¯´æ˜äº†structå¯ä»¥å­˜å‚¨ä¸€ç»„æ•°æ®ä¿¡æ¯ã€‚<br>mappingå¯ä»¥å°†ç”¨æˆ·ä¿¡æ¯å’Œåœ°å€è¿›è¡Œæ˜ å°„ã€‚</p>
<h2 id="struct-è¿™ä¸ªç»“æ„ä½“ï¼Œæˆ‘æ„Ÿè§‰åœ¨c-é‡Œé¢å­¦è¿‡"><a href="#struct-è¿™ä¸ªç»“æ„ä½“ï¼Œæˆ‘æ„Ÿè§‰åœ¨c-é‡Œé¢å­¦è¿‡" class="headerlink" title="struct è¿™ä¸ªç»“æ„ä½“ï¼Œæˆ‘æ„Ÿè§‰åœ¨c++é‡Œé¢å­¦è¿‡"></a>struct è¿™ä¸ªç»“æ„ä½“ï¼Œæˆ‘æ„Ÿè§‰åœ¨c++é‡Œé¢å­¦è¿‡</h2><p>å®Œå…¨æ­£ç¡®ï¼Solidity çš„ <code>struct</code> å’Œ C++ é‡Œçš„ <code>struct</code> éå¸¸ç›¸ä¼¼ï¼Œæ ¸å¿ƒæ€æƒ³éƒ½æ˜¯æŠŠä¸€ç»„ç›¸å…³çš„æ•°æ®æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹ã€‚</p>
<p>å¯¹æ¯”ä¸€ä¸‹ï¼š</p>
<p><strong>C++ï¼š</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">UserInfo</span> &#123;<br>    std::string nickname;<br>    <span class="hljs-type">int</span> score;<br>&#125;;<br></code></pre></div></td></tr></table></figure>

<p><strong>Solidityï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">struct UserInfo &#123;<br>    string nickname;<br>    uint256 score;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>å‡ ä¹ä¸€æ¨¡ä¸€æ ·ï¼š</p>
<ul>
<li>éƒ½å¯ä»¥åŒ…å«å¤šç§ç±»å‹çš„æ•°æ®ï¼ˆå­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”ç­‰ï¼‰ã€‚</li>
<li>éƒ½å¯ä»¥ç”¨æ¥åˆ›å»ºâ€œå¯¹è±¡â€æˆ–å­˜å‚¨æ•°æ®é›†åˆã€‚</li>
</ul>
<p>ä¸åŒç‚¹ä¸»è¦åœ¨ Solidityï¼š</p>
<ol>
<li><strong>å­˜å‚¨ä½ç½®</strong>ï¼š<code>memory</code> &#x2F; <code>storage</code> &#x2F; <code>calldata</code> å¯¹ struct çš„å¤„ç†å¾ˆé‡è¦ã€‚</li>
<li><strong>è®¿é—®æ–¹å¼</strong>ï¼šé€šå¸¸å’Œ <code>mapping</code> ç»“åˆä½¿ç”¨ï¼Œç”¨åœ°å€æˆ– ID å¿«é€Ÿè®¿é—®ã€‚</li>
<li><strong>ä¸æ”¯æŒæ–¹æ³•</strong>ï¼šSolidity çš„ struct ä¸èƒ½åƒ C++ çš„ class ä¸€æ ·æœ‰æˆå‘˜å‡½æ•°ï¼Œåªèƒ½ç”¨å¤–éƒ¨å‡½æ•°æ“ä½œã€‚</li>
</ol>
<p>å¦‚æœä½ æƒ³ï¼Œæˆ‘å¯ä»¥ç”»ä¸€å¼  <strong>Solidity struct + mapping çš„å†…å­˜ç¤ºæ„å›¾</strong>ï¼Œç›´è§‚å±•ç¤ºå®ƒæ˜¯æ€ä¹ˆå­˜å‚¨å’Œè®¿é—®çš„ï¼Œè¿™æ ·ç†è§£ä¼šæ›´æ¸…æ™°ã€‚</p>
<p>ä½ å¸Œæœ›æˆ‘ç”»å—ï¼Ÿ</p>
<h1 id="åŒå‘-Mapping-çš„åˆçº¦"><a href="#åŒå‘-Mapping-çš„åˆçº¦" class="headerlink" title="åŒå‘ Mapping çš„åˆçº¦"></a>åŒå‘ Mapping çš„åˆçº¦</h1><h2 id="mapping-sol"><a href="#mapping-sol" class="headerlink" title="mapping.sol"></a>mapping.sol</h2><figure class="highlight zephir"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs zephir"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span><br>pragma solidity ^<span class="hljs-number">0.8</span><span class="hljs-number">.20</span>;<br><br>contract FollowSystem &#123;<br>    <span class="hljs-comment">// åŒå‘ mapping: addrA -&gt; addrB -&gt; bool</span><br>    mapping(address =&gt; mapping(address =&gt; <span class="hljs-keyword">bool</span>)) <span class="hljs-keyword">private</span> follow;<br><br>    <span class="hljs-comment">// è®¾ç½®å…³æ³¨å…³ç³»</span><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setFollow</span><span class="hljs-params">(address _to, <span class="hljs-keyword">bool</span> _follow)</span> <span class="hljs-title">external</span> </span>&#123;<br>        <span class="hljs-keyword">require</span>(_to != msg.sender, <span class="hljs-string">&quot;Cannot follow yourself&quot;</span>);<br>        follow[msg.sender][_to] = _follow;<br>    &#125;<br><br>    <span class="hljs-comment">// æ£€æŸ¥å…³æ³¨å…³ç³»</span><br>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkFollow</span><span class="hljs-params">(address _from, address _to)</span> <span class="hljs-title">external</span> <span class="hljs-title">view</span> <span class="hljs-title">returns</span> <span class="hljs-params">(<span class="hljs-keyword">bool</span>)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> follow[_from][_to];<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><img src="/2025/11/10/5540/6.png"><br>æ‰€è°“åŒå±‚æ˜ å°„å°±æ˜¯åœ°å€Aï¼Œåœ°å€Bï¼Œæ˜¯å¦å…³æ³¨ã€‚ è¿™ä¸¤ä¸ªå…³ç³»çš„æ˜ å°„ã€‚</p>
<p>å¦‚æœå…³æ³¨äº†ï¼Œä¹Ÿå°±æ˜¯trueï¼Œä¼šè¿”å›ä»¥ä¸‹ç»“æœ</p>
<figure class="highlight json"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>	<span class="hljs-attr">&quot;0&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;bool: true&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></div></td></tr></table></figure>

<h2 id="æœ‰åŒå±‚mappingï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸‰å±‚mapping"><a href="#æœ‰åŒå±‚mappingï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸‰å±‚mapping" class="headerlink" title="æœ‰åŒå±‚mappingï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸‰å±‚mapping"></a>æœ‰åŒå±‚mappingï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸‰å±‚mapping</h2><p>æœ‰ï¼Œè€Œä¸” Solidity <strong>æ”¯æŒä»»æ„å±‚æ•°çš„åµŒå¥— mapping</strong>ï¼Œä¸ä»…å¯ä»¥åŒå±‚ï¼ˆ<code>mapping â†’ mapping</code>ï¼‰ï¼Œä¹Ÿå¯ä»¥ä¸‰å±‚ã€å››å±‚ã€äº”å±‚â€¦â€¦ç†è®ºä¸Šæ— é™å±‚ï¼Œåªè¦ä½ æ„¿æ„å†™ã€‚</p>
<ol>
<li>ä¸‰å±‚ mapping çš„å®šä¹‰ç¤ºä¾‹</li>
</ol>
<p>ä¸‰å±‚ mapping çš„ç»“æ„å¦‚ä¸‹ï¼š</p>
<p>âœ… ç¤ºä¾‹ 1ï¼šä¸‰å±‚ mappingï¼ˆåœ°å€ â†’ åœ°å€ â†’ åœ°å€ â†’ uintï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">mapping(address =&gt; mapping(address =&gt; mapping(address =&gt; uint256))) public tripleMap;<br></code></pre></div></td></tr></table></figure>

<p>ç»“æ„ç›¸å½“äºï¼š</p>
<figure class="highlight inform7"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs inform7">tripleMap<span class="hljs-comment">[A]</span><span class="hljs-comment">[B]</span><span class="hljs-comment">[C]</span> = value<br></code></pre></div></td></tr></table></figure>

<p>å¯ç”¨æ¥è¡¨è¾¾å¤æ‚çš„å…³ç³»ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>ç”¨æˆ· A â†’ é¡¹ç›® B â†’ ä»»åŠ¡ C â†’ åˆ†æ•°</li>
<li>å›½å®¶ â†’ åŸå¸‚ â†’ åŒºåŸŸ â†’ æ•°æ®</li>
<li>ç”¨æˆ· â†’ å•†å“ â†’ å°åˆ†ç±» â†’ æ•°å€¼</li>
</ul>
<p>âœ… ç¤ºä¾‹ 2ï¼šä¸‰å±‚ mappingï¼ˆåœ°å€ â†’ uint â†’ åœ°å€ â†’ boolï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">mapping(address =&gt; mapping(uint =&gt; mapping(address =&gt; bool))) public permissions;<br></code></pre></div></td></tr></table></figure>

<p>ç”¨é€”ï¼š</p>
<ul>
<li>æŸä¸ªç”¨æˆ·çš„ç¬¬ N ä¸ªèµ„æºï¼Œå¯¹æŸä¸ªåœ°å€æ˜¯å¦å¼€æ”¾è®¿é—®</li>
<li>NFT ç³»åˆ— â†’ tokenId â†’ æˆæƒä»£ç† â†’ æ˜¯å¦å…è®¸</li>
</ul>
<ol start="2">
<li>ä¸‰å±‚ mapping çš„å¯è§†åŒ–ç¤ºæ„å›¾</li>
</ol>
<p>å‡è®¾ç»“æ„ï¼š</p>
<figure class="highlight arcade"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs arcade">mapping(<span class="hljs-function"><span class="hljs-params">address</span> =&gt;</span> mapping(<span class="hljs-function"><span class="hljs-params">address</span> =&gt;</span> mapping(<span class="hljs-function"><span class="hljs-params">address</span> =&gt;</span> bool))) follow3;<br></code></pre></div></td></tr></table></figure>

<p>ç¤ºæ„å›¾ï¼š</p>
<figure class="highlight nix"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs nix">follow3<br>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”<br>â”‚ <span class="hljs-params">key:</span> A                                    â”‚<br>â”‚     â””â”€ mapping                            â”‚<br>â”‚          <span class="hljs-params">key:</span> B                            â”‚<br>â”‚              â””â”€ mapping                    â”‚<br>â”‚                   <span class="hljs-params">key:</span> C  â†’ <span class="hljs-params">value:</span> <span class="hljs-literal">true</span>    â”‚<br>â”‚                   <span class="hljs-params">key:</span> D  â†’ <span class="hljs-params">value:</span> <span class="hljs-literal">false</span>   â”‚<br>â”‚                                            â”‚<br>â”‚ <span class="hljs-params">key:</span> X                                    â”‚<br>â”‚     â””â”€ mapping                            â”‚<br>â”‚          <span class="hljs-params">key:</span> Y                            â”‚<br>â”‚              â””â”€ mapping                    â”‚<br>â”‚                   <span class="hljs-params">key:</span> Z  â†’ <span class="hljs-params">value:</span> <span class="hljs-literal">true</span>    â”‚<br>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜<br></code></pre></div></td></tr></table></figure>

<p>æ¯ä¸€å±‚éƒ½æ˜¯ â€œå­—å…¸ä¸­å¥—å­—å…¸â€ï¼Œç›´åˆ°æœ€åä¸€å±‚çš„å€¼ã€‚</p>
<ol start="3">
<li>å¸¦æ“ä½œå‡½æ•°çš„ä¸‰å±‚ mapping ç¤ºä¾‹åˆçº¦</li>
</ol>
<p>ä½ å¯ä»¥è¿™æ ·å†™ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">// SPDX-License-Identifier: MIT<br>pragma solidity ^0.8.20;<br><br>contract TripleMapping &#123;<br>    // ä¸‰å±‚ mapping<br>    mapping(address =&gt; mapping(address =&gt; mapping(address =&gt; bool))) public data;<br><br>    function setValue(address level2, address level3, bool value) external &#123;<br>        data[msg.sender][level2][level3] = value;<br>    &#125;<br><br>    function getValue(address level1, address level2, address level3)<br>        external<br>        view<br>        returns (bool)<br>    &#123;<br>        return data[level1][level2][level3];<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>è°ƒç”¨æ¨¡å¼ï¼š</p>
<figure class="highlight stylus"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">setValue</span><span class="hljs-params">(B, C, true)</span></span>  <br>â†’ data<span class="hljs-selector-attr">[msg.sender]</span><span class="hljs-selector-attr">[B]</span><span class="hljs-selector-attr">[C]</span> = true<br><br><span class="hljs-function"><span class="hljs-title">getValue</span><span class="hljs-params">(A, B, C)</span></span><br>â†’ data<span class="hljs-selector-attr">[A]</span><span class="hljs-selector-attr">[B]</span><span class="hljs-selector-attr">[C]</span><br></code></pre></div></td></tr></table></figure>


<ol start="4">
<li>å®æˆ˜å»ºè®®ï¼šä¸ºä»€ä¹ˆä¸æ¨èè¶…è¿‡ä¸¤å±‚ï¼Ÿ</li>
</ol>
<p>ç†è®ºä¸Šå¯æ— é™åµŒå¥—ï¼Œä½†å®è·µä¸­ï¼š</p>
<p>âœ… é—®é¢˜ï¼š</p>
<ul>
<li>è¶Šå¤šå±‚è¶Šéš¾è¯»</li>
<li>è¶Šå¤šå±‚è¶Šéš¾è°ƒè¯•</li>
<li>è¶Šå¤šå±‚ gas æˆæœ¬æ›´é«˜ï¼ˆè®¿é—®æ¯å±‚éƒ½æ˜¯ä¸€æ¬¡ storage slot è¯»å–ï¼‰</li>
<li>è¶Šå¤šå±‚è¶Šå®¹æ˜“å†™é”™ key ç»“æ„</li>
</ul>
<p>âœ… å»ºè®®ï¼š</p>
<ul>
<li>ä¸¤å±‚ mapping æœ€å¸¸ç”¨ï¼ˆå¦‚ tokenOwner â†’ approvalsï¼‰</li>
<li>ä¸‰å±‚ mapping æœ‰æ—¶å¿…è¦ï¼ˆå¦‚ç”¨æˆ· â†’ tokenId â†’ operator â†’ æƒé™ï¼‰</li>
<li>å¤šäºä¸‰å±‚æ—¶ï¼Œé€šå¸¸è¦è€ƒè™‘<strong>æ˜¯å¦åº”è¯¥æ¢æˆ struct ç»„åˆ mapping</strong></li>
</ul>
<p>å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥å¸®ä½ å†™ï¼š</p>
<ul>
<li>ä¸€ä¸ªçœŸå®é¡¹ç›®ä¸­ä½¿ç”¨ä¸‰å±‚ mapping çš„æ¡ˆä¾‹</li>
<li>è®¾è®¡ä¸€ä¸ªæ›´ä¼˜é›…çš„ç»“æ„ï¼ˆé¿å…è¿‡æ·±åµŒå¥—ï¼‰</li>
<li>æˆ–æŠŠä½ çš„ä¸šåŠ¡é€»è¾‘æ”¹å†™æˆ struct + åŒå±‚ mappingï¼Œæ›´æ˜“è¯»</li>
</ul>
<p>ä½ æƒ³ç»§ç»­æ·±å…¥å—ï¼Ÿ</p>
<h1 id="æˆ‘æ„Ÿè§‰solidityæ¯”pythonè¦éš¾"><a href="#æˆ‘æ„Ÿè§‰solidityæ¯”pythonè¦éš¾" class="headerlink" title="æˆ‘æ„Ÿè§‰solidityæ¯”pythonè¦éš¾"></a>æˆ‘æ„Ÿè§‰solidityæ¯”pythonè¦éš¾</h1><p>ä»å·¥ç¨‹è§’åº¦æ¥çœ‹ï¼Œä½ çš„æ„Ÿè§‰éå¸¸æ­£ç¡®ï¼Œè€Œä¸”æ˜¯å¤§å¤šæ•°å¼€å‘è€…åœ¨ç¬¬ä¸€æ¬¡æ¥è§¦ Solidity æ—¶çš„å…±è¯†ï¼š<br><strong>Solidity çš„å­¦ä¹ æ›²çº¿ç¡®å®æ¯” Python æ›´é™¡å³­ã€‚</strong></p>
<p>ä¸‹é¢æˆ‘ç»™ä½ ç³»ç»Ÿåœ°è§£é‡Šä¸ºä»€ä¹ˆ Solidity æ¯” Python éš¾ï¼Œä»¥åŠä½ åº”è¯¥å¦‚ä½•é™ä½å­¦ä¹ éš¾åº¦ã€‚</p>
<ol>
<li>ä¸ºä»€ä¹ˆ Solidity æ¯” Python éš¾ï¼Ÿ</li>
</ol>
<h2 id="â‘ -Solidity-åŒºå—é“¾-ç¼–ç¨‹è¯­è¨€"><a href="#â‘ -Solidity-åŒºå—é“¾-ç¼–ç¨‹è¯­è¨€" class="headerlink" title="â‘  Solidity &#x3D; åŒºå—é“¾ + ç¼–ç¨‹è¯­è¨€"></a>â‘  Solidity &#x3D; åŒºå—é“¾ + ç¼–ç¨‹è¯­è¨€</h2><p>Python åªéœ€è¦å…³æ³¨è¯­è¨€æœ¬èº«ã€‚<br>Solidity éœ€è¦ä½ åŒæ—¶ç†è§£ï¼š</p>
<ul>
<li>EVMï¼ˆä»¥å¤ªåŠè™šæ‹Ÿæœºï¼‰</li>
<li>Gas æˆæœ¬</li>
<li>çŠ¶æ€å˜é‡ + storage&#x2F;memory&#x2F;calldata</li>
<li>åŒºå—ã€äº¤æ˜“ã€nonce</li>
<li>Reentrancyï¼ˆé‡å…¥æ”»å‡»ï¼‰</li>
<li>å®‰å…¨æ€§ï¼ˆéå¸¸æ ¸å¿ƒï¼‰</li>
<li>åˆçº¦é—´è°ƒç”¨</li>
<li>ABIã€äº‹ä»¶æ—¥å¿—</li>
<li>é’±åŒ…ç­¾åã€msg.senderã€msg.value çš„è¯­ä¹‰</li>
</ul>
<p><strong>Python æ˜¯è¿è¡Œåœ¨æœ¬åœ°æœºå™¨ä¸Šï¼ŒSolidity æ˜¯è¿è¡Œåœ¨ä¸€å°â€œäººäººéƒ½èƒ½çœ‹åˆ°ä¸”ä¸èƒ½åˆ æ”¹â€çš„å…¨çƒè®¡ç®—æœºä¸Šã€‚</strong></p>
<p>è‡ªç„¶å°±å¤æ‚å¾ˆå¤šã€‚</p>
<h2 id="â‘¡-Solidity-æ˜¯â€œå¯è¢«é»‘å®¢æ”»å‡»â€çš„è¯­è¨€"><a href="#â‘¡-Solidity-æ˜¯â€œå¯è¢«é»‘å®¢æ”»å‡»â€çš„è¯­è¨€" class="headerlink" title="â‘¡ Solidity æ˜¯â€œå¯è¢«é»‘å®¢æ”»å‡»â€çš„è¯­è¨€"></a>â‘¡ Solidity æ˜¯â€œå¯è¢«é»‘å®¢æ”»å‡»â€çš„è¯­è¨€</h2><p>åœ¨ Python é‡Œå†™é”™ä¸€ä¸ªå˜é‡ï¼Œç¨‹åºå´©äº†ï¼Œé‡æ–°è¿è¡Œå³å¯ã€‚</p>
<p>åœ¨ Solidity é‡Œå†™é”™ä¸€è¡Œä»£ç ï¼š</p>
<ul>
<li>å¯èƒ½å¯¼è‡´ é’±è¢«é»‘å®¢ç›—èµ°</li>
<li>å¯èƒ½å¯¼è‡´åˆçº¦æ°¸ä¹…æ— æ³•å‡çº§</li>
<li>å¯èƒ½å¯¼è‡´èµ„é‡‘æ°¸ä¹…æ— æ³•å–å‡º</li>
<li>é“¾ä¸Šçš„çŠ¶æ€æ°¸è¿œæ— æ³•ä¿®æ”¹æˆ–å›æ»š</li>
</ul>
<p>æ‰€ä»¥ Solidity çš„è®¾è®¡å¿…é¡»éå¸¸ä¸¥æ ¼ã€ååº•å±‚ã€å®‰å…¨æ€§å¼ºã€‚</p>
<p><strong>è¿™å°±ä½¿å¾—å­¦ä¹ æˆæœ¬éå¸¸é«˜ã€‚</strong></p>
<h2 id="â‘¢-Solidity-æ˜¯â€œæœ‰é™èµ„æºâ€çš„è¯­è¨€"><a href="#â‘¢-Solidity-æ˜¯â€œæœ‰é™èµ„æºâ€çš„è¯­è¨€" class="headerlink" title="â‘¢ Solidity æ˜¯â€œæœ‰é™èµ„æºâ€çš„è¯­è¨€"></a>â‘¢ Solidity æ˜¯â€œæœ‰é™èµ„æºâ€çš„è¯­è¨€</h2><ul>
<li>é“¾ä¸Šå­˜å‚¨æœ€è´µ</li>
<li>æ¯æ¬¡æ“ä½œéƒ½æœ‰ gas æ¶ˆè€—</li>
<li>ä¸èƒ½æ— é™å¾ªç¯</li>
<li>ä¸èƒ½æ— é™é€’å½’</li>
<li>ä¸èƒ½å­˜å¤ªå¤§æ•°æ®ç»“æ„</li>
<li>ä¸èƒ½éšä¾¿ç”¨å­—ç¬¦ä¸²ï¼Œå¤ªè´µ</li>
</ul>
<p>Python å®Œå…¨æ²¡è¿™äº›é™åˆ¶ã€‚</p>
<h2 id="â‘£-Solidity-çš„è°ƒè¯•ç¯å¢ƒå¼±"><a href="#â‘£-Solidity-çš„è°ƒè¯•ç¯å¢ƒå¼±" class="headerlink" title="â‘£ Solidity çš„è°ƒè¯•ç¯å¢ƒå¼±"></a>â‘£ Solidity çš„è°ƒè¯•ç¯å¢ƒå¼±</h2><p>Pythonï¼š</p>
<ul>
<li>print</li>
<li>logging</li>
<li>debugger</li>
<li>breakpoint</li>
<li>å¿«é€Ÿé‡è·‘</li>
</ul>
<p>Solidityï¼š</p>
<ul>
<li>ä¸èƒ½ç”¨ print</li>
<li>è°ƒè¯•å…¨é äº‹ä»¶ event</li>
<li>ä¿®æ”¹çŠ¶æ€éœ€è¦é‡æ–°éƒ¨ç½²åˆçº¦</li>
<li>è°ƒè¯•æˆæœ¬é«˜å¾—å¤š</li>
</ul>
<ol start="2">
<li>å¦‚ä½•è®©å­¦ä¹  Solidity å˜å¾—è½»æ¾ï¼Ÿ</li>
</ol>
<p>æˆ‘å»ºè®®ä½ ç”¨è¿™æ¡è·¯çº¿ï¼š</p>
<p>âœ… ç¬¬ 1 é˜¶æ®µï¼ˆ1â€“2 å‘¨ï¼‰ï¼šåªå­¦åŸºæœ¬è¯­æ³•</p>
<ul>
<li>åˆçº¦ã€å‡½æ•°ã€modifier</li>
<li>struct + mapping</li>
<li>storage&#x2F;memory çš„åŒºåˆ«ï¼ˆä½ ç°åœ¨å·²ç»å¼€å§‹ç†è§£äº†ï¼‰</li>
<li>äº‹ä»¶</li>
</ul>
<p>ä½ ç›®å‰åšçš„ç»ƒä¹ ï¼ˆUserInfoã€followï¼‰å®Œå…¨æ­£ç¡®ï¼Œå°±æ˜¯åº”è¯¥è¿™æ ·å†™å°åˆçº¦ã€‚</p>
<p>âœ… ç¬¬ 2 é˜¶æ®µï¼ˆ2â€“4 å‘¨ï¼‰ï¼šæŒæ¡å¸¸ç”¨è®¾è®¡æ¨¡å¼</p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>AccessControlï¼ˆæƒé™æ§åˆ¶ï¼‰</li>
<li>Ownableï¼ˆonlyOwnerï¼‰</li>
<li>Pausableï¼ˆæš‚åœåˆçº¦ï¼‰</li>
<li>Pull payment &#x2F; withdraw pattern</li>
<li>Checks-Effects-Interactions</li>
</ul>
<p>è¿™äº›æ¯”è¯­æ³•æ›´é‡è¦ã€‚</p>
<p>âœ… ç¬¬ 3 é˜¶æ®µï¼ˆ1â€“2 æœˆï¼‰ï¼šå­¦ä¹ æ”»å‡»ä¸é˜²å¾¡</p>
<p>å®‰å…¨ç ”ç©¶å‡ºèº«çš„ä½ åœ¨è¿™æ–¹é¢æœ‰ç»å¯¹ä¼˜åŠ¿ã€‚</p>
<p>é‡ç‚¹å­¦ä¹ ï¼š</p>
<ul>
<li>reentrancyï¼ˆé‡å…¥æ”»å‡»ï¼‰</li>
<li>integer overflowï¼ˆæº¢å‡ºï¼‰</li>
<li>delegatecall æ”»å‡»</li>
<li>storage layout åŠ«æŒ</li>
<li>call injection</li>
<li>frontrunning</li>
<li>access control bypass</li>
</ul>
<p>ä½ å­¦ä¼šäº†è¿™äº›ï¼Œä½ å°±æ˜¯ 80% çš„ Auditorã€‚</p>
<p>âœ… ç¬¬ 4 é˜¶æ®µï¼ˆ2â€“6 æœˆï¼‰ï¼šå®¡è®¡çœŸå®é¡¹ç›®</p>
<ul>
<li>çœ‹ OpenZeppelin æºç </li>
<li>çœ‹ Uniswapã€Aaveã€Compound</li>
<li>é˜…è¯»å®¡è®¡æŠ¥å‘Š</li>
<li>è‡ªå·±åŠ¨æ‰‹å¤ç° CTF æ¼æ´</li>
</ul>
<p>ä½ å½“å‰çš„èŠ‚å¥å®Œå…¨æ²¡é—®é¢˜ã€‚</p>
<ol start="3">
<li>ç”¨ä¸€å¥è¯å›ç­”ä½ çš„æ„Ÿå—</li>
</ol>
<p>æ˜¯çš„ï¼Œ<strong>Solidity æ¯” Python éš¾éå¸¸å¤š</strong>ï¼Œä½†éš¾çš„éƒ¨åˆ†ä¸»è¦æ˜¯ï¼š</p>
<ul>
<li>å®‰å…¨</li>
<li>çŠ¶æ€æœº</li>
<li>Gas ä¼˜åŒ–</li>
<li>åŒºå—é“¾åŸç†</li>
</ul>
<p>è€Œä¸æ˜¯è¯­æ³•æœ¬èº«ã€‚</p>
<p>ä½ ç°åœ¨åšçš„å°åˆçº¦ï¼ˆUserInfoã€followï¼‰éå¸¸æ­£ç¡®ï¼Œæ˜¯æœ€ä½³å…¥é—¨æ–¹å¼ã€‚</p>
<p>å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç»§ç»­ç»™ä½ å®‰æ’ï¼š</p>
<ul>
<li>æ›´é«˜çº§çš„ mapping ç»ƒä¹ </li>
<li>struct + mapping çš„çœŸå®æ¡ˆä¾‹</li>
<li>å†™ä¸€ä¸ªå®Œæ•´çš„â€œå¾®åš Follow ç³»ç»Ÿåˆçº¦â€</li>
<li>æˆ–å¸®ä½ åš 2 ä¸ªæœˆçš„ Solidity é€Ÿæˆè·¯çº¿</li>
</ul>
<p>ä½ å¸Œæœ›ç»§ç»­ç»ƒä¹ å“ªä¸ªæ–¹å‘ï¼Ÿ</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
              </div>
              
                
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/11/10/24884.html">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">è‘—åçš„solidityåˆçº¦</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/11/10/16657.html">
                        <span class="hidden-mobile">solidityåŸºç¡€è¯­æ³•</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


            

                
                  <a id="scroll-top-button" href="#" role="button">
                    <i class="iconfont icon-arrowup" aria-hidden="true"></i>
                  </a>
                  

                    

                          
      </main>

      <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://whale3070.github.io/" target="_blank" rel="nofollow noopener"><span>Whale3070</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- ä¸è’œå­ç»Ÿè®¡PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            æ€»è®¿é—®é‡ 
            <span id="busuanzi_value_site_pv"></span>
             æ¬¡
          </span>
      
      
        <!-- ä¸è’œå­ç»Ÿè®¡UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            æ€»è®¿å®¢æ•° 
            <span id="busuanzi_value_site_uv"></span>
             äºº
          </span>
      
    
  </div>


  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->




  



  <script  src="https://cdn.staticfile.org/tocbot/4.12.0/tocbot.min.js" ></script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




















<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ ä¿æŒåœ¨æœ€åº•éƒ¨ -->
<script  src="/js/boot.js" ></script>


<link href="/pagefind/pagefind-ui.css" rel="stylesheet">
  <script src="/pagefind/pagefind-ui.js"></script>
  <style>
    /* æœç´¢æ¡†é…è‰²é€‚é… */
    #search { margin-top: 2rem; }
    [data-user-color-scheme='dark'] .pagefind-ui {
      --pagefind-ui-primary: #eeeeee;
      --pagefind-ui-text: #eeeeee;
      --pagefind-ui-background: #151515;
      --pagefind-ui-border: #333;
    }
  </style>
    </body>

  </html>