

  <!DOCTYPE html>
  <html lang="zh-CN" data-default-color-scheme=&#34;dark&#34; >
  <style>
    .text1
    {
    text-shadow: 0px 0px 2px #f2f3f2;
    }
    </style>

  <script>
    // 强制内网 IP 识别为安全上下文
    if (window.location.hostname !== 'localhost' && window.location.protocol === 'http:') {
        // 尝试手动映射 crypto 属性
        if (!window.crypto.subtle && window.crypto.webkitSubtle) {
            window.crypto.subtle = window.crypto.webkitSubtle;
        }
    }
    
    // 终极补丁：如果还是没有 subtle，则创建一个占位符避免报错
    // 提示：这通常能解决加载报错，但如果插件强依赖原生加密，建议执行下面的“降级”预判
    if (!window.isSecureContext) {
        console.warn('当前环境非安全上下文，正在尝试兼容内网加密解密...');
    }
</script>


<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/null">
  <link rel="icon" type="image/png" href="/null">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  <title>hardhat开发框架3 - whale3070&#39;s blog</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.4.0/styles/github-gist.min.css" />
    
  

  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"whale3070.github.io","root":"/","version":"1.8.7","typing":{"enable":false,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":false},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":false,"onlypost":false},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 7.3.0"></head>


    <body>
      <header style="height: 70vh;">
        <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>InfoSec learning</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/search/">
                <i class="iconfont icon-search"></i>
                搜索
              </a>
            </li>
          
        
        
        
          
        
      </ul>
    </div>
  </div>
</nav>

          <div class="banner" id="banner" false
            style="background: url('/img/default.png') no-repeat center center;
              background-size: cover;">
              <div class="full-bg-img">
                <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
                  <div class="page-header text-center fade-in-up">
                    <span class="h2 text1" id="subtitle" title="hardhat开发框架3">
                      
                        hardhat开发框架3
                      
                    </span>
        
                    
                      <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2025-11-19 01:29" pubdate>
        2025年11月19日 凌晨
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      4.9k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      54
       分钟
    </span>
  

  
  
</div>

                    
                  </div>
                    
                  </div>
                  
                </div>
              </div>
          </div>
      </header>

      <main>
        
          

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto" data-pagefind-body>
            <!-- SEO header -->
            <h1 style="display: none">hardhat开发框架3</h1>
            
            <div class="markdown-body">
              <p>上一篇： <a target="_blank" rel="noopener" href="https://whale3070.com/2025/11/18/fd4425c0abcb/">hardhat开发框架2</a></p>
<p>在上一篇中，我们了解到了</p>
<ul>
<li>nvm 是node版本管理器</li>
<li>node.js是JavaScript runtime</li>
<li>npm是node.js的包管理工具</li>
<li>hardhat的历史有7年，是一家名为nomic labs的公司开发的</li>
<li>可以通过搜索公司名词和它们的官网去发现新的工作机会</li>
<li>在linux虚拟机中安装了hardhat和fountry（在windows安装这些遇到了很多的报错）</li>
</ul>
<h1 id="问题一：-学习solidity为什么要学基于JavaScript的hardhat的呢？感觉很奇怪，我之前学习c，c-，只要IDE和编译器就足够了"><a href="#问题一：-学习solidity为什么要学基于JavaScript的hardhat的呢？感觉很奇怪，我之前学习c，c-，只要IDE和编译器就足够了" class="headerlink" title="问题一： 学习solidity为什么要学基于JavaScript的hardhat的呢？感觉很奇怪，我之前学习c，c++，只要IDE和编译器就足够了"></a>问题一： 学习solidity为什么要学基于JavaScript的hardhat的呢？感觉很奇怪，我之前学习c，c++，只要IDE和编译器就足够了</h1><p>理解你为什么会觉得很奇怪！你提到的 C 和 C++ 开发环境确实相对简单，通常只需要 IDE 和编译器就能进行开发。但 Solidity 开发有些不同，因为它涉及到区块链、智能合约和去中心化的应用，这些特点使得开发工具链变得更加复杂，尤其是在测试、部署和与区块链交互时。</p>
<h3 id="为什么学习-Hardhat？"><a href="#为什么学习-Hardhat？" class="headerlink" title="为什么学习 Hardhat？"></a>为什么学习 <strong>Hardhat</strong>？</h3><ol>
<li><p><strong>区块链开发需要更多的工具</strong>：</p>
<ul>
<li>在传统编程语言（如 C、C++）中，代码通常在本地运行，开发者只需使用编译器和 IDE。但在区块链开发中，尤其是 <strong>Solidity</strong>，你不仅需要编写合约，还需要与 <strong>区块链网络</strong>（如以太坊）进行交互。Hardhat 提供了一个完整的开发环境，帮助你进行部署、调试、测试等操作。</li>
</ul>
</li>
<li><p><strong>自动化测试和调试</strong>：</p>
<ul>
<li><strong>Hardhat</strong> 内置了强大的测试框架，可以用来自动化测试智能合约，确保合约按预期工作。它允许你在本地模拟以太坊网络，进行快速的合约部署、执行和调试，类似于 IDE 中的调试器和测试框架，但 Hardhat 是专为区块链环境设计的。</li>
</ul>
</li>
<li><p><strong>与智能合约交互</strong>：</p>
<ul>
<li>Solidity 合约不仅仅是写代码，还涉及到部署到区块链、与前端交互等过程。Hardhat 提供了与以太坊交互的功能（例如，部署合约、发送交易、调用合约方法等），简化了这些流程，使得开发者能够专注于逻辑实现，而不用担心底层复杂性。</li>
</ul>
</li>
<li><p><strong>测试环境</strong>：</p>
<ul>
<li>在传统编程中，我们测试的是在本地计算机上运行的程序，而 Solidity 程序运行在 <strong>区块链网络</strong> 中。Hardhat 提供了一个本地的以太坊网络（Hardhat Network），模拟真实的区块链环境。开发者可以在没有实际花费 Gas 的情况下进行合约测试和交易模拟，这对于开发去中心化应用（dApp）非常重要。</li>
</ul>
</li>
<li><p><strong>开发者效率</strong>：</p>
<ul>
<li>Hardhat 可以大大提高开发效率，例如：快速编译、部署和测试、集成其他工具（如 ethers.js、web3.js）等，所有这些功能都能够在一个统一的框架下完成，避免了开发者在多个工具间切换的麻烦。</li>
</ul>
</li>
<li><p><strong>跨链开发支持</strong>：</p>
<ul>
<li>目前 Hardhat 支持多个以太坊测试网络（如 Rinkeby、Goerli）以及本地网络和主网部署，使得开发者可以无缝地在不同网络环境下进行测试和开发，确保合约能够跨链兼容。</li>
</ul>
</li>
</ol>
<h3 id="总结："><a href="#总结：" class="headerlink" title="总结："></a><strong>总结</strong>：</h3><ul>
<li>C 和 C++ 的开发环境是传统的本地应用开发，而 Solidity 属于区块链和去中心化应用开发，它不仅需要编写合约代码，还需要与区块链进行交互，进行网络部署和测试。</li>
<li><strong>Hardhat</strong> 提供了一个全面的开发框架，专为智能合约开发设计，解决了传统开发工具无法处理的区块链特有的挑战。</li>
</ul>
<p>因此，<strong>Hardhat</strong> 这样的工具是 Solidity 开发中不可或缺的一部分，它为开发者提供了更多的功能和便利，使得区块链开发变得更加高效和可维护。</p>
<h1 id="问题二：-那么hardhat是不是可以看作python的flask或者fastapi"><a href="#问题二：-那么hardhat是不是可以看作python的flask或者fastapi" class="headerlink" title="问题二： 那么hardhat是不是可以看作python的flask或者fastapi"></a>问题二： 那么hardhat是不是可以看作python的flask或者fastapi</h1><p>是的，可以将 <strong>Hardhat</strong> 类比为 <strong>Python 的 Flask</strong> 或 <strong>FastAPI</strong>，但它们之间也有一些不同的地方。让我们详细分析一下：</p>
<h3 id="相似之处："><a href="#相似之处：" class="headerlink" title="相似之处："></a><strong>相似之处</strong>：</h3><ol>
<li><p><strong>用于构建应用</strong>：</p>
<ul>
<li><strong>Hardhat</strong> 是一个 <strong>开发框架</strong>，专为 <strong>以太坊智能合约开发</strong> 设计，提供了开发、测试、调试和部署智能合约的功能。它让开发者能够快速构建去中心化应用（dApp）。</li>
<li>类似地，<strong>Flask</strong> 和 <strong>FastAPI</strong> 是用于构建 <strong>Web 应用</strong> 的框架，提供了快速构建 RESTful API 或 Web 服务的功能。它们简化了 Web 应用开发过程，允许开发者快速实现后端逻辑、路由、请求处理等。</li>
</ul>
</li>
<li><p><strong>轻量级和灵活性</strong>：</p>
<ul>
<li><strong>Flask</strong> 和 <strong>FastAPI</strong> 都是 <strong>轻量级框架</strong>，不强制使用特定的库或工具，开发者可以自由选择想要的功能和扩展。同样，<strong>Hardhat</strong> 也是轻量级的，它本身并不包含复杂的 Web 前端或数据库功能，而是专注于智能合约开发，因此开发者可以灵活地选择其他工具（如 ethers.js）来与合约交互。</li>
</ul>
</li>
<li><p><strong>内置功能和工具</strong>：</p>
<ul>
<li><strong>Flask</strong> 提供了路由、请求处理、模板渲染等功能，但也允许开发者根据需求扩展功能，比如集成数据库、身份验证等。</li>
<li><strong>Hardhat</strong> 提供了内置的功能，如本地 <strong>以太坊网络</strong>（用于测试合约），<strong>自动化测试</strong>（通过 Mocha 和 Chai）以及与合约的交互功能（通过 <code>ethers.js</code> 或 <code>web3.js</code>）。它也允许你集成其他工具和库，来增强智能合约的功能。</li>
</ul>
</li>
</ol>
<h3 id="不同之处："><a href="#不同之处：" class="headerlink" title="不同之处："></a><strong>不同之处</strong>：</h3><ol>
<li><p><strong>应用领域不同</strong>：</p>
<ul>
<li><strong>Flask</strong> 和 <strong>FastAPI</strong> 是用于构建 Web 应用，主要处理 <strong>HTTP 请求</strong>、路由、数据库操作等。</li>
<li><strong>Hardhat</strong> 是专为 <strong>区块链开发</strong> 设计的框架，主要关注 <strong>智能合约</strong> 的编写、测试、调试和部署。它的核心是与 <strong>以太坊</strong> 区块链进行交互，而不是处理 HTTP 请求或 Web 页面。</li>
</ul>
</li>
<li><p><strong>开发的目标不同</strong>：</p>
<ul>
<li><strong>Flask</strong> 和 <strong>FastAPI</strong> 旨在构建 <strong>后端 API</strong> 或 Web 应用，通过处理 HTTP 请求和响应来与前端或客户端交互。</li>
<li><strong>Hardhat</strong> 旨在帮助开发者构建和部署 <strong>智能合约</strong>，并通过 JavaScript 和 Solidity 编写与区块链的交互。</li>
</ul>
</li>
</ol>
<h3 id="总结：-1"><a href="#总结：-1" class="headerlink" title="总结："></a><strong>总结</strong>：</h3><ul>
<li><strong>Hardhat</strong> 可以类比为 <strong>Flask</strong> 或 <strong>FastAPI</strong>，因为它们都是用于开发某类特定应用的框架，提供了基础功能并允许扩展。</li>
<li>但是，<strong>Hardhat</strong> 是专为 <strong>以太坊智能合约</strong> 开发设计的框架，而 <strong>Flask</strong> 和 <strong>FastAPI</strong> 是专为 <strong>Web 应用</strong> 和 <strong>API</strong> 开发设计的。</li>
</ul>
<p>所以，<strong>Hardhat</strong> 是一个类似于 <strong>Flask</strong> 或 <strong>FastAPI</strong> 的框架，但它面向的是区块链开发，特别是智能合约开发。</p>
<h1 id="问题三：-Cancun-是什么"><a href="#问题三：-Cancun-是什么" class="headerlink" title="问题三： Cancun 是什么"></a>问题三： Cancun 是什么</h1><p><strong>Cancun</strong> 是以太坊（Ethereum）网络的一次重要升级（硬分叉）的代号，类似于 <strong>伦敦（London）</strong>、<strong>伊斯坦布尔（Istanbul）</strong> 等过去的升级。它是以太坊 <strong>EIP-4844</strong> 提案的一部分，这个提案被称为 <strong>“Proto-Danksharding”</strong>，旨在提高以太坊的可扩展性。</p>
<h3 id="Cancun-升级的核心目标："><a href="#Cancun-升级的核心目标：" class="headerlink" title="Cancun 升级的核心目标："></a><strong>Cancun 升级的核心目标：</strong></h3><ol>
<li><p><strong>提高可扩展性</strong>：</p>
<ul>
<li><strong>Cancun</strong> 的主要目的是 <strong>扩展以太坊</strong> 的处理能力，尤其是通过改进 <strong>数据存储</strong> 和 <strong>交易处理</strong> 的方式，进一步降低交易成本。</li>
<li>其中最重要的技术之一是 <strong>EIP-4844</strong>，它提出了 <strong>Proto-Danksharding</strong>，通过引入 <strong>便宜的交易数据</strong>，改善了以太坊的扩展性。</li>
</ul>
</li>
<li><p><strong>Proto-Danksharding</strong>：</p>
<ul>
<li><strong>Proto-Danksharding</strong> 是一种分片技术，旨在通过让不同的数据片段在网络中并行处理，提升以太坊处理交易的能力。EIP-4844 提供了一种早期实现分片的方法，目的是为未来的 <strong>Danksharding</strong> 做准备。</li>
<li><strong>EIP-4844</strong> 引入了新的数据格式，称为 <strong>“blobs”</strong>，它可以将大量的交易数据批量打包，并以低廉的费用在以太坊网络上进行处理。</li>
</ul>
</li>
<li><p><strong>提高交易效率和降低费用</strong>：</p>
<ul>
<li>通过 <strong>Proto-Danksharding</strong>，以太坊将能够更高效地处理大量的交易，从而 <strong>降低交易费用</strong>，这对以太坊的 <strong>去中心化金融（DeFi）</strong> 和 <strong>NFT</strong> 市场至关重要。</li>
</ul>
</li>
</ol>
<h3 id="Cancun-升级与以太坊的未来："><a href="#Cancun-升级与以太坊的未来：" class="headerlink" title="Cancun 升级与以太坊的未来："></a><strong>Cancun 升级与以太坊的未来</strong>：</h3><ul>
<li><strong>Cancun</strong> 升级是以太坊长期扩展计划的一部分，预计会为以太坊带来更强的 <strong>可扩展性</strong> 和更低的 <strong>交易费用</strong>。它为未来更全面的 <strong>Danksharding</strong> 升级铺平了道路。</li>
<li>该升级将在 <strong>以太坊 2.0（即合并后）</strong> 的基础上进一步优化，以太坊网络将能够支持更多的用户和更高频率的交易，推动以太坊成为全球去中心化应用的基础设施。</li>
</ul>
<h3 id="总结：-2"><a href="#总结：-2" class="headerlink" title="总结："></a><strong>总结</strong>：</h3><p><strong>Cancun</strong> 是以太坊网络的一次升级，主要聚焦于提高可扩展性、降低交易费用，并为未来的 <strong>Danksharding</strong>（分片技术）打下基础。它通过引入 <strong>Proto-Danksharding</strong> 和 <strong>EIP-4844</strong>，使得以太坊能处理更多的交易数据，提高性能和降低成本，提升网络的效率。</p>
<h1 id="问题四：-Mocha是什么？"><a href="#问题四：-Mocha是什么？" class="headerlink" title="问题四： Mocha是什么？"></a>问题四： Mocha是什么？</h1><p><strong>Mocha</strong> 是一个流行的 <strong>JavaScript 测试框架</strong>，用于编写和执行 <strong>单元测试</strong>、<strong>集成测试</strong> 和 <strong>功能测试</strong>。它的主要特点是 <strong>灵活性</strong>、<strong>易用性</strong> 和 <strong>可扩展性</strong>，使得开发者能够方便地组织和执行测试用例，确保代码的正确性。</p>
<h3 id="Mocha-的主要功能："><a href="#Mocha-的主要功能：" class="headerlink" title="Mocha 的主要功能："></a><strong>Mocha 的主要功能</strong>：</h3><ol>
<li><p><strong>测试框架</strong>：</p>
<ul>
<li>Mocha 提供了一个结构化的测试环境，允许你编写和执行各种测试。它提供了一个简洁的 API，用于定义和组织测试用例。</li>
</ul>
</li>
<li><p><strong>支持异步测试</strong>：</p>
<ul>
<li>Mocha 支持异步测试，非常适合处理需要等待回调、Promises 或 <code>async/await</code> 的异步操作（如文件 I&#x2F;O、网络请求等）。</li>
</ul>
</li>
<li><p><strong>断言支持</strong>：</p>
<ul>
<li>Mocha 本身不包含断言库，但可以与多种断言库（如 <strong>Chai</strong>）配合使用，开发者可以通过它来验证代码行为。</li>
</ul>
</li>
<li><p><strong>钩子（Hooks）</strong>：</p>
<ul>
<li>Mocha 提供了 <strong>钩子</strong>（如 <code>before()</code>, <code>after()</code>, <code>beforeEach()</code>, <code>afterEach()</code>），可以在测试运行前后执行特定的初始化和清理操作，确保每个测试的独立性。</li>
</ul>
</li>
<li><p><strong>多种报告格式</strong>：</p>
<ul>
<li>Mocha 支持不同的输出格式，可以生成详细的报告或简单的摘要，帮助开发者查看测试结果。</li>
</ul>
</li>
</ol>
<h3 id="常见的-Mocha-术语："><a href="#常见的-Mocha-术语：" class="headerlink" title="常见的 Mocha 术语："></a><strong>常见的 Mocha 术语</strong>：</h3><ol>
<li><p><strong>describe</strong>：用来描述一个测试套件，通常包含多个测试用例（<code>it</code>）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;Math functions&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 测试用例</span><br>&#125;);<br></code></pre></div></td></tr></table></figure>
</li>
<li><p><strong>it</strong>：用来定义一个具体的测试用例。</p>
<figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should add two numbers correctly&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 测试代码</span><br>&#125;);<br></code></pre></div></td></tr></table></figure>
</li>
<li><p><strong>before() &#x2F; after() &#x2F; beforeEach() &#x2F; afterEach()</strong>：</p>
<ul>
<li><strong>before</strong>：在所有测试用例执行之前运行一次。</li>
<li><strong>after</strong>：在所有测试用例执行之后运行一次。</li>
<li><strong>beforeEach</strong>：在每个测试用例执行之前运行。</li>
<li><strong>afterEach</strong>：在每个测试用例执行之后运行。</li>
</ul>
</li>
</ol>
<h3 id="Mocha-示例："><a href="#Mocha-示例：" class="headerlink" title="Mocha 示例："></a><strong>Mocha 示例</strong>：</h3><figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-comment">// 引入 Mocha 和 Chai</span><br><span class="hljs-keyword">const</span> &#123; expect &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;chai&#x27;</span>);<br><span class="hljs-keyword">const</span> &#123; sum, subtract &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./math&#x27;</span>);  <span class="hljs-comment">// 假设这是你要测试的函数</span><br><br><span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;Math Functions&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;sum&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should add two numbers correctly&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">sum</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">3</span>);<br>        &#125;);<br>    &#125;);<br><br>    <span class="hljs-title function_">describe</span>(<span class="hljs-string">&#x27;subtract&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title function_">it</span>(<span class="hljs-string">&#x27;should subtract two numbers correctly&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">subtract</span>(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">2</span>);<br>        &#125;);<br>    &#125;);<br>&#125;);<br></code></pre></div></td></tr></table></figure>

<h3 id="Mocha-的运行方式："><a href="#Mocha-的运行方式：" class="headerlink" title="Mocha 的运行方式："></a><strong>Mocha 的运行方式</strong>：</h3><ul>
<li><p>Mocha 可以通过命令行执行，通常和 <strong>Chai</strong>（断言库）一起使用。你可以在终端中运行以下命令来执行 Mocha 测试：</p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">npx mocha<br></code></pre></div></td></tr></table></figure></li>
</ul>
<h3 id="Mocha-的优势："><a href="#Mocha-的优势：" class="headerlink" title="Mocha 的优势："></a><strong>Mocha 的优势</strong>：</h3><ol>
<li><strong>简洁易用</strong>：Mocha 提供了非常简单且直观的 API，便于上手，适合初学者。</li>
<li><strong>强大的社区支持</strong>：作为 JavaScript 测试领域的老牌框架，Mocha 有着广泛的社区支持和大量的插件。</li>
<li><strong>异步支持</strong>：Mocha 对异步操作支持良好，适合现代 JavaScript 应用程序，尤其是在处理网络请求、文件操作等异步代码时。</li>
<li><strong>与其他工具兼容</strong>：Mocha 可以与 <strong>Chai</strong>、<strong>Sinon</strong> 等断言库和模拟库配合使用，支持更复杂的测试需求。</li>
</ol>
<h3 id="总结：-3"><a href="#总结：-3" class="headerlink" title="总结："></a><strong>总结</strong>：</h3><p><strong>Mocha</strong> 是一个功能强大的 <strong>JavaScript 测试框架</strong>，用于组织和执行测试。它支持异步操作，能够和各种断言库（如 Chai）兼容，适合用于测试 Web 应用、Node.js 服务和其他 JavaScript 项目。Mocha 简单易用，并且在社区中有很高的普及率。</p>
<h1 id="hardhat的使用"><a href="#hardhat的使用" class="headerlink" title="hardhat的使用"></a>hardhat的使用</h1><p>安装完成后，您将拥有一个功能齐全的 Hardhat 3 项目。要验证所有设置是否正确，请运行<br><code>npx hardhat --help</code><br><img src="/2025/11/19/63782/1.png"></p>
<p>要对您的项目进行完整测试运行，请运行： npx hardhat test<br><img src="/2025/11/19/63782/2.png"></p>
<p>你理解得基本是对的，但我可以帮助你更准确地解读 <code>npx hardhat test</code> 这条命令的含义和流程。</p>
<h3 id="npx-hardhat-test-的含义："><a href="#npx-hardhat-test-的含义：" class="headerlink" title="npx hardhat test 的含义："></a><strong><code>npx hardhat test</code> 的含义</strong>：</h3><ul>
<li><p><strong><code>npx</code></strong>：<code>npx</code> 是一个包执行工具，用于直接执行在 <code>node_modules</code> 目录中的包，或者执行安装在全局的包。在这里，它用于执行本地安装的 <strong>Hardhat</strong>。</p>
</li>
<li><p><strong><code>hardhat test</code></strong>：这是 Hardhat 提供的一个命令，用于执行合约的 <strong>自动化测试</strong>。这个命令会自动查找你的测试文件并运行它们。Hardhat 会编译你的 Solidity 合约，运行测试，并输出结果。</p>
</li>
</ul>
<h3 id="详细执行流程："><a href="#详细执行流程：" class="headerlink" title="详细执行流程："></a><strong>详细执行流程</strong>：</h3><ol>
<li><p><strong>编译 Solidity 合约</strong>：</p>
<ul>
<li><p><strong>Hardhat</strong> 使用 Solidity 编译器（<code>solc</code>）来编译位于 <code>contracts</code> 目录下的 Solidity 合约文件。在你的输出中：</p>
<figure class="highlight text"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs text">Compiled 1 Solidity file with solc 0.8.28 (evm target: cancun)<br></code></pre></div></td></tr></table></figure>

<p>这表示 <strong>Hardhat</strong> 使用 <code>solc</code> 编译器的版本 0.8.28 编译了一个 Solidity 文件，目标是 <strong>EVM (Ethereum Virtual Machine)</strong>，并且选择了 <strong>Cancun</strong> 作为 EVM 目标（Cancun 是以太坊升级的一部分，可能与 EVM 相关的改进有关）。</p>
</li>
</ul>
</li>
<li><p><strong>编译 Solidity 测试文件</strong>：</p>
<ul>
<li><p>如果你的项目中有 Solidity 测试文件，Hardhat 会对这些文件进行编译。在你的输出中：</p>
<figure class="highlight text"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs text">Compiled 1 Solidity test file with solc 0.8.28 (evm target: cancun)<br></code></pre></div></td></tr></table></figure>

<p>这表示除了正常的合约文件外，Hardhat 还编译了一个 Solidity 测试文件。</p>
</li>
</ul>
</li>
<li><p><strong>运行 Solidity 测试</strong>：</p>
<ul>
<li><p><strong>Solidity 测试</strong> 是直接用 Solidity 编写的，通常用于测试合约的逻辑。Hardhat 会运行这些 Solidity 编写的测试，并输出结果。比如在你的输出中：</p>
<figure class="highlight text"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs text">Running Solidity tests<br></code></pre></div></td></tr></table></figure>

<p>然后显示通过的测试：</p>
<figure class="highlight text"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs text">3 passing<br></code></pre></div></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>运行 JavaScript 测试（Node.js 测试）</strong>：</p>
<ul>
<li><p><strong>Hardhat</strong> 默认也支持使用 <strong>JavaScript 测试框架</strong>（例如 Mocha）来测试 Solidity 合约的行为。在你的输出中：</p>
<figure class="highlight text"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs text">Running node:test tests<br></code></pre></div></td></tr></table></figure>

<p>这表示正在运行用 <strong>Node.js 和 Mocha</strong> 写的测试，这些测试用于验证合约的逻辑、事件等行为。</p>
<p>你在输出中看到的测试通过结果：</p>
<figure class="highlight text"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs text">✔ Should emit the Increment event when calling the inc() function<br>✔ The sum of the Increment events should match the current value<br></code></pre></div></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h3 id="总结：-4"><a href="#总结：-4" class="headerlink" title="总结："></a><strong>总结</strong>：</h3><ul>
<li><code>npx hardhat test</code> 是用来运行 <strong>Solidity 测试和 JavaScript 测试</strong> 的命令。</li>
<li><strong>Solidity 测试</strong>：是使用 Solidity 编写的合约测试，通常用于验证合约功能是否按预期工作。</li>
<li><strong>Node.js 测试（JavaScript 测试）</strong>：是用 JavaScript（通常配合 Mocha 或 Chai）编写的测试，主要用于测试合约部署后与区块链交互的行为（如事件、状态变化等）。</li>
</ul>
<p>所以，<strong><code>npx hardhat test</code></strong> 命令的作用是：</p>
<ol>
<li>编译你在 <code>contracts</code> 目录下的 Solidity 合约和测试文件。</li>
<li>运行这些 <strong>Solidity 测试</strong> 和 <strong>Node.js 测试</strong>，并输出测试结果。</li>
</ol>
<h1 id="问题五：-ethers-js-是什么？"><a href="#问题五：-ethers-js-是什么？" class="headerlink" title="问题五： ethers.js 是什么？"></a>问题五： ethers.js 是什么？</h1><p><strong>Ethers.js</strong> 是一个轻量级的 JavaScript 库，用于与 Ethereum 区块链进行交互。它提供了一种简便的方式来连接 Ethereum 节点、发送交易、读取区块链上的数据，并与智能合约进行交互。</p>
<p>Ethers.js 的主要特点包括：</p>
<ol>
<li><p><strong>轻量级</strong>：Ethers.js 的设计目标之一就是保持小巧，并且不依赖于大型的第三方库。</p>
</li>
<li><p><strong>兼容性</strong>：它可以在浏览器、Node.js 和其他 JavaScript 环境中运行，支持与以太坊网络的各种交互。</p>
</li>
<li><p><strong>简洁的 API</strong>：Ethers.js 提供了一个简单且易于理解的 API，使开发者能够轻松地与 Ethereum 区块链进行交互。</p>
</li>
<li><p><strong>安全性</strong>：Ethers.js 提供了强大的工具来生成、管理和签名 Ethereum 密钥对，它有助于提升钱包管理的安全性。</p>
</li>
<li><p><strong>与智能合约的交互</strong>：通过 Ethers.js，开发者可以轻松地部署、调用和监听智能合约事件。</p>
</li>
<li><p><strong>支持钱包连接</strong>：Ethers.js 可以与硬件钱包、MetaMask 等浏览器插件钱包进行集成，支持用户管理账户和交易。</p>
</li>
<li><p><strong>广泛的支持</strong>：支持多种以太坊网络，包括主网、测试网（如 Rinkeby、Ropsten 等），以及自定义网络。</p>
</li>
</ol>
<p>举个例子，使用 Ethers.js 发送一笔交易的代码可能是这样的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> &#123; ethers &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;ethers&quot;</span>);<br><br><span class="hljs-comment">// 设置一个提供者（Provider），例如使用 Etherscan 或 Infura</span><br><span class="hljs-keyword">const</span> provider = <span class="hljs-keyword">new</span> ethers.<span class="hljs-title class_">JsonRpcProvider</span>(<span class="hljs-string">&quot;https://mainnet.infura.io/v3/YOUR_INFURA_PROJECT_ID&quot;</span>);<br><br><span class="hljs-comment">// 创建一个钱包实例</span><br><span class="hljs-keyword">const</span> wallet = <span class="hljs-keyword">new</span> ethers.<span class="hljs-title class_">Wallet</span>(<span class="hljs-string">&quot;YOUR_PRIVATE_KEY&quot;</span>, provider);<br><br><span class="hljs-comment">// 发送交易</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendTransaction</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> tx = <span class="hljs-keyword">await</span> wallet.<span class="hljs-title function_">sendTransaction</span>(&#123;<br>        <span class="hljs-attr">to</span>: <span class="hljs-string">&quot;0xRecipientAddress&quot;</span>,<br>        <span class="hljs-attr">value</span>: ethers.<span class="hljs-title function_">parseEther</span>(<span class="hljs-string">&quot;0.1&quot;</span>), <span class="hljs-comment">// 发送 0.1 ETH</span><br>    &#125;);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Transaction hash:&quot;</span>, tx.<span class="hljs-property">hash</span>);<br>&#125;<br><br><span class="hljs-title function_">sendTransaction</span>();<br></code></pre></div></td></tr></table></figure>

<p>Ethers.js 是一个很受欢迎的工具，特别适合开发去中心化应用（dApp），因为它简洁、易用、且功能强大。如果你正在开发 Web3 或以太坊相关的项目，它是一个非常不错的选择！</p>
<h1 id="问题六：-这条命令是什么意思？"><a href="#问题六：-这条命令是什么意思？" class="headerlink" title="问题六： 这条命令是什么意思？"></a>问题六： 这条命令是什么意思？</h1><p><code>npm add --save-dev @nomicfoundation/hardhat-toolbox-viem @nomicfoundation/hardhat-ignition viem</code></p>
<p>这条命令是用来通过 <strong>npm</strong> 安装一组开发依赖项到你的 <strong>Node.js</strong> 项目中，主要用于 <strong>Hardhat</strong> 的开发环境和工具。下面是这条命令的分解和解释：</p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">npm add --save-dev @nomicfoundation/hardhat-toolbox-viem @nomicfoundation/hardhat-ignition viem<br></code></pre></div></td></tr></table></figure>

<h3 id="1-npm-add"><a href="#1-npm-add" class="headerlink" title="1. npm add"></a>1. <strong>npm add</strong></h3><ul>
<li><code>npm add</code> 是安装包的命令，类似于 <code>npm install</code>。它的作用是安装指定的包。</li>
<li><code>--save-dev</code> 参数表示将这些依赖添加到项目的 <strong>devDependencies</strong> 中，也就是将它们标记为开发依赖。开发依赖是指在开发和测试过程中需要的包，但不需要在生产环境中使用。</li>
</ul>
<h3 id="2-nomicfoundation-hardhat-toolbox-viem"><a href="#2-nomicfoundation-hardhat-toolbox-viem" class="headerlink" title="2. @nomicfoundation&#x2F;hardhat-toolbox-viem"></a>2. <strong>@nomicfoundation&#x2F;hardhat-toolbox-viem</strong></h3><ul>
<li>这是一个 Hardhat 的插件包，带有一些工具和功能，旨在支持与 <strong>Viem</strong> 相关的操作。<strong>Viem</strong> 是一个轻量级的 <strong>Ethereum</strong> 客户端库，用于与以太坊区块链交互。</li>
<li>这个包是由 <strong>Nomic Foundation</strong> 提供的，属于 <strong>Hardhat</strong> 的工具箱的一部分，用于增强开发者与以太坊交互的能力。</li>
</ul>
<h3 id="3-nomicfoundation-hardhat-ignition"><a href="#3-nomicfoundation-hardhat-ignition" class="headerlink" title="3. @nomicfoundation&#x2F;hardhat-ignition"></a>3. <strong>@nomicfoundation&#x2F;hardhat-ignition</strong></h3><ul>
<li>这是另一个由 <strong>Nomic Foundation</strong> 提供的 Hardhat 插件，通常用于智能合约的部署和管理，帮助开发者将合约部署到以太坊网络或其他兼容的网络。</li>
<li><code>hardhat-ignition</code> 可以简化与合约部署相关的任务，并集成到 Hardhat 项目中。</li>
</ul>
<h3 id="4-viem"><a href="#4-viem" class="headerlink" title="4. viem"></a>4. <strong>viem</strong></h3><ul>
<li><code>viem</code> 是一个用于与以太坊进行交互的轻量级库，允许开发者通过 JavaScript 进行区块链交互。</li>
<li>这个库可以替代 <strong>web3.js</strong> 或 <strong>ethers.js</strong> 等库，提供更加简洁和高效的方式与以太坊节点交互。</li>
</ul>
<h3 id="总结：-5"><a href="#总结：-5" class="headerlink" title="总结："></a>总结：</h3><p>这条命令的作用是：</p>
<ol>
<li>安装 <strong><code>@nomicfoundation/hardhat-toolbox-viem</code></strong>、<strong><code>@nomicfoundation/hardhat-ignition</code></strong> 和 <strong><code>viem</code></strong> 这些开发工具。</li>
<li>将它们作为开发依赖（<code>--save-dev</code>）添加到项目中，这意味着它们只在开发和测试环境中使用，而不会在生产环境中部署。</li>
</ol>
<p>这些工具将帮助你在 <strong>Hardhat</strong> 项目中与 <strong>Viem</strong> 轻量客户端进行交互，并且提供智能合约的部署支持。</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Web3/">Web3</a>
                    
                      <a class="hover-with-bg" href="/tags/hardhat/">hardhat</a>
                    
                  </div>
                
              </div>
              
                
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/11/19/44607.html">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">我的生平（二十四）</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/11/18/40891.html">
                        <span class="hidden-mobile">foundry编译运行solidity</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


            

                
                  <a id="scroll-top-button" href="#" role="button">
                    <i class="iconfont icon-arrowup" aria-hidden="true"></i>
                  </a>
                  

                    

                          
      </main>

      <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://whale3070.github.io/" target="_blank" rel="nofollow noopener"><span>Whale3070</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->




  



  <script  src="https://cdn.staticfile.org/tocbot/4.12.0/tocbot.min.js" ></script>





  <script  src="https://cdn.staticfile.org/anchor-js/4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


<link href="/pagefind/pagefind-ui.css" rel="stylesheet">
  <script src="/pagefind/pagefind-ui.js"></script>
  <style>
    /* 搜索框配色适配 */
    #search { margin-top: 2rem; }
    [data-user-color-scheme='dark'] .pagefind-ui {
      --pagefind-ui-primary: #eeeeee;
      --pagefind-ui-text: #eeeeee;
      --pagefind-ui-background: #151515;
      --pagefind-ui-border: #333;
    }
  </style>
    </body>

  </html>