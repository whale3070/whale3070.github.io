

  <!DOCTYPE html>
  <html lang="zh-CN" data-default-color-scheme=&#34;dark&#34; >
  <style>
    .text1
    {
    text-shadow: 0px 0px 2px #f2f3f2;
    }
    </style>

  

<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/null">
  <link rel="icon" type="image/png" href="/null">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  <title>remix编译运行solidity6 - whale3070&#39;s blog</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"192.168.126.129","root":"/","version":"1.8.7","typing":{"enable":false,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 7.3.0"></head>


    <body>
      <header style="height: 70vh;">
        <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>InfoSec learning</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/search/">
                <i class="iconfont icon-search"></i>
                搜索
              </a>
            </li>
          
        
        
        
          
        
      </ul>
    </div>
  </div>
</nav>

          <div class="banner" id="banner" false
            style="background: url('/img/default.png') no-repeat center center;
              background-size: cover;">
              <div class="full-bg-img">
                <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
                  <div class="page-header text-center fade-in-up">
                    <span class="h2 text1" id="subtitle" title="remix编译运行solidity6">
                      
                        remix编译运行solidity6
                      
                    </span>
        
                    
                      <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2025-11-13 13:46" pubdate>
        2025年11月13日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      4.5k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      52
       分钟
    </span>
  

  
  
</div>

                    
                  </div>
                    
                  </div>
                  
                </div>
              </div>
          </div>
      </header>

      <main>
        
          

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto" data-pagefind-body>
            <!-- SEO header -->
            <h1 style="display: none">remix编译运行solidity6</h1>
            
            <div class="markdown-body">
              <p>昨天学了合约的继承。contract A is B {}<br>单一继承，多层继承，多重继承。</p>
<h1 id="什么是msg-sender-msg-value-block-timestamp-tx-origin-全局变量"><a href="#什么是msg-sender-msg-value-block-timestamp-tx-origin-全局变量" class="headerlink" title="什么是msg.sender, msg.value, block.timestamp, tx.origin 全局变量"></a>什么是msg.sender, msg.value, block.timestamp, tx.origin 全局变量</h1><p>你问的这些都是 <strong>Solidity</strong> 中的全局变量（Global Variables），它们随合约自动提供，无需自己定义，主要用于获取交易或区块的信息。下面我详细解释每一个，并给出例子：</p>
<h2 id="1️⃣-msg-sender"><a href="#1️⃣-msg-sender" class="headerlink" title="1️⃣ msg.sender"></a>1️⃣ <code>msg.sender</code></h2><ul>
<li><strong>含义</strong>：发起当前调用（call&#x2F;transaction）的地址。</li>
<li><strong>类型</strong>：<code>address</code></li>
<li><strong>用途</strong>：通常用于判断谁在调用合约，做权限控制（比如只有合约所有者能调用某函数）。</li>
<li><strong>例子</strong>：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">pragma solidity ^0.8.0;<br><br>contract Example &#123;<br>    address public owner;<br><br>    constructor() &#123;<br>        owner = msg.sender;  // 部署合约的人是owner<br>    &#125;<br><br>    function restricted() public view returns(string memory) &#123;<br>        require(msg.sender == owner, &quot;Not authorized&quot;);<br>        return &quot;You are the owner&quot;;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><img src="/2025/11/13/44244/1.png" srcset="/img/loading.gif"></p>
<blockquote>
<p>注意：如果是合约A调用合约B的函数，那么 <code>msg.sender</code> 是 <strong>调用合约B的合约A地址</strong>。</p>
</blockquote>
<h2 id="2️⃣-msg-value"><a href="#2️⃣-msg-value" class="headerlink" title="2️⃣ msg.value"></a>2️⃣ <code>msg.value</code></h2><ul>
<li><strong>含义</strong>：当前交易或调用中附带的以太币数量（单位是 wei）。</li>
<li><strong>类型</strong>：<code>uint</code></li>
<li><strong>用途</strong>：用于接收 ETH，比如支付、购买或质押。</li>
<li><strong>例子</strong>：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">pragma solidity ^0.8.0;<br><br>contract PayableExample &#123;<br>    function pay() public payable &#123;<br>        require(msg.value &gt;= 1 ether, &quot;Need at least 1 ETH&quot;);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<blockquote>
<p>注意：<code>msg.value</code> 只能在 <code>payable</code> 函数中有意义。</p>
</blockquote>
<h2 id="3️⃣-block-timestamp"><a href="#3️⃣-block-timestamp" class="headerlink" title="3️⃣ block.timestamp"></a>3️⃣ <code>block.timestamp</code></h2><ul>
<li><strong>含义</strong>：当前区块的时间戳（seconds since Unix epoch）。</li>
<li><strong>类型</strong>：<code>uint</code></li>
<li><strong>用途</strong>：可用于限制时间的操作，比如限时活动、锁仓、投票截止时间等。</li>
<li><strong>例子</strong>：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">pragma solidity ^0.8.0;<br><br>contract TimeExample &#123;<br>    uint public endTime;<br><br>    constructor() &#123;<br>        endTime = block.timestamp + 1 days; // 设定1天后结束<br>    &#125;<br><br>    function isOver() public view returns(bool) &#123;<br>        return block.timestamp &gt;= endTime;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<blockquote>
<p>⚠️ 区块时间是矿工设定的，有一定容忍度，不应用于极度精确的计时。</p>
</blockquote>
<h2 id="4️⃣-tx-origin"><a href="#4️⃣-tx-origin" class="headerlink" title="4️⃣ tx.origin"></a>4️⃣ <code>tx.origin</code></h2><ul>
<li><strong>含义</strong>：发起最初交易的外部账户（EOA），不是中间合约。</li>
<li><strong>类型</strong>：<code>address</code></li>
<li><strong>用途</strong>：一般不推荐使用做权限控制，因为容易被 <strong>钓鱼合约攻击（phishing via contract call）</strong>。</li>
<li><strong>例子</strong>：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">pragma solidity ^0.8.0;<br><br>contract OriginExample &#123;<br>    address public owner;<br><br>    constructor() &#123;<br>        owner = tx.origin;  // 部署合约的人<br>    &#125;<br><br>    function onlyOwner() public view returns(string memory) &#123;<br>        require(tx.origin == owner, &quot;Not owner&quot;);<br>        return &quot;You are the owner&quot;;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<blockquote>
<p>如果合约A调用合约B，<code>msg.sender</code> 是合约A，<code>tx.origin</code> 才是最初发起交易的外部地址。</p>
</blockquote>
<p>在remix中点击编译，显示黄色感叹号是什么意思?<br>在 <strong>Remix</strong> 中，黄色感叹号 ⚠️ 通常表示 <strong>警告（Warning）</strong>，不是错误（Error），合约仍然可以编译和部署，但编译器提醒你可能存在潜在风险或者不推荐的用法。</p>
<p>针对你这个合约，黄色感叹号很可能是因为 <strong><code>tx.origin</code> 的使用</strong>。</p>
<h3 id="原因："><a href="#原因：" class="headerlink" title="原因："></a>原因：</h3><ul>
<li><strong>Solidity 编译器警告</strong>：</li>
</ul>
<blockquote>
<p>“Using <code>tx.origin</code> for authorization is discouraged.”</p>
</blockquote>
<ul>
<li><p>意思是 <strong>不推荐用 <code>tx.origin</code> 做权限控制</strong>，因为它容易被攻击：</p>
<ul>
<li>攻击者可以设计一个合约，让用户去调用，然后通过 <code>tx.origin</code> 绕过权限检查。</li>
</ul>
</li>
<li><p>正确的做法是使用 <code>msg.sender</code> 来判断调用者。</p>
</li>
</ul>
<h3 id="示例说明"><a href="#示例说明" class="headerlink" title="示例说明"></a>示例说明</h3><p>当前写法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">require(tx.origin == owner, &quot;Not owner&quot;);<br></code></pre></div></td></tr></table></figure>

<p>风险：</p>
<ol>
<li>用户 A 调用恶意合约 M。</li>
<li>恶意合约 M 调用你的 <code>OriginExample</code>。</li>
<li><code>tx.origin</code> 仍然是 A，权限检查通过，而实际上是 M 在调用你的合约。</li>
</ol>
<h3 id="推荐做法"><a href="#推荐做法" class="headerlink" title="推荐做法"></a>推荐做法</h3><p>改成用 <code>msg.sender</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">require(msg.sender == owner, &quot;Not owner&quot;);<br></code></pre></div></td></tr></table></figure>

<ul>
<li>这样只允许 <strong>直接调用你的合约的地址</strong>，更安全。</li>
</ul>
<p>所以，黄色感叹号提醒你：</p>
<ul>
<li>合约可以运行 ✅</li>
<li>但是用 <code>tx.origin</code> 做权限控制有安全风险 ⚠️</li>
</ul>
<p>如果你想，我可以帮你画一张 <strong><code>msg.sender</code> vs <code>tx.origin</code> 调用链图</strong>，让你直观理解为什么 <code>tx.origin</code> 不安全。</p>
<p>你希望我画吗？</p>
<h3 id="✅-总结对比"><a href="#✅-总结对比" class="headerlink" title="✅ 总结对比"></a>✅ 总结对比</h3><p>| 变量                | 类型      | 含义           | 常用场景          |<br>| <code>msg.sender</code>      | address | 调用当前函数的直接发起者 | 权限控制、交易调用     |<br>| <code>msg.value</code>       | uint    | 附带的 ETH 数量   | 支付、质押         |<br>| <code>block.timestamp</code> | uint    | 当前区块时间戳（秒）   | 限时、锁仓、投票截止    |<br>| <code>tx.origin</code>       | address | 最初发起交易的外部账户  | 不推荐权限控制，可能被攻击 |</p>
<p>如果你愿意，我可以画一张 <strong>调用链图</strong>，直观展示 <code>msg.sender</code> 和 <code>tx.origin</code> 的区别，让你一眼就懂。</p>
<p>你希望我画吗？</p>
<h1 id="什么是fallback"><a href="#什么是fallback" class="headerlink" title="什么是fallback"></a>什么是fallback</h1><p>好的，我们来系统回顾一下 <strong>Solidity 中的 <code>fallback</code> 函数</strong>，帮你把上周学的内容梳理清楚。</p>
<h2 id="1️⃣-什么是-fallback-函数？"><a href="#1️⃣-什么是-fallback-函数？" class="headerlink" title="1️⃣ 什么是 fallback 函数？"></a>1️⃣ 什么是 fallback 函数？</h2><p><code>fallback</code> 是 Solidity 中的 <strong>特殊函数</strong>，它<strong>没有名字、没有参数（也可以有 <code>bytes calldata</code>）</strong>，用于在以下情况被触发：</p>
<ol>
<li>调用合约时调用了 <strong>不存在的函数</strong></li>
<li>调用合约时 <strong>没有传递数据（data）或直接发送 ETH</strong></li>
<li>没有匹配到其他 <code>receive</code> 函数</li>
</ol>
<blockquote>
<p>换句话说，<code>fallback</code> 是合约的 <strong>“兜底函数”</strong>，用来处理意外调用或接收 ETH。</p>
</blockquote>
<h2 id="2️⃣-特点"><a href="#2️⃣-特点" class="headerlink" title="2️⃣ 特点"></a>2️⃣ 特点</h2><p>| 特性   | 描述                                 |<br>| 名字   | 必须是 <code>fallback</code>                     |<br>| 参数   | 可以无参数，也可以用 <code>bytes calldata</code> 捕获调用数据 |<br>| 返回值  | 不返回任何值                             |<br>| 可支付性 | 默认不可接收 ETH，需要加 <code>payable</code>           |<br>| 调用时机 | 当没有其他函数匹配时被触发                      |</p>
<h2 id="3️⃣-语法示例"><a href="#3️⃣-语法示例" class="headerlink" title="3️⃣ 语法示例"></a>3️⃣ 语法示例</h2><h3 id="①-基本-fallback-函数（不可接收-ETH）"><a href="#①-基本-fallback-函数（不可接收-ETH）" class="headerlink" title="① 基本 fallback 函数（不可接收 ETH）"></a>① 基本 fallback 函数（不可接收 ETH）</h3><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">pragma solidity ^0.8.0;<br><br>contract FallbackExample &#123;<br>    event FallbackCalled(address sender, uint value, bytes data);<br><br>    fallback() external &#123;<br>        emit FallbackCalled(msg.sender, msg.value, msg.data);<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<ul>
<li><code>msg.sender</code>：谁调用了这个合约</li>
<li><code>msg.value</code>：调用时发送的 ETH（这里如果没有 <code>payable</code> 会报错）</li>
<li><code>msg.data</code>：调用时传入的数据</li>
</ul>
<h3 id="②-可接收-ETH-的-fallback"><a href="#②-可接收-ETH-的-fallback" class="headerlink" title="② 可接收 ETH 的 fallback"></a>② 可接收 ETH 的 fallback</h3><figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">pragma solidity ^0.8.0;<br><br>contract FallbackExample &#123;<br>    event FallbackCalled(address sender, uint value);<br><br>    fallback() external payable &#123;<br>        emit FallbackCalled(msg.sender, msg.value);<br>    &#125;<br><br>    function getBalance() public view returns(uint) &#123;<br>        return address(this).balance;<br>    &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<ul>
<li>如果有人直接 <code>send ETH</code> 给合约，或者调用不存在的函数，都会触发 <code>fallback</code> 并记录事件。</li>
</ul>
<h2 id="4️⃣-receive-vs-fallback"><a href="#4️⃣-receive-vs-fallback" class="headerlink" title="4️⃣ receive() vs fallback()"></a>4️⃣ receive() vs fallback()</h2><p>| 函数           | 触发条件                            | 可接收 ETH         | 用途         |<br>| <code>receive()</code>  | 调用时 <strong>只发送 ETH</strong>，无 data          | ✅               | 专门用来接收 ETH |<br>| <code>fallback()</code> | 调用时 <strong>函数不存在</strong> 或 <strong>receive 不匹配</strong> | 可选（加 <code>payable</code>） | 兜底处理调用     |</p>
<h3 id="5️⃣-调用顺序示意"><a href="#5️⃣-调用顺序示意" class="headerlink" title="5️⃣ 调用顺序示意"></a>5️⃣ 调用顺序示意</h3><ol>
<li><p>用户直接 <code>send ETH</code>：</p>
<ul>
<li>如果存在 <code>receive() payable</code> → 调用 receive</li>
<li>否则 <code>fallback() payable</code> → 调用 fallback</li>
</ul>
</li>
<li><p>调用不存在函数：</p>
<ul>
<li>fallback 被触发</li>
</ul>
</li>
<li><p>调用有 data 但没有函数匹配：</p>
<ul>
<li>fallback 被触发</li>
</ul>
</li>
</ol>
<p>如果你想，我可以帮你画一张 <strong>fallback &#x2F; receive &#x2F; msg.data 调用流程图</strong>，让你记忆一眼就懂。</p>
<h1 id="为什么要用solidity去写小型会员系统，而不用java去写。用solidity有什么特别的优势吗"><a href="#为什么要用solidity去写小型会员系统，而不用java去写。用solidity有什么特别的优势吗" class="headerlink" title="为什么要用solidity去写小型会员系统，而不用java去写。用solidity有什么特别的优势吗"></a>为什么要用solidity去写小型会员系统，而不用java去写。用solidity有什么特别的优势吗</h1><p>下面我用<strong>非常实用、行业视角</strong>告诉你：为什么在这个练习里要用 <strong>Solidity</strong> 写一个“小型会员系统”，而不是用 Java——以及 Solidity 在哪些场景才真正有优势。</p>
<h2 id="✅-1-为什么学习时用-Solidity-写“会员系统”？"><a href="#✅-1-为什么学习时用-Solidity-写“会员系统”？" class="headerlink" title="✅ 1. 为什么学习时用 Solidity 写“会员系统”？"></a>✅ 1. 为什么学习时用 Solidity 写“会员系统”？</h2><p>你学习 Solidity 的目标是 <strong>成为 Smart Contract Auditor &#x2F; DeFi 工程师</strong>。</p>
<p>Solidity 的训练方式和传统编程不一样：</p>
<p>👉 <strong>Solidity 最难的是“状态管理 + 数据结构” + “全链透明 + 不可修改”</strong></p>
<p>而一个“会员系统”刚好可以让你练习：</p>
<p>| 会员系统内容       | Solidity的关键点        |<br>| 用户地址         | <code>address</code>、<code>mapping</code> |<br>| 积分           | <code>uint</code>、权限控制         |<br>| 等级 enum      | 枚举 &#x2F; 状态机思维          |<br>| 存储结构 struct  | on-chain data model |<br>| 条件检查 require | 安全性、访问控制            |<br>| 数据无法随意删除     | 区块链不可逆设计            |<br>| 不同用户操作       | msg.sender、权限体系     |</p>
<p><strong>这和 Java 完全不是一个思维模型。</strong></p>
<p>用 Java 做会员系统是 <strong>Web2</strong> 逻辑；</p>
<p>用 Solidity 做会员系统是 <strong>懂不懂链上开发的分水岭</strong>。</p>
<h2 id="✅-2-Solidity-开发会员系统-vs-Java-的根本差异"><a href="#✅-2-Solidity-开发会员系统-vs-Java-的根本差异" class="headerlink" title="✅ 2. Solidity 开发会员系统 vs Java 的根本差异"></a>✅ 2. Solidity 开发会员系统 vs Java 的根本差异</h2><h4 id="🌐-Java：中心化后台"><a href="#🌐-Java：中心化后台" class="headerlink" title="🌐 Java：中心化后台"></a>🌐 Java：中心化后台</h4><ul>
<li>你部署一个后端服务</li>
<li>你随时能改数据库、改用户积分、改等级</li>
<li>数据库可以随时篡改</li>
<li>有管理员超级权限</li>
<li>没有 Gas、没有不可变状态</li>
</ul>
<p><strong>这是 Web2</strong>。</p>
<h4 id="🧱-Solidity：去中心化的不可变程序"><a href="#🧱-Solidity：去中心化的不可变程序" class="headerlink" title="🧱 Solidity：去中心化的不可变程序"></a>🧱 Solidity：去中心化的不可变程序</h4><p>链上会员系统会具有传统后台完全没有的属性：</p>
<h6 id="⛓️-1-数据公开透明"><a href="#⛓️-1-数据公开透明" class="headerlink" title="⛓️ 1. 数据公开透明"></a>⛓️ <strong>1. 数据公开透明</strong></h6><p>任何人都能验证积分、等级是否真实，没有后台造假。</p>
<h6 id="🔐-2-状态不可篡改"><a href="#🔐-2-状态不可篡改" class="headerlink" title="🔐 2. 状态不可篡改"></a>🔐 <strong>2. 状态不可篡改</strong></h6><p>管理员不能随便改积分必须写逻辑：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">require(msg.sender == owner, &quot;Only owner&quot;);<br></code></pre></div></td></tr></table></figure>

<h6 id="💰-3-操作需要-Gas，有真实经济成本"><a href="#💰-3-操作需要-Gas，有真实经济成本" class="headerlink" title="💰 3. 操作需要 Gas，有真实经济成本"></a>💰 <strong>3. 操作需要 Gas，有真实经济成本</strong></h6><p>设计必须严谨，不能写低效的循环，否则用户付费。</p>
<h6 id="🤖-4-合约一旦部署不能随意改"><a href="#🤖-4-合约一旦部署不能随意改" class="headerlink" title="🤖 4. 合约一旦部署不能随意改"></a>🤖 <strong>4. 合约一旦部署不能随意改</strong></h6><p>Java 出 bug：修一下 API。<br>Solidity 出 bug：可能直接损失资金并且无法修复（比如 <a target="_blank" rel="noopener" href="https://whale3070.com/2025/11/13/b257522f1a74/#Parity-%E5%86%B7%E9%92%B1%E5%8C%85%E4%BA%8B%E4%BB%B6%E6%98%AF%E4%BB%80%E4%B9%88">Parity 冷钱包事件</a>）。</p>
<h6 id="👥-5-多方无需信任即可共享状态"><a href="#👥-5-多方无需信任即可共享状态" class="headerlink" title="👥 5. 多方无需信任即可共享状态"></a>👥 <strong>5. 多方无需信任即可共享状态</strong></h6><p>这才是区块链系统最强的地方：</p>
<ul>
<li>不同公司可以使用同一个会员系统</li>
<li>无需中心化“数据库管理员”</li>
<li>所有人都能验证积分是否被乱改</li>
</ul>
<p>这是 <strong>Web3 级别的会员系统</strong>，不是 Java 能做到的。</p>
<h2 id="✅-3-那么，Solidity-在真实世界里写会员系统靠谱吗？"><a href="#✅-3-那么，Solidity-在真实世界里写会员系统靠谱吗？" class="headerlink" title="✅ 3. 那么，Solidity 在真实世界里写会员系统靠谱吗？"></a>✅ 3. 那么，Solidity 在真实世界里写会员系统靠谱吗？</h2><p>🌟 <strong>现实中，很多会员系统确实会迁移到链上</strong>，例如：</p>
<ul>
<li>链上积分（NFT-based loyalty）</li>
<li>Starbucks Odyssey（NFT 会员体系）</li>
<li>香港很多 Web3 Loyalty 公司（如 Galxe、OKX loyalty）</li>
</ul>
<p>原因？</p>
<ul>
<li>积分可跨平台流通（Web3 asset）</li>
<li>可交易、可租借、可组合使用</li>
<li>完全不可造假</li>
<li>可跨应用互操作</li>
</ul>
<p><strong>但你现在做这个练习的目的不是做“商业产品”</strong>。</p>
<p>而是为了：</p>
<blockquote>
<p>🔥 把 Solidity 的核心数据结构、状态管理、安全性，一次性全部练熟。</p>
</blockquote>
<h2 id="✅-4-什么时候应该用-Java-vs-Solidity？"><a href="#✅-4-什么时候应该用-Java-vs-Solidity？" class="headerlink" title="✅ 4. 什么时候应该用 Java vs Solidity？"></a>✅ 4. 什么时候应该用 Java vs Solidity？</h2><h6 id="Java-适用："><a href="#Java-适用：" class="headerlink" title="Java 适用："></a>Java 适用：</h6><ul>
<li>中心化后台系统</li>
<li>内部会员积分</li>
<li>数据可修改就好</li>
<li>不需要透明度</li>
</ul>
<h6 id="Solidity-适用："><a href="#Solidity-适用：" class="headerlink" title="Solidity 适用："></a>Solidity 适用：</h6><ul>
<li>链上积分</li>
<li>NFT 会员卡</li>
<li>GameFi 用户等级系统</li>
<li>DAO 成员管理</li>
<li>不可造假、不可信任环境</li>
<li>多公司共享同一套逻辑</li>
<li>需要链上透明账本</li>
</ul>
<p>尤其在 <strong>DeFi &#x2F; Web3 &#x2F; DAO &#x2F; NFT</strong> 中，这种“链上会员系统”非常常见。</p>
<h2 id="🔥-5-用-Solidity-写会员系统-你正在练习审计中最常见的结构"><a href="#🔥-5-用-Solidity-写会员系统-你正在练习审计中最常见的结构" class="headerlink" title="🔥 5. 用 Solidity 写会员系统 &#x3D; 你正在练习审计中最常见的结构"></a>🔥 5. 用 Solidity 写会员系统 &#x3D; 你正在练习审计中最常见的结构</h2><p>以下 3 个是审计报告里最常见的三大模块：</p>
<ol>
<li><strong>mapping</strong></li>
<li><strong>struct</strong></li>
<li><strong>enum 状态机</strong></li>
</ol>
<p>练这个小项目，你会同时学到这些。</p>
<p>这就是为什么要用 Solidity 写，而不是 Java。</p>
<p>因为你的目标是 Web3 工程师 &#x2F; 审计师，必须学会 <strong>链式思维（on-chain mindset）</strong>。</p>
<h1 id="什么是Web3-Loyalty-公司"><a href="#什么是Web3-Loyalty-公司" class="headerlink" title="什么是Web3 Loyalty 公司"></a>什么是Web3 Loyalty 公司</h1><p>下面我用<strong>通俗 + 行业视角 + 可落地案例</strong>解释什么是 <strong>Web3 Loyalty（链上会员忠诚度）公司</strong>，以及为什么这个赛道正在爆发。</p>
<h2 id="🌐-1-什么是-Web3-Loyalty-公司？"><a href="#🌐-1-什么是-Web3-Loyalty-公司？" class="headerlink" title="🌐 1. 什么是 Web3 Loyalty 公司？"></a>🌐 1. 什么是 Web3 Loyalty 公司？</h2><p>一句话：</p>
<blockquote>
<p><strong>用区块链技术，重新做一套“会员体系 &#x2F; 积分系统 &#x2F; 会员卡 &#x2F; 勋章系统”的公司。</strong></p>
</blockquote>
<p>传统 Loyalty &#x3D; 会员积分、储值卡、等级、优惠券<br>Web3 Loyalty &#x3D; 利用 <strong>NFT、代币、链上记录</strong> 做升级版会员体系</p>
<p>重点在：</p>
<ul>
<li>积分&#x2F;会员是 <strong>用户真正持有的资产</strong></li>
<li>可以跨平台使用</li>
<li>不可造假、不被商家随便注销或清零</li>
<li>可以与 DeFi、GameFi、社交网络互通</li>
</ul>
<h2 id="🧭-2-为什么-Web3-Loyalty-会崛起？（行业视角）"><a href="#🧭-2-为什么-Web3-Loyalty-会崛起？（行业视角）" class="headerlink" title="🧭 2. 为什么 Web3 Loyalty 会崛起？（行业视角）"></a>🧭 2. 为什么 Web3 Loyalty 会崛起？（行业视角）</h2><h6 id="✅-传统-Loyalty-的痛点"><a href="#✅-传统-Loyalty-的痛点" class="headerlink" title="✅ 传统 Loyalty 的痛点"></a>✅ 传统 Loyalty 的痛点</h6><ul>
<li>积分只是商家的数据库字段，随时能被清零</li>
<li>商家跑路积分就没了</li>
<li>不能交易、不能转移、不能跨平台</li>
<li>无法证明“忠诚度”</li>
</ul>
<h6 id="🌐-Web3-Loyalty-的优势"><a href="#🌐-Web3-Loyalty-的优势" class="headerlink" title="🌐 Web3 Loyalty 的优势"></a>🌐 Web3 Loyalty 的优势</h6><ul>
<li><strong>链上资产永不作废、永不清零</strong></li>
<li>用户持有“会员等级 NFT”</li>
<li>可跨平台、跨企业共享</li>
<li>用户可以“带着自己的信誉走”</li>
<li>品牌之间合作更容易（NFT &#x3D; 通用证书）</li>
<li>数据透明，可验证忠诚度</li>
<li>积分甚至可以“打包卖掉”或“抵押借款”（疯狂但技术上可行）</li>
</ul>
<p>这就是为什么 Starbucks、Nike、Louis Vuitton、Adidas 全部开始 Web3 Loyalty。</p>
<h2 id="🏢-3-行业内有影响力的-Web3-Loyalty-公司（你以后可能想加入）"><a href="#🏢-3-行业内有影响力的-Web3-Loyalty-公司（你以后可能想加入）" class="headerlink" title="🏢 3. 行业内有影响力的 Web3 Loyalty 公司（你以后可能想加入）"></a>🏢 3. 行业内有影响力的 Web3 Loyalty 公司（你以后可能想加入）</h2><p>下面是 2024–2025 最头部的 Web3 Loyalty 项目：</p>
<h6 id="🔵-1-Galxe（全球最大-Web3-Loyalty-公司）"><a href="#🔵-1-Galxe（全球最大-Web3-Loyalty-公司）" class="headerlink" title="🔵 1. Galxe（全球最大 Web3 Loyalty 公司）"></a>🔵 <strong>1. Galxe（全球最大 Web3 Loyalty 公司）</strong></h6><ul>
<li>你在 Web3 的任务&#x2F;活动都会生成“链上身份”</li>
<li>给到 NFT 勋章，作为你的 Web3 简历</li>
<li>被 Binance、OKX、Polygon、Sui 等大公司采用</li>
</ul>
<h6 id="🟣-2-OKX-Loyalty（港区）"><a href="#🟣-2-OKX-Loyalty（港区）" class="headerlink" title="🟣 2. OKX Loyalty（港区）"></a>🟣 <strong>2. OKX Loyalty（港区）</strong></h6><ul>
<li>交易等级 NFT</li>
<li>空投奖励</li>
<li>任务系统链上化</li>
</ul>
<h6 id="🔶-3-Polygon-ID-SBT-Loyalty（链上身份-会员）"><a href="#🔶-3-Polygon-ID-SBT-Loyalty（链上身份-会员）" class="headerlink" title="🔶 3. Polygon ID &#x2F; SBT Loyalty（链上身份 + 会员）"></a>🔶 <strong>3. Polygon ID &#x2F; SBT Loyalty（链上身份 + 会员）</strong></h6><ul>
<li>无须暴露隐私即可证明会员资格</li>
<li>去中心化身份（DID + SBT）</li>
</ul>
<h6 id="🟩-4-Starbucks-Odyssey"><a href="#🟩-4-Starbucks-Odyssey" class="headerlink" title="🟩 4. Starbucks Odyssey"></a>🟩 <strong>4. Starbucks Odyssey</strong></h6><ul>
<li>咖啡任务 → NFT → 会员等级</li>
<li>用户可以交易自己的会员 NFT</li>
</ul>
<h6 id="🟪-5-Nike-Swoosh"><a href="#🟪-5-Nike-Swoosh" class="headerlink" title="🟪 5. Nike .Swoosh"></a>🟪 <strong>5. Nike .Swoosh</strong></h6><ul>
<li>鞋迷收藏 → 链上证书 → 高级会员 → 特权鞋款</li>
</ul>
<h6 id="🔷-6-Animoca-Brands-旗下-Loyalty-生态"><a href="#🔷-6-Animoca-Brands-旗下-Loyalty-生态" class="headerlink" title="🔷 6. Animoca Brands 旗下 Loyalty 生态"></a>🔷 <strong>6. Animoca Brands 旗下 Loyalty 生态</strong></h6><ul>
<li>游戏玩家链上等级</li>
<li>可跨游戏复用</li>
</ul>
<h2 id="📦-4-Web3-Loyalty-公司都在做什么？"><a href="#📦-4-Web3-Loyalty-公司都在做什么？" class="headerlink" title="📦 4. Web3 Loyalty 公司都在做什么？"></a>📦 4. Web3 Loyalty 公司都在做什么？</h2><h4 id="✨-核心业务："><a href="#✨-核心业务：" class="headerlink" title="✨ 核心业务："></a>✨ 核心业务：</h4><ol>
<li><strong>链上会员系统开发</strong></li>
<li><strong>NFT 会员卡 &#x2F; 勋章 &#x2F; 徽章</strong></li>
<li><strong>链上积分系统（SBT &#x2F; Token）</strong></li>
<li><strong>品牌任务系统（Quests）</strong></li>
<li><strong>任务 → 奖励 → 空投 强运营工具</strong></li>
<li><strong>链上 DID（去中心化身份）</strong></li>
<li><strong>品牌跨项目合作（Co-marketing）</strong></li>
</ol>
<h4 id="🎯-客户通常是："><a href="#🎯-客户通常是：" class="headerlink" title="🎯 客户通常是："></a>🎯 客户通常是：</h4><ul>
<li>交易所（Binance、OKX、Bybit）</li>
<li>L1&#x2F;L2（Ethereum、Polygon、Sui）</li>
<li>Web3 钱包</li>
<li>GameFi 项目</li>
<li>品牌（Nike、Starbucks）</li>
<li>DAO</li>
</ul>
<h2 id="🧠-5-为什么这个赛道薪资高、岗位多？"><a href="#🧠-5-为什么这个赛道薪资高、岗位多？" class="headerlink" title="🧠 5. 为什么这个赛道薪资高、岗位多？"></a>🧠 5. 为什么这个赛道薪资高、岗位多？</h2><p>因为 Web3 Loyalty &#x3D; <strong>Web3的用户增长运营工具</strong><br>谁能留住用户，谁就胜出。</p>
<p>过去 10 年 Web3 最大问题就是：</p>
<blockquote>
<p>用户太贵、留存太差、增长太慢。</p>
</blockquote>
<p>Loyalty 是 Web3 “留住用户”的核心工具，所以：</p>
<ul>
<li>资金多</li>
<li>公司增长快</li>
<li>职位多（尤其香港）</li>
</ul>
<p><strong>香港现在是最适合进这个行业的地方之一。</strong></p>
<h2 id="💼-6-Web3-Loyalty-岗位（你可能胜任的）"><a href="#💼-6-Web3-Loyalty-岗位（你可能胜任的）" class="headerlink" title="💼 6. Web3 Loyalty 岗位（你可能胜任的）"></a>💼 6. Web3 Loyalty 岗位（你可能胜任的）</h2><ul>
<li>Smart Contract Developer（Solidity）</li>
<li>Smart Contract Auditor（你的方向）</li>
<li>Growth &#x2F; Community</li>
<li>Web3 Product Manager</li>
<li>Web3 Data Analyst</li>
<li>Web3 Research</li>
</ul>
<p>尤其是：</p>
<blockquote>
<p><strong>Solidity 合约工程师（会员系统 &#x2F; NFT 合约）非常缺人。</strong></p>
</blockquote>
<p>原因是：很多品牌要做会员 NFT，但缺链上工程师。</p>
<h2 id="⚡-7-Web3-Loyalty-对你最直接的价值"><a href="#⚡-7-Web3-Loyalty-对你最直接的价值" class="headerlink" title="⚡ 7. Web3 Loyalty 对你最直接的价值"></a>⚡ 7. Web3 Loyalty 对你最直接的价值</h2><p>你现在在学：</p>
<ul>
<li>mapping &#x2F; struct &#x2F; enum</li>
<li>合约安全 &#x2F; 状态机</li>
<li>小型会员系统（你的当前练习）</li>
</ul>
<p>这些就是：</p>
<blockquote>
<p><strong>Web3 Loyalty 合约开发的核心技能。</strong></p>
</blockquote>
<p>也就是说，你正在学的内容，刚好是 Web3 Loyalty 公司的核心技术栈。</p>
<h2 id="📌-需要我帮你做以下哪一个？"><a href="#📌-需要我帮你做以下哪一个？" class="headerlink" title="📌 需要我帮你做以下哪一个？"></a>📌 需要我帮你做以下哪一个？</h2><p>A. 给你一套<strong>香港 Web3 Loyalty 公司列表</strong>（你能投简历）<br>B. 写一个<strong>行业级别的 Loyalty 合约示例</strong><br>C. 做一个你能发 GitHub 的 <strong>“链上会员系统项目”</strong><br>D. 分析你能如何从现在的技能转入这个赛道</p>
<p>你选一个，我继续帮你深入。</p>
<h1 id="Parity-冷钱包事件是什么"><a href="#Parity-冷钱包事件是什么" class="headerlink" title="Parity 冷钱包事件是什么"></a>Parity 冷钱包事件是什么</h1><p>下面我用<strong>清晰、行业级、无废话</strong>的方式告诉你：<br><strong>Parity 冷钱包事件（Parity Wallet Hack）到底是什么、为什么严重、影响了整个以太坊史。</strong></p>
<h2 id="🧨一句话总结"><a href="#🧨一句话总结" class="headerlink" title="🧨一句话总结"></a>🧨一句话总结</h2><p><strong>Parity 多签钱包代码有重大漏洞，被攻击者利用，导致超过 15 万 ETH 被盗（2017 年）。</strong></p>
<p>之后又发生第二次事故，导致 <strong>51 万 ETH 被永久冻结</strong>（2017 年 11 月）。</p>
<blockquote>
<p>这是以太坊历史上最严重的钱包安全事故之一，并深刻改变了审计行业。</p>
</blockquote>
<h2 id="📌-事件一（重大盗窃）：2017-年-7-月"><a href="#📌-事件一（重大盗窃）：2017-年-7-月" class="headerlink" title="📌 事件一（重大盗窃）：2017 年 7 月"></a>📌 事件一（重大盗窃）：2017 年 7 月</h2><h4 id="📍-背景"><a href="#📍-背景" class="headerlink" title="📍 背景"></a>📍 背景</h4><p>Parity Wallet 是当时非常热门的 <strong>多签钱包</strong>（multi-sig wallet），由 Parity Technologies 开发。<br>Gavin Wood（以太坊联合创始人）所在团队。</p>
<p>用于 ICO 项目方和基金会保管 ETH。</p>
<h2 id="🧨-事故：库函数没有正确初始化，导致任意人可成为-owner"><a href="#🧨-事故：库函数没有正确初始化，导致任意人可成为-owner" class="headerlink" title="🧨 事故：库函数没有正确初始化，导致任意人可成为 owner"></a>🧨 事故：库函数没有正确初始化，导致任意人可成为 owner</h2><h6 id="原因：-1"><a href="#原因：-1" class="headerlink" title="原因："></a>原因：</h6><p>一个关键的初始化函数 <code>initWallet()</code></p>
<ul>
<li>本应只在部署合约时执行</li>
<li>但<strong>没有设置正确的权限控制</strong></li>
</ul>
<p>结果：<br>攻击者可以自己调用 <code>initWallet()</code><br>→ 成为 owner<br>→ 取走钱包中所有 ETH</p>
<h2 id="💸-损失"><a href="#💸-损失" class="headerlink" title="💸 损失"></a>💸 损失</h2><h6 id="📍-被盗-153-037-ETH（当时价值约-3-000-万美元）"><a href="#📍-被盗-153-037-ETH（当时价值约-3-000-万美元）" class="headerlink" title="📍 被盗 153,037 ETH（当时价值约 3,000 万美元）"></a>📍 被盗 <strong>153,037 ETH</strong>（当时价值约 3,000 万美元）</h6><p>包括：</p>
<ul>
<li>Swarm 项目</li>
<li>Edgeless Casino</li>
<li>æternity 项目<br>等多个 ICO 的官方资金被盗。</li>
</ul>
<p>攻击者随后把钱洗走。</p>
<h2 id="📌-事件二（更严重）：2017-年-11-月"><a href="#📌-事件二（更严重）：2017-年-11-月" class="headerlink" title="📌 事件二（更严重）：2017 年 11 月"></a>📌 事件二（更严重）：2017 年 11 月</h2><p>这次不是被黑了，而是 <strong>一个普通用户误操作把合约“自毁”了”</strong>。</p>
<h6 id="🧨-原因："><a href="#🧨-原因：" class="headerlink" title="🧨 原因："></a>🧨 原因：</h6><p>Parity 钱包代码可“升级”，使用了一个 <strong>library 合约</strong>。</p>
<p>一个用户执行了以下操作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs solidity">initWallet()   // 初始化了 library，自称为 owner<br>selfdestruct() // 把 library 自毁了<br></code></pre></div></td></tr></table></figure>

<p>library 被自毁后所有依赖它的钱包都“瘫痪”。</p>
<p>结果：</p>
<blockquote>
<p>所有 Parity 多签钱包 <strong>无法再取钱</strong><br>因为操作逻辑全都存在 library 里，library 被删掉了。</p>
</blockquote>
<p>就像你的程序逻辑文件被删除，而主程序只能“空转”。</p>
<h2 id="💰-损失规模："><a href="#💰-损失规模：" class="headerlink" title="💰 损失规模："></a>💰 损失规模：</h2><h6 id="📍-冻结-513-774-ETH"><a href="#📍-冻结-513-774-ETH" class="headerlink" title="📍 冻结 513,774 ETH"></a>📍 冻结 <strong>513,774 ETH</strong></h6><p>这些 ETH 永远无法取出，相当于：</p>
<ul>
<li>5 亿美元（按当时）</li>
<li>超过 10 亿美元（按后来的 ETH 价格）</li>
</ul>
<p>属于：</p>
<ul>
<li>Polkadot ICO 基金（Gavin Wood 的项目）</li>
<li>众多欧洲创业团队</li>
<li>ICO 项目资金池</li>
</ul>
<p><strong>至今仍无法恢复。</strong></p>
<h2 id="🧠-为什么这个事件震撼了整个行业？"><a href="#🧠-为什么这个事件震撼了整个行业？" class="headerlink" title="🧠 为什么这个事件震撼了整个行业？"></a>🧠 为什么这个事件震撼了整个行业？</h2><h4 id="1️⃣-暴露了-Solidity-的危险性"><a href="#1️⃣-暴露了-Solidity-的危险性" class="headerlink" title="1️⃣ 暴露了 Solidity 的危险性"></a>1️⃣ 暴露了 Solidity 的危险性</h4><p>一个小小的 <code>initWallet()</code>、一个 <code>selfdestruct()</code><br>就能造成 10 亿美元级损失。</p>
<p>因此才出现现在的：</p>
<ul>
<li>OpenZeppelin 标准库</li>
<li>proxy 合约模式</li>
<li>SafeMath（当年）</li>
<li>更严格的审计体系</li>
</ul>
<h4 id="2️⃣-多签钱包变成安全重点"><a href="#2️⃣-多签钱包变成安全重点" class="headerlink" title="2️⃣ 多签钱包变成安全重点"></a>2️⃣ 多签钱包变成安全重点</h4><p>从那之后，所有 DeFi 项目做 treasury 都会问：</p>
<blockquote>
<p>你们用什么多签？<br>是 Gnosis Safe 吗？</p>
</blockquote>
<p>Parity 事件之后，Gnosis Safe 成为行业标准。</p>
<h4 id="3️⃣-“可升级合约”被认为是危险操作"><a href="#3️⃣-“可升级合约”被认为是危险操作" class="headerlink" title="3️⃣ “可升级合约”被认为是危险操作"></a>3️⃣ “可升级合约”被认为是危险操作</h4><p>因为 Parity wallet 设计成可升级，才导致 library 有被 init 和 selfdestruct 的机会。</p>
<p>现代 DeFi 都会非常谨慎地做 upgradeability。</p>
<h4 id="4️⃣-合约审计行业因此爆发"><a href="#4️⃣-合约审计行业因此爆发" class="headerlink" title="4️⃣ 合约审计行业因此爆发"></a>4️⃣ 合约审计行业因此爆发</h4><p>2017–2018 年大量项目被 Hack（包括 Parity），<br>审计行业因此高速成长。</p>
<p>你现在要去做 <strong>Smart Contract Auditor</strong>，<br>Parity 事件是必懂的经典案例。</p>
<h2 id="🧩-用一句话总结当年的核心错误"><a href="#🧩-用一句话总结当年的核心错误" class="headerlink" title="🧩 用一句话总结当年的核心错误"></a>🧩 用一句话总结当年的核心错误</h2><h6 id="事件-1（被盗）"><a href="#事件-1（被盗）" class="headerlink" title="事件 1（被盗）"></a>事件 1（被盗）</h6><blockquote>
<p>初始化函数没加 <code>onlyOwner</code> → 被人夺走控制权。</p>
</blockquote>
<h6 id="事件-2（冻结）"><a href="#事件-2（冻结）" class="headerlink" title="事件 2（冻结）"></a>事件 2（冻结）</h6><blockquote>
<p>library 合约可被初始化 + 可被 selfdestruct → 关键逻辑被删除。</p>
</blockquote>
<p>这两点都是“初级工程师级别 bug”，<br>但发生在数亿美元级别合约上。</p>
<h2 id="你需要我再深入讲哪一部分？"><a href="#你需要我再深入讲哪一部分？" class="headerlink" title="你需要我再深入讲哪一部分？"></a>你需要我再深入讲哪一部分？</h2><p>A. 用代码示例重现漏洞<br>B. 分析当时的 root cause（面向审计师）<br>C. 讲清楚“为什么可升级合约很容易出安全问题”<br>D. 对比一下 Gnosis Safe 为何更安全（行业最佳实践）</p>
<p>选一个，我继续深入。</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Web3/">Web3</a>
                    
                  </div>
                
              </div>
              
                
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/11/14/44436.html">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">remix编译运行solidity7</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/11/12/16106.html">
                        <span class="hidden-mobile">高效能人士的7个习惯与Web3开发</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


            

                
                  <a id="scroll-top-button" href="#" role="button">
                    <i class="iconfont icon-arrowup" aria-hidden="true"></i>
                  </a>
                  

                    

                          
      </main>

      <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://whale3070.github.io/" target="_blank" rel="nofollow noopener"><span>Whale3070</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.staticfile.org/tocbot/4.12.0/tocbot.min.js" ></script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


<link href="/pagefind/pagefind-ui.css" rel="stylesheet">
  <script src="/pagefind/pagefind-ui.js"></script>
  <style>
    /* 搜索框配色适配 */
    #search { margin-top: 2rem; }
    [data-user-color-scheme='dark'] .pagefind-ui {
      --pagefind-ui-primary: #eeeeee;
      --pagefind-ui-text: #eeeeee;
      --pagefind-ui-background: #151515;
      --pagefind-ui-border: #333;
    }
  </style>
    </body>

  </html>